
-----------Lá»—i chÆ°a sá»­a Ä‘Æ°á»£c ----------------------------------------------------

khoáº£ng cÃ¡ch trÃ¡i pháº£i cá»§a 2 áº£nh vá»›i 2 bÃªn  viá»n chÆ°a báº±ng nhau ( bÃªn trÃ¡i 16px , pháº£i 10px)

nÃªn Ä‘á»ƒ cÃ¡c má»¥c á»Ÿ cháº¿ Ä‘á»™ random hiá»ƒn thá»‹ sáº£n pháº©m

sá»­a data cho Ä‘á»“ng bá»™ thÃ´ng tin cho chuáº©n vÃ  sá»­a tÃªn biáº¿n pháº§n tÃªn vÃ  title cá»§a cÃ¡c dá»¯ liá»‡u cho giá»‘ng nhau

nháº¡c : náº¯ng hoa niÃªn

+++++++++++++ÄANG LÃ€M ++++++++++++++++++++++++++++++++++++++++++++++++++++++++

há»c vÃ  sá»­ dá»¥ng typeScript, 

há»c vÃ  sá»­ dá»¥ng createAsyncThunk 

sá»­ dá»¥ng axios thay cho fetch Ä‘á»ƒ dÃ¹ng api 

Ã¡p dá»¥ng vÃ o cho code AddressSelector


location?:string lÃ  khi khai bÃ¡o cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng

async (_, { rejectWithValue }) => { ... }
   -> _: Dáº¥u gáº¡ch dÆ°á»›i lÃ  quy Æ°á»›c Ä‘áº·t tÃªn cho tham sá»‘ khÃ´ng dÃ¹ng Ä‘áº¿n (tham sá»‘ Ä‘áº§u tiÃªn).


'idle': KhÃ´ng hoáº¡t Ä‘á»™ng, sáºµn sÃ ng Ä‘á»ƒ báº¯t Ä‘áº§u .
'loading': Äang diá»…n ra (Ä‘ang chá» pháº£n há»“i) .
'succeeded': ÄÃ£ hoÃ n thÃ nh thÃ nh cÃ´ng .
'failed': ÄÃ£ hoÃ n thÃ nh nhÆ°ng gáº·p lá»—i .


"compilerOptions": {
    // 1. Má»¥c tiÃªu JavaScript Ä‘áº§u ra
    "target": "es5", 
    // -> Code sáº½ Ä‘Æ°á»£c dá»‹ch xuá»‘ng chuáº©n ES5 (cÅ©) Ä‘á»ƒ cháº¡y Ä‘Æ°á»£c trÃªn háº§u háº¿t má»i trÃ¬nh duyá»‡t.

    // 2. ThÆ° viá»‡n há»— trá»£
    "lib": ["dom", "dom.iterable", "esnext"],
    // -> Náº¡p sáºµn cÃ¡c kiá»ƒu dá»¯ liá»‡u cá»§a trÃ¬nh duyá»‡t (nhÆ° document, window, console...) 
    // vÃ  cÃ¡c tÃ­nh nÄƒng JS má»›i nháº¥t.

    // 3. Cháº¿ Ä‘á»™ lai (Hybrid) - QUAN TRá»ŒNG CHO VIá»†C CHUYá»‚N Äá»”I Dáº¦N Dáº¦N
    "allowJs": true,
    // -> Cho phÃ©p file .js vÃ  .ts cÃ¹ng tá»“n táº¡i. 
    // Báº¡n khÃ´ng cáº§n sá»­a háº¿t 100% file sang TS ngay láº­p tá»©c.

    // 4. Kiá»ƒm soÃ¡t lá»—i cháº·t cháº½
    "strict": true,
    // -> Báº­t cháº¿ Ä‘á»™ kiá»ƒm tra lá»—i nghiÃªm ngáº·t nháº¥t. 
    // VÃ­ dá»¥: Báº¯t buá»™c khai bÃ¡o kiá»ƒu, khÃ´ng cho phÃ©p biáº¿n cÃ³ giÃ¡ trá»‹ "any" ngáº§m Ä‘á»‹nh.

    // 5. Cáº¥u hÃ¬nh React
    "jsx": "react-jsx",
    // -> Há»— trá»£ cÃº phÃ¡p JSX má»›i cá»§a React 17+ (khÃ´ng cáº§n `import React` á»Ÿ má»i file).

    // 6. Xá»­ lÃ½ Module
    "module": "esnext",
    "moduleResolution": "node",
    // -> GiÃºp TypeScript hiá»ƒu cÃ¡ch import/export file giá»‘ng nhÆ° NodeJS/Webpack Ä‘ang lÃ m.

    // 7. KhÃ´ng táº¡o file Ä‘áº§u ra
    "noEmit": true,
    // -> TypeScript chá»‰ lÃ m nhiá»‡m vá»¥ kiá»ƒm tra lá»—i (Type Checking). 
    // Viá»‡c táº¡o ra file .js cuá»‘i cÃ¹ng Ä‘á»ƒ cháº¡y sáº½ do React-Scripts (Webpack/Babel) Ä‘áº£m nhiá»‡m.
}



1. let vÃ  const giá»‘ng nhau á»Ÿ Ä‘iá»ƒm nÃ o?

Cáº£ hai Ä‘á»u lÃ  block scope (pháº¡m vi trong ngoáº·c { })
VÃ­ dá»¥:

{
  let a = 1;
  const b = 2;
}
console.log(a, b); // âŒ lá»—i: a, b khÃ´ng tá»“n táº¡i ngoÃ i block


â†’ khÃ¡c vá»›i var (function scope).

âœ… 2. let khÃ¡c vá»›i const á»Ÿ Ä‘Ã¢u?
A. Vá» kháº£ nÄƒng thay Ä‘á»•i giÃ¡ trá»‹
ğŸ”¹ let: cÃ³ thá»ƒ gÃ¡n láº¡i (reassign)
let x = 10;
x = 20; // âœ” ok

ğŸ”¹ const: khÃ´ng thá»ƒ gÃ¡n láº¡i (no reassign)
const y = 10;
y = 20; // âŒ lá»—i

B. Vá» viá»‡c gÃ¡n giÃ¡ trá»‹ ngay khi khai bÃ¡o
ğŸ”¹ let: cÃ³ thá»ƒ khai bÃ¡o rá»“i gÃ¡n sau
let a;
a = 123; // âœ” ok

ğŸ”¹ const: báº¯t buá»™c gÃ¡n ngay khi khai bÃ¡o
const b;  // âŒ lá»—i

C. Vá»›i object hoáº·c array

const khÃ´ng cho phÃ©p Ä‘á»•i tham chiáº¿u (reference)
â†’ NhÆ°ng báº¡n váº«n cÃ³ thá»ƒ thay Ä‘á»•i ná»™i dung bÃªn trong.

VÃ­ dá»¥:
const obj = { name: "A" };
obj.name = "B"; // âœ” Ä‘Æ°á»£c

obj = { name: "C" }; // âŒ lá»—i: thay toÃ n bá»™ object


â†’ LÃ½ do: báº¡n khÃ´ng Ä‘Æ°á»£c Ä‘á»•i biáº¿n obj sang object khÃ¡c, nhÆ°ng Ä‘Æ°á»£c sá»­a thuá»™c tÃ­nh.

âœ… 3. Khi nÃ o nÃªn dÃ¹ng let?

DÃ¹ng let khi báº¡n biáº¿t giÃ¡ trá»‹ sáº½ thay Ä‘á»•i, vÃ­ dá»¥:

TrÆ°á»ng há»£p thÆ°á»ng dÃ¹ng:

biáº¿n Ä‘áº¿m vÃ²ng láº·p

biáº¿n tráº¡ng thÃ¡i thay Ä‘á»•i

gÃ¡n láº¡i káº¿t quáº£

VÃ­ dá»¥:

let count = 0;
count++;


Hoáº·c:

let result;
if (condition) {
  result = 10;
} else {
  result = 20;
}

âœ… 4. Khi nÃ o nÃªn dÃ¹ng const?

DÃ¹ng const khi báº¡n khÃ´ng muá»‘n giÃ¡ trá»‹ bá»‹ thay Ä‘á»•i trong suá»‘t chÆ°Æ¡ng trÃ¬nh.

ğŸ‘‰ ÄÃ¢y lÃ  best practice: Ä‘áº·t máº·c Ä‘á»‹nh dÃ¹ng const, vÃ  chá»‰ dÃ¹ng let khi tháº­t cáº§n thay Ä‘á»•i.

ThÆ°á»ng dÃ¹ng:

config

URL

cÃ¡c giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh

hÃ m

object khÃ´ng muá»‘n thay Ä‘á»•i tham chiáº¿u

VÃ­ dá»¥:

const PI = 3.14;
const API_URL = "https://api.com";
const user = { name: "A" };

ğŸ”¥ Gá»£i Ã½ tá»« cÃ¡c chuyÃªn gia JavaScript (ESLint, AirBnB Style Guide)

LuÃ´n dÃ¹ng const máº·c Ä‘á»‹nh

Chá»‰ dÃ¹ng let khi báº¡n cáº§n thay Ä‘á»•i giÃ¡ trá»‹

â†’ GiÃºp code an toÃ n hÆ¡n, Ã­t bug hÆ¡n.

ğŸ“Œ TÃ³m táº¯t siÃªu ngáº¯n, dá»… nhá»›
Äáº·c Ä‘iá»ƒm	let	const
Thay Ä‘á»•i giÃ¡ trá»‹	âœ” CÃ³ thá»ƒ	âŒ KhÃ´ng thá»ƒ
Pháº£i gÃ¡n khi khai bÃ¡o	âŒ KhÃ´ng	âœ” CÃ³
Sá»­a ná»™i dung object	âœ” CÃ³ thá»ƒ	âœ” CÃ³ thá»ƒ (chá»‰ khÃ´ng Ä‘á»•i reference)
Khi nÃ o dÃ¹ng	Khi giÃ¡ trá»‹ sáº½ thay Ä‘á»•i	Khi giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh






 const payload = { ...data, meta: meta || null, id: String(Math.floor(Math.random() * 1000000000)) };
 
 DÆ°á»›i Ä‘Ã¢y lÃ  sá»± khÃ¡c biá»‡t cá»¥ thá»ƒ:

1. key={currentPage} (á» tháº» div cha)
Má»¥c Ä‘Ã­ch: KÃ­ch hoáº¡t láº¡i Animation (Hiá»‡u á»©ng chuyá»ƒn trang).
Giáº£i thÃ­ch:
Trong React, khi key cá»§a má»™t component thay Ä‘á»•i, React sáº½ coi Ä‘Ã³ lÃ  má»™t component hoÃ n toÃ n má»›i. NÃ³ sáº½ há»§y bá» (unmount) cÃ¡i cÅ© vÃ  váº½ láº¡i (mount) cÃ¡i má»›i tá»« Ä‘áº§u.
á» Ä‘Ã¢y, khi báº¡n báº¥m nÃºt chuyá»ƒn trang (currentPage thay Ä‘á»•i), React sáº½ xÃ³a háº³n cÃ¡i div cÅ© Ä‘i vÃ  táº¡o má»™t cÃ¡i div má»›i.
Viá»‡c nÃ y giÃºp cÃ¡c hiá»‡u á»©ng CSS (nhÆ° slide-next, slide-prev) Ä‘Æ°á»£c cháº¡y láº¡i tá»« Ä‘áº§u. Náº¿u khÃ´ng Ä‘á»•i key, React chá»‰ cáº­p nháº­t ná»™i dung bÃªn trong thÃ´i nÃªn hiá»‡u á»©ng trÆ°á»£t cÃ³ thá»ƒ sáº½ khÃ´ng cháº¡y.
2. key={deal.id} (á» tháº» Link con)
Má»¥c Ä‘Ã­ch: Äá»‹nh danh pháº§n tá»­ trong danh sÃ¡ch (Hiá»‡u nÄƒng & Logic).
Giáº£i thÃ­ch:
ÄÃ¢y lÃ  yÃªu cáº§u báº¯t buá»™c cá»§a React khi báº¡n dÃ¹ng hÃ m .map() Ä‘á»ƒ in ra má»™t danh sÃ¡ch.
NÃ³ giÃºp React biáº¿t chÃ­nh xÃ¡c sáº£n pháº©m nÃ o lÃ  sáº£n pháº©m nÃ o.
VÃ­ dá»¥: Náº¿u danh sÃ¡ch sáº£n pháº©m thay Ä‘á»•i thá»© tá»±, React dá»±a vÃ o key nÃ y Ä‘á»ƒ chá»‰ sáº¯p xáº¿p láº¡i cÃ¡c tháº» Link cÃ³ sáºµn thay vÃ¬ pháº£i xÃ³a Ä‘i váº½ láº¡i toÃ n bá»™, giÃºp trang web cháº¡y mÆ°á»£t hÆ¡n.


TÃ³m táº¯t sá»± khÃ¡c nhau:
Äáº·c Ä‘iá»ƒm	key={currentPage}	key={deal.id}
Vá»‹ trÃ­	Äáº·t á»Ÿ tháº» bao ngoÃ i (div).	Äáº·t á»Ÿ tá»«ng pháº§n tá»­ con (Link).
Äá»‘i tÆ°á»£ng	Quáº£n lÃ½ cáº£ nhÃ³m sáº£n pháº©m.	Quáº£n lÃ½ tá»«ng sáº£n pháº©m láº».
TÃ¡c dá»¥ng chÃ­nh	Báº¯t buá»™c React váº½ láº¡i tá»« Ä‘áº§u Ä‘á»ƒ cháº¡y hiá»‡u á»©ng chuyá»ƒn cáº£nh.	GiÃºp React theo dÃµi tá»«ng mÃ³n hÃ ng Ä‘á»ƒ cáº­p nháº­t thÃ´ng minh vÃ  tá»‘i Æ°u.





1. NÃ³ láº¥y tá»« Ä‘Ã¢u ra?

NÃ³ Ä‘Æ°á»£c láº¥y ra tá»« máº£ng history (lá»‹ch sá»­ mua hÃ ng).
Cá»¥ thá»ƒ lÃ  trong hÃ m .map((entry, idx) => ...): HÃ m nÃ y cháº¡y qua tá»«ng pháº§n tá»­ cá»§a máº£ng history. Má»—i láº§n cháº¡y, nÃ³ láº¥y ra má»™t pháº§n tá»­ vÃ  Ä‘áº·t tÃªn táº¡m thá»i lÃ  entry.
2. NÃ³ lÃ  gÃ¬?

NÃ³ lÃ  má»™t Object (Ä‘á»‘i tÆ°á»£ng) chá»©a toÃ n bá»™ thÃ´ng tin cá»§a má»™t Ä‘Æ¡n hÃ ng mÃ  báº¡n Ä‘Ã£ lÆ°u trÆ°á»›c Ä‘Ã³.
Cáº¥u trÃºc cá»§a nÃ³ thÆ°á»ng trÃ´ng nhÆ° tháº¿ nÃ y (dá»±a trÃªn code CheckoutForm.jsx):
javascript
{
  fullName: "Nguyá»…n VÄƒn A",
  phone: "0987654321",
  email: "a@gmail.com",
  addressDetail: "Sá»‘ 123, ÄÆ°á»ng ABC...",
  note: "Giao giá» hÃ nh chÃ­nh",
  meta: {
      products: [ ...danh sÃ¡ch sáº£n pháº©m... ]
  }
}
3. DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?

NÃ³ dÃ¹ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t cá»§a Ä‘Æ¡n hÃ ng Ä‘Ã³ lÃªn mÃ n hÃ¬nh.
VÃ­ dá»¥ trong code:
entry.meta?.products: Láº¥y danh sÃ¡ch sáº£n pháº©m Ä‘á»ƒ tÃ­nh tá»•ng tiá»n.
entry.fullName: Hiá»ƒn thá»‹ tÃªn ngÆ°á»i nháº­n.
entry.phone: Hiá»ƒn thá»‹ sá»‘ Ä‘iá»‡n thoáº¡i.
TÃ³m láº¡i: Náº¿u history lÃ  má»™t cuá»‘n sá»• ghi chÃ©p bÃ¡n hÃ ng, thÃ¬ entry chÃ­nh lÃ  má»™t trang giáº¥y trong cuá»‘n sá»• Ä‘Ã³, ghi chi tiáº¿t vá» má»™t láº§n bÃ¡n hÃ ng cá»¥ thá»ƒ.

reverse vÃ  products.reduce trong nÃ y cÃ³ tÃ¡c dá»¥ng nhÆ° nÃ o vÃ  nÃ³ hoáº¡t Ä‘á»™ng nhÆ° nÃ o  @BuyerInfo.jsx#L67-69 

DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch chi tiáº¿t vá» tÃ¡c dá»¥ng vÃ  cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a reverse() vÃ  reduce() trong Ä‘oáº¡n code trÃªn:

1. .reverse() (Äáº£o ngÆ°á»£c danh sÃ¡ch)
TÃ¡c dá»¥ng: Äáº£o ngÆ°á»£c thá»© tá»± cÃ¡c pháº§n tá»­ trong máº£ng history.
Táº¡i sao cáº§n dÃ¹ng?
Máº·c Ä‘á»‹nh, khi báº¡n thÃªm Ä‘Æ¡n hÃ ng má»›i vÃ o máº£ng (dÃ¹ng push hoáº·c [...]), Ä‘Æ¡n hÃ ng má»›i nháº¥t sáº½ náº±m á»Ÿ cuá»‘i máº£ng.
Tuy nhiÃªn, khi hiá»ƒn thá»‹ lá»‹ch sá»­ mua hÃ ng, ngÆ°á»i dÃ¹ng thÆ°á»ng muá»‘n tháº¥y Ä‘Æ¡n hÃ ng má»›i nháº¥t á»Ÿ trÃªn cÃ¹ng.
reverse() giÃºp Ä‘Æ°a pháº§n tá»­ cuá»‘i lÃªn Ä‘áº§u Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c Ä‘Ã­ch nÃ y.
LÆ°u Ã½ nhá»: TrÆ°á»›c Ä‘Ã³ cÃ³ dÃ¹ng .slice() (history.slice().reverse()). Äiá»u nÃ y ráº¥t quan trá»ng vÃ¬ reverse() sáº½ lÃ m thay Ä‘á»•i trá»±c tiáº¿p máº£ng gá»‘c. DÃ¹ng slice() Ä‘á»ƒ táº¡o ra má»™t báº£n sao (copy) trÆ°á»›c, sau Ä‘Ã³ má»›i Ä‘áº£o ngÆ°á»£c báº£n sao Ä‘Ã³, giá»¯ nguyÃªn máº£ng gá»‘c history khÃ´ng bá»‹ xÃ¡o trá»™n.
2. products.reduce(...) (TÃ­nh tá»•ng tiá»n)
TÃ¡c dá»¥ng: Cá»™ng dá»“n giÃ¡ tiá»n cá»§a táº¥t cáº£ sáº£n pháº©m trong Ä‘Æ¡n hÃ ng Ä‘á»ƒ ra Tá»•ng tiá»n Ä‘Æ¡n hÃ ng.
CÃ¡ch hoáº¡t Ä‘á»™ng: HÃ m reduce cháº¡y qua tá»«ng sáº£n pháº©m (p) trong danh sÃ¡ch products vÃ  cá»™ng dá»“n vÃ o biáº¿n tá»•ng (sum). CÃ´ng thá»©c trong code: 
(sum, p) => sum + (p.price * p.quantity)
Láº§n cháº¡y 1:
sum (khá»Ÿi táº¡o) = 0 (do sá»‘ 0 á»Ÿ cuá»‘i hÃ m reduce).
Sáº£n pháº©m A: GiÃ¡ 10k, Sá»‘ lÆ°á»£ng 2 -> ThÃ nh tiá»n: 20k.
sum má»›i = 0 + 20k = 20k.
Láº§n cháº¡y 2:
sum (hiá»‡n táº¡i) = 20k.
Sáº£n pháº©m B: GiÃ¡ 50k, Sá»‘ lÆ°á»£ng 1 -> ThÃ nh tiá»n: 50k.
sum má»›i = 20k + 50k = 70k.
...Cá»© tháº¿ cho Ä‘áº¿n háº¿t sáº£n pháº©m. Káº¿t quáº£ cuá»‘i cÃ¹ng tráº£ vá» lÃ  tá»•ng tiá»n cá»§a cáº£ Ä‘Æ¡n hÃ ng.
TÃ³m láº¡i:

reverse: GiÃºp Ä‘Æ¡n hÃ ng má»›i nháº¥t hiá»‡n lÃªn Ä‘áº§u.
reduce: GiÃºp tÃ­nh tá»•ng tiá»n pháº£i tráº£ cho toÃ n bá»™ Ä‘Æ¡n hÃ ng Ä‘Ã³.




Má»¥c Ä‘Ã­ch cá»§a hÃ m: Khi báº¡n má»Ÿ nhiá»u tab trÃ¬nh duyá»‡t, náº¿u má»™t tab thay Ä‘á»•i dá»¯ liá»‡u (vÃ­ dá»¥: Ä‘áº·t hÃ ng thÃ nh cÃ´ng), cÃ¡c tab khÃ¡c cáº§n cáº­p nháº­t theo. Dá»¯ liá»‡u nÃ y Ä‘Æ°á»£c láº¥y tá»« localStorage (nÆ¡i lÆ°u trá»¯ dáº¡ng chuá»—i JSON) vÃ  gá»­i vÃ o hÃ m nÃ y thÃ´ng qua action.payload.
Táº¡i sao pháº£i viáº¿t nhÆ° váº­y?
const { history, data } = action.payload || {};
Váº¥n Ä‘á»: ÄÃ´i khi action.payload cÃ³ thá»ƒ bá»‹ undefined hoáº·c null (vÃ­ dá»¥: lá»—i khi gá»i hÃ m, hoáº·c dá»¯ liá»‡u truyá»n vÃ o bá»‹ rá»—ng). Náº¿u báº¡n cá»‘ truy cáº­p action.payload.history khi action.payload lÃ  null, á»©ng dá»¥ng sáº½ bá»‹ lá»—i ngay láº­p tá»©c ("Cannot read property 'history' of null").
Giáº£i phÃ¡p: || {} (hoáº·c object rá»—ng) lÃ  má»™t ká»¹ thuáº­t "phÃ²ng thá»§". Náº¿u action.payload khÃ´ng cÃ³ giÃ¡ trá»‹, nÃ³ sáº½ láº¥y {} lÃ m máº·c Ä‘á»‹nh. Nhá» Ä‘Ã³, viá»‡c destructuring { history, data } sáº½ khÃ´ng bao giá» gÃ¢y lá»—i, nÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  undefined náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u.
state.history = history || [];
Váº¥n Ä‘á»: Trong component 
BuyerInfo.jsx
, báº¡n cÃ³ code history.map(...). HÃ m .map() chá»‰ hoáº¡t Ä‘á»™ng trÃªn máº£ng. Náº¿u state.history bá»‹ gÃ¡n thÃ nh null hoáº·c undefined, khi component cá»‘ cháº¡y .map(), á»©ng dá»¥ng sáº½ bá»‹ "tráº¯ng trang" (crash) vá»›i lá»—i "Cannot read property 'map' of undefined".
Giáº£i phÃ¡p: || [] Ä‘áº£m báº£o ráº±ng dÃ¹ dá»¯ liá»‡u Ä‘áº§u vÃ o cÃ³ bá»‹ lá»—i, thiáº¿u, hay null, thÃ¬ state.history luÃ´n luÃ´n lÃ  má»™t máº£ng (Ã­t nháº¥t lÃ  máº£ng rá»—ng []). Äiá»u nÃ y giÃºp giao diá»‡n váº«n hiá»ƒn thá»‹ Ä‘Æ°á»£c (dÃ¹ lÃ  hiá»ƒn thá»‹ danh sÃ¡ch trá»‘ng) thay vÃ¬ bá»‹ sáº­p hoÃ n toÃ n.
state.data = data || null;
TÆ°Æ¡ng tá»±, dÃ²ng nÃ y Ä‘áº£m báº£o state.data cÃ³ giÃ¡ trá»‹ rÃµ rÃ ng (lÃ  dá»¯ liá»‡u hoáº·c lÃ  null), trÃ¡nh Ä‘á»ƒ nÃ³ á»Ÿ tráº¡ng thÃ¡i undefined khÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c.
TÃ³m láº¡i: CÃ¡ch viáº¿t nÃ y lÃ  láº­p trÃ¬nh phÃ²ng thá»§ (defensive programming). NÃ³ cháº¥p nháº­n ráº±ng dá»¯ liá»‡u Ä‘áº§u vÃ o tá»« localStorage cÃ³ thá»ƒ khÃ´ng hoÃ n háº£o (do lá»—i parse JSON, do ngÆ°á»i dÃ¹ng xÃ³a storage, v.v.) vÃ  chá»§ Ä‘á»™ng xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p xáº¥u Ä‘Ã³ Ä‘á»ƒ á»©ng dá»¥ng luÃ´n cháº¡y á»•n Ä‘á»‹nh.


 Math.random().toString(36).substr(2, 9);
Math.random():
HÃ m nÃ y sinh ra má»™t sá»‘ tháº­p phÃ¢n ngáº«u nhiÃªn tá»« 0 Ä‘áº¿n 1 (vÃ­ dá»¥: 0.85920312...).
.toString(36):
ÄÃ¢y lÃ  bÆ°á»›c quan trá»ng nháº¥t. NÃ³ chuyá»ƒn sá»‘ tháº­p phÃ¢n kia thÃ nh má»™t chuá»—i kÃ½ tá»± theo há»‡ cÆ¡ sá»‘ 36.
Há»‡ cÆ¡ sá»‘ 36 bao gá»“m 10 chá»¯ sá»‘ (0-9) vÃ  26 chá»¯ cÃ¡i tiáº¿ng Anh (a-z). Tá»•ng cá»™ng lÃ  36 kÃ½ tá»±.
VÃ­ dá»¥: Sá»‘ 0.8592... khi chuyá»ƒn sang há»‡ 36 sáº½ thÃ nh chuá»—i dáº¡ng "0.u8x1n4...". NÃ³ giÃºp nÃ©n sá»‘ láº¡i ngáº¯n hÆ¡n vÃ  nhÃ¬n giá»‘ng mÃ£ code hÆ¡n.
.substr(2, 9):
HÃ m nÃ y cáº¯t chuá»—i kÃ½ tá»±.
2: Báº¯t Ä‘áº§u cáº¯t tá»« vá»‹ trÃ­ thá»© 2 (Ä‘á»ƒ bá» Ä‘i 2 kÃ½ tá»± Ä‘áº§u lÃ  "0.").
9: Láº¥y Ä‘á»™ dÃ i 9 kÃ½ tá»± tiáº¿p theo.
VÃ­ dá»¥ minh há»a quy trÃ¬nh:

Math.random() â” 0.5820184...
.toString(36) â” "0.ky7j2q9..." (Chuyá»ƒn sang chuá»—i gá»“m sá»‘ vÃ  chá»¯)
.substr(2, 9) â” "ky7j2q9" (Cáº¯t bá» "0." vÃ  láº¥y pháº§n Ä‘uÃ´i)


so sÃ¡nh sá»± khÃ¡c nhau giá»¯a useState vá»›i useRef , vÃ  chá»‰ ra khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i

giáº£i thÃ­ch key lÃ  gÃ¬ trong code nÃ y vÃ  cÃ¡c key cÃ³ gÃ¬ khÃ¡c nhau <div className="deals-grid-wrapper" style={{ position: 'relative' }}>
        <PrevArrow onClick={handlePrev} />
        <div className={`deals-grid slide-${direction}`} key={currentPage}>
          {deals.map((deal) => (
            <Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

              <div className="deal-image-wrapper">
                <img src={deal.image} alt={deal.title} className="deal-image" />

                <span className="discount-tag">{deal.date}</span>

                {deal.imageBadges && (
                  <img src={deal.imageBadges} alt="Badge" className="mini-badge" />
                )}

lÃ m form nháº­p thÃ´ng tin ngÆ°á»i mua hÃ ng báº±ng react-hook-form 

 dÃ¹ng API address nÃ y Ä‘á»ƒ láº¥y Ä‘áº§y Ä‘á»§ dá»¯ liá»‡u  :
 https://provinces.open-api.vn/api/?depth=3
 
 DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch thay toÃ n bá»™ addressData tÄ©nh báº±ng dá»¯ liá»‡u tháº­t tá»« API:

ğŸ“Œ API:
https://provinces.open-api.vn/api/?depth=3
â†’ tráº£ vá» Ä‘áº§y Ä‘á»§ Tá»‰nh/TP â†’ Quáº­n/Huyá»‡n â†’ PhÆ°á»ng/XÃ£

âœ… Báº¡n chá»‰ cáº§n lÃ m 3 bÆ°á»›c:
1ï¸âƒ£ Táº¡o state chá»©a dá»¯ liá»‡u API
const [addressData, setAddressData] = React.useState([]);

2ï¸âƒ£ Gá»i API trong useEffect Ä‘á»ƒ láº¥y danh sÃ¡ch tá»‰nh/thÃ nh
React.useEffect(() => {
    fetch("https://provinces.open-api.vn/api/?depth=3")
        .then(res => res.json())
        .then(data => {
            setAddressData(data);
        })
        .catch(err => console.log("Lá»—i API:", err));
}, []);


â¡ï¸ KhÃ´ng cáº§n giá»¯ cÃ¡i addressData object ráº¥t dÃ i ná»¯a.

3ï¸âƒ£ Láº¥y District vÃ  Ward theo API tháº­t

API tráº£ vá» format nhÆ° sau:

[
  {
    "name": "HÃ  Ná»™i",
    "code": 1,
    "districts": [
      {
        "name": "Quáº­n Ba ÄÃ¬nh",
        "wards": [
          { "name": "PhÆ°á»ng Liá»…u Giai" },
          { "name": "PhÆ°á»ng Äá»™i Cáº¥n" }
        ]
      }
    ]
  }
]

ğŸ“Œ Viáº¿t hÃ m láº¥y District theo City
const getDistrictsByCity = (cityCode) => {
    const city = addressData.find(c => c.code === Number(cityCode));
    return city ? city.districts : [];
};

ğŸ“Œ Viáº¿t hÃ m láº¥y Ward theo District
const getWardsByDistrict = (cityCode, districtCode) => {
    const city = addressData.find(c => c.code === Number(cityCode));
    if (!city) return [];

    const district = city.districts.find(d => d.code === Number(districtCode));
    return district ? district.wards : [];
};

ğŸ”¥ 4ï¸âƒ£ Update dropdown select dÃ¹ng dá»¯ liá»‡u API
City Select
<select
    {...register("city", { required: "Vui lÃ²ng chá»n tá»‰nh/thÃ nh phá»‘" })}
    value={selectedCity}
    onChange={(e) => {
        setSelectedCity(e.target.value);
        setSelectedDistrict("");
        setSelectedWard("");
    }}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n tá»‰nh/thÃ nh phá»‘</option>

    {addressData.map((city) => (
        <option key={city.code} value={city.code}>
            {city.name}
        </option>
    ))}
</select>

District Select
<select
    {...register("district", { required: "Vui lÃ²ng chá»n quáº­n/huyá»‡n" })}
    value={selectedDistrict}
    onChange={(e) => {
        setSelectedDistrict(e.target.value);
        setSelectedWard("");
    }}
    disabled={!selectedCity}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n quáº­n/huyá»‡n</option>

    {getDistrictsByCity(selectedCity).map((district) => (
        <option key={district.code} value={district.code}>
            {district.name}
        </option>
    ))}
</select>

Ward Select
<select
    {...register("ward", { required: "Vui lÃ²ng chá»n phÆ°á»ng/xÃ£" })}
    value={selectedWard}
    onChange={(e) => setSelectedWard(e.target.value)}
    disabled={!selectedDistrict}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n phÆ°á»ng/xÃ£</option>

    {getWardsByDistrict(selectedCity, selectedDistrict).map((ward) => (
        <option key={ward.code} value={ward.code}>
            {ward.name}
        </option>
    ))}
</select>

ğŸ¯ Khi submit form, báº¡n tráº£ vá» dáº¡ng Ä‘áº§y Ä‘á»§:
const onFormSubmit = (data) => {
    const city = addressData.find(c => c.code === Number(data.city));
    const district = getDistrictsByCity(data.city).find(d => d.code === Number(data.district));
    const ward = getWardsByDistrict(data.city, data.district).find(w => w.code === Number(data.ward));

    const fullAddress =
        `${data.addressDetail}, ${ward.name}, ${district.name}, ${city.name}`;

    onSubmit({ ...data, fullAddress });
};

âœ… Káº¿t quáº£:

Báº¡n sáº½ cÃ³:

âœ” Danh sÃ¡ch tá»‰nh/thÃ nh tháº­t
âœ” Danh sÃ¡ch quáº­n/huyá»‡n tháº­t
âœ” Danh sÃ¡ch phÆ°á»ng/xÃ£ tháº­t
âœ” KhÃ´ng cáº§n self-code addressData ná»¯a
âœ” Dá»¯ liá»‡u tá»± Ä‘á»™ng cáº­p nháº­t khi API update
 --------------------------------------------------------------
 
 addressSelector +++++
 
 DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch cá»±c chi tiáº¿t, dá»… hiá»ƒu táº¡i sao trong Ä‘oáº¡n code nÃ y:

React.useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, [forceOpen]);


láº¡i cÃ³ [forceOpen] thay vÃ¬ [] nhÆ° nhá»¯ng useEffect khÃ¡c.

âœ… 1. TrÆ°á»›c tiÃªn: hai dáº¡ng useEffect khÃ¡c nhau
ğŸ”¹ useEffect([]) â€” chá»‰ cháº¡y 1 láº§n duy nháº¥t

VÃ­ dá»¥:

React.useEffect(() => {
  fetchData();
}, []);


â†’ Cháº¡y má»™t láº§n duy nháº¥t khi component vá»«a render, giá»‘ng nhÆ° componentDidMount.

ğŸ”¹ useEffect([forceOpen]) â€” cháº¡y má»—i khi giÃ¡ trá»‹ forceOpen thay Ä‘á»•i

Tá»©c lÃ  nÃ³ cháº¡y trong cÃ¡c trÆ°á»ng há»£p:

â–ª Láº§n Ä‘áº§u component render
â–ª Khi props forceOpen thay Ä‘á»•i do parent component truyá»n xuá»‘ng

â†’ vÃ  chá»‰ cháº¡y khi forceOpen thay Ä‘á»•i, khÃ´ng cháº¡y khi cÃ¡c state khÃ¡c update.

âœ… 2. Táº¡i sao Ä‘oáº¡n code nÃ y pháº£i dÃ¹ng [forceOpen]?

Báº¡n cÃ³ props:

const AddressSelector = ({ onLoginClick, forceOpen = false, onClose })


ğŸ‘‰ nghÄ©a lÃ  component cha cÃ³ thá»ƒ Ä‘iá»u khiá»ƒn â€œmá»Ÿ Modal hay khÃ´ngâ€.

VÃ­ dá»¥:

<AddressSelector forceOpen={isOpening} />


Khi giÃ¡ trá»‹ isOpening Ä‘á»•i tá»« false â†’ true, báº¡n muá»‘n Modal tá»± Ä‘á»™ng báº­t lÃªn.

Muá»‘n lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y, useEffect pháº£i láº¯ng nghe sá»± thay Ä‘á»•i cá»§a forceOpen.

âš ï¸ Náº¿u báº¡n Ä‘á»ƒ máº£ng dependency []:

useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, []); 


â†’ Effect chá»‰ cháº¡y má»™t láº§n khi component mount
â†’ forceOpen thay Ä‘á»•i sau nÃ y sáº½ khÃ´ng cháº¡y láº¡i, Modal sáº½ khÃ´ng má»Ÿ.

ğŸ’¥ NhÆ° váº­y lÃ  sai logic.

ğŸ‘‰ 3. Váº­y Ä‘oáº¡n nÃ y hoáº¡t Ä‘á»™ng nhÆ° sau:
React.useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, [forceOpen]);

ğŸ”¹ Khi forceOpen === false

â†’ Effect khÃ´ng lÃ m gÃ¬.

ğŸ”¹ Khi forceOpen Ä‘á»•i thÃ nh true

â†’ Effect cháº¡y â†’ má»Ÿ Modal:

setShowLocationModal(true);

ğŸ”¹ Khi forceOpen Ä‘á»•i láº¡i thÃ nh false

â†’ Effect cháº¡y láº¡i, nhÆ°ng Ä‘iá»u kiá»‡n khÃ´ng thá»a â†’ modal giá»¯ nguyÃªn hoáº·c do logic cha quyáº¿t Ä‘á»‹nh.

ğŸ‘ 4. Khi nÃ o cáº§n dÃ¹ng dependency?
Má»¥c Ä‘Ã­ch	Dependency
Chá»‰ cháº¡y 1 láº§n	[]
Cháº¡y khi state/props nÃ o Ä‘Ã³ thay Ä‘á»•i	[propA, stateB, â€¦]
Cháº¡y má»—i láº§n re-render	KHÃ”NG Ä‘á»ƒ dependency

á» Ä‘Ã¢y forceOpen do component cha Ä‘iá»u khiá»ƒn, nÃªn ta pháº£i theo dÃµi nÃ³ báº±ng [forceOpen].

ğŸ¯ 5. Má»™t vÃ­ dá»¥ trá»±c quan

Parent:

function Header() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <button onClick={() => setOpen(true)}>Chá»n Ä‘á»‹a chá»‰</button>
      <AddressSelector forceOpen={open} />
    </>
  );
}


â†’ Má»—i khi setOpen(true)
â†’ forceOpen trong child = true
â†’ Effect cháº¡y â†’ má»Ÿ modal.

Náº¿u khÃ´ng cÃ³ [forceOpen] â†’ modal sáº½ KHÃ”NG bao giá» má»Ÿ theo hÃ nh vi cá»§a parent.

âœ” Káº¾T LUáº¬N

Báº¡n báº¯t buá»™c pháº£i dÃ¹ng [forceOpen] vÃ¬:

âœ“ forceOpen lÃ  props thay Ä‘á»•i theo ngoáº¡i cáº£nh
âœ“ báº¡n cáº§n component tá»± pháº£n á»©ng má»—i khi forceOpen Ä‘á»•i
âœ“ náº¿u Ä‘á»ƒ [], effect chá»‰ cháº¡y 1 láº§n vÃ  logic â€œbáº­t modal tá»« bÃªn ngoÃ iâ€ sáº½ bá»‹ lá»—i
 
 ===================================================================
Má»™t ref Ä‘Æ°á»£c táº¡o khi component Ä‘Ã£ mount. ref Ä‘Æ°á»£c gÃ¡n cho má»™t element, muá»‘n truyá»n ref thÃ´ng qua component thÃ¬ dÃ¹ng forwardRef.
Ref cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truy cáº­p Ä‘áº¿n DOM node hoáº·c React element. NgoÃ i ra cÃ²n dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c biáº¿n cÃ³ thá»ƒ mutate mÃ  khÃ´ng lÃ m re-render component. 
 "Mutate" trong React cÃ³ nghÄ©a lÃ  biáº¿n Ä‘á»•i trá»±c tiáº¿p má»™t Ä‘á»‘i tÆ°á»£ng hoáº·c máº£ng (thay vÃ¬ táº¡o má»™t báº£n sao má»›i). Máº·c dÃ¹ JavaScript cho phÃ©p "mutate", nhÆ°ng trong React, báº¡n nÃªn trÃ¡nh lÃ m Ä‘iá»u nÃ y trá»±c tiáº¿p vá»›i state Ä‘á»ƒ ngÄƒn cháº·n cÃ¡c lá»—i tiá»m áº©n, thay vÃ o Ä‘Ã³, hÃ£y luÃ´n táº¡o ra má»™t báº£n sao má»›i vÃ  cáº­p nháº­t state báº±ng báº£n sao Ä‘Ã³. KhÃ¡i niá»‡m "mutate" cÅ©ng xuáº¥t hiá»‡n trong ngá»¯ cáº£nh khÃ¡c, vÃ­ dá»¥ nhÆ° trong cÃ¡c thÆ° viá»‡n fetching dá»¯ liá»‡u nhÆ° SWR, nÆ¡i hÃ m mutate() Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ xÃ¡c thá»±c láº¡i dá»¯ liá»‡u mÃ  khÃ´ng cáº§n render láº¡i giao diá»‡n. 
 
 {totalPages > 1 && currentPage > 1 && (
              <PrevArrow onClick={handlePrevPage} />
            )}
 
 
{totalPages > 1 && currentPage < totalPages && (
              <NextArrow onClick={handleNextPage} />
            )} 
 
 

			
			
 
giáº£i thÃ­ch khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i , vÃ  táº¡i sao khÃ´ng dÃ¹ng useState 

1. Khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i?

useRef táº¡o ra má»™t object cá»‘ Ä‘á»‹nh, cÃ³ dáº¡ng:

const searchRef = useRef(null);

NÃ³ táº¡o ra object:

{ current: null }

GiÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i khi:
ğŸ‘‰ React gáº¯n element DOM vÃ o ref

Khi component render xong, React sáº½ gÃ¡n:

searchRef.current = <div className="search" ... >


=> Tá»©c lÃ  current sáº½ chá»©a DOM node cá»§a pháº§n tá»­ <div className="search">.

useRef() tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thuá»™c tÃ­nh current cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ mÃ  khÃ´ng lÃ m re-render component. Trong Ä‘oáº¡n code nÃ y, searchRef Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ tham chiáº¿u Ä‘áº¿n pháº§n tá»­ DOM <div className="search">. Khi component Ä‘Æ°á»£c render, thuá»™c tÃ­nh searchRef.current sáº½ trá» tá»›i pháº§n tá»­ <div> nÃ y, vÃ  sau Ä‘Ã³, useRef Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ kiá»ƒm tra xem ngÆ°á»i dÃ¹ng cÃ³ nháº¥p chuá»™t bÃªn ngoÃ i pháº§n tá»­ nÃ y hay khÃ´ng trong hook useEffect. 
current lÃ  gÃ¬?
current lÃ  thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng do useRef() tráº£ vá», lÆ°u giá»¯ má»™t giÃ¡ trá»‹ báº¥t ká»³.
Trong trÆ°á»ng há»£p nÃ y, nÃ³ trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng DOM cá»§a pháº§n tá»­ Ä‘Æ°á»£c gáº¯n ref.
GiÃ¡ trá»‹ cá»§a current Ä‘Æ°á»£c duy trÃ¬ qua cÃ¡c láº§n render vÃ  thay Ä‘á»•i nÃ³ khÃ´ng kÃ­ch hoáº¡t re-render. 
CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a useRef trong Ä‘oáº¡n code
Khá»Ÿi táº¡o (const searchRef = useRef(null);)
useRef() Ä‘Æ°á»£c gá»i vá»›i null lÃ m giÃ¡ trá»‹ ban Ä‘áº§u.
NÃ³ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ dáº¡ng { current: null } vÃ  Ä‘Æ°á»£c gÃ¡n cho biáº¿n searchRef.
Äá»‘i tÆ°á»£ng nÃ y sáº½ tá»“n táº¡i trong suá»‘t vÃ²ng Ä‘á»i cá»§a component.
Gáº¯n vá»›i pháº§n tá»­ DOM (ref={searchRef})
Khi React render pháº§n tá»­ <div className="search">, nÃ³ sáº½ tá»± Ä‘á»™ng Ä‘áº·t tham chiáº¿u Ä‘áº¿n pháº§n tá»­ DOM Ä‘Ã³ vÃ o searchRef.current.
Sau bÆ°á»›c nÃ y, searchRef.current sáº½ khÃ´ng cÃ²n lÃ  null ná»¯a mÃ  trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng div DOM.

Náº¿u báº¡n console.log trong render, giÃ¡ trá»‹ ban Ä‘áº§u lÃ  null â†’ sau khi render xong, React má»›i gÃ¡n vÃ o.

useRef(null) Ä‘Æ°á»£c khá»Ÿi táº¡o vá»›i giÃ¡ trá»‹ null lÃ  Ä‘á»ƒ trá» Ä‘áº¿n má»™t pháº§n tá»­ DOM mÃ  sáº½ Ä‘Æ°á»£c gÃ¡n sau khi component Ä‘Æ°á»£c render. Khi component render láº§n Ä‘áº§u, pháº§n tá»­ DOM chÆ°a tá»“n táº¡i, vÃ¬ váº­y nÃ³ khá»Ÿi táº¡o searchRef.current lÃ  null. Khi component mount, useEffect sáº½ thá»±c thi vÃ  gÃ¡n pháº§n tá»­ DOM thá»±c táº¿ (vÃ­ dá»¥: <div ref={searchRef}>) cho searchRef.current, sau Ä‘Ã³ handleClickOutside sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ nÃ y Ä‘á»ƒ kiá»ƒm tra.
Khá»Ÿi táº¡o: Khi báº¡n sá»­ dá»¥ng useRef(null), báº¡n Ä‘ang táº¡o ra má»™t object cÃ³ thuá»™c tÃ­nh current vá»›i giÃ¡ trá»‹ ban Ä‘áº§u lÃ  null.
TÃ¡i sá»­ dá»¥ng trong useEffect: Trong useEffect, báº¡n muá»‘n láº¯ng nghe sá»± kiá»‡n click bÃªn ngoÃ i má»™t pháº§n tá»­ nÃ o Ä‘Ã³.
Thá»±c hiá»‡n trÆ°á»›c khi render: HÃ m xá»­ lÃ½ sá»± kiá»‡n Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong useEffect. Tuy nhiÃªn, searchRef.current váº«n lÃ  null trong láº§n render Ä‘áº§u tiÃªn, vÃ¬ pháº§n tá»­ DOM mÃ  nÃ³ tham chiáº¿u chÆ°a Ä‘Æ°á»£c táº¡o ra.
Láº¯ng nghe sá»± kiá»‡n: document.addEventListener("mousedown", handleClickOutside) sáº½ Ä‘Æ°á»£c cháº¡y sau khi component Ä‘Æ°á»£c render, lÃºc nÃ y searchRef.current váº«n lÃ  null.
GÃ¡n giÃ¡ trá»‹ sau khi render: Khi báº¡n cÃ³ má»™t pháº§n tá»­ JSX nhÆ° <div ref={searchRef}>, React sáº½ tá»± Ä‘á»™ng gÃ¡n pháº§n tá»­ DOM Ä‘Ã³ cho searchRef.current sau khi render xong.
Sá»­ dá»¥ng: Khi sá»± kiá»‡n mousedown xáº£y ra, handleClickOutside sáº½ Ä‘Æ°á»£c gá»i. Táº¡i thá»i Ä‘iá»ƒm nÃ y, searchRef.current Ä‘Ã£ cÃ³ giÃ¡ trá»‹ lÃ  pháº§n tá»­ DOM, cho phÃ©p báº¡n kiá»ƒm tra xem sá»± kiá»‡n click cÃ³ xáº£y ra bÃªn trong hay khÃ´ng.


ğŸ‘‰ Báº¡n thay Ä‘á»•i thá»§ cÃ´ng

Báº¡n cÃ³ thá»ƒ chá»‰nh:

searchRef.current = 123;


NhÆ°ng React sáº½ khÃ´ng trigger re-render.

â— Quan trá»ng:
useRef khÃ´ng gÃ¢y re-render khi thay Ä‘á»•i â†’ Ä‘Ã¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t lá»›n nháº¥t vá»›i useState.
âœ… 2. Táº¡i sao trong Ä‘oáº¡n code nÃ y pháº£i dÃ¹ng useRef thay vÃ¬ useState?

 Táº¡i sao dÃ¹ng useRef mÃ  khÃ´ng dÃ¹ng useState?
ChÃºng ta dÃ¹ng useRef á»Ÿ Ä‘Ã¢y vÃ¬ má»¥c Ä‘Ã­ch lÃ  "Truy cáº­p trá»±c tiáº¿p vÃ o pháº§n tá»­ DOM" Ä‘á»ƒ kiá»ƒm tra vá»‹ trÃ­ click chuá»™t, chá»© khÃ´ng pháº£i Ä‘á»ƒ lÆ°u dá»¯ liá»‡u hiá»ƒn thá»‹.

Äáº·c Ä‘iá»ƒm	useState	useRef
Khi giÃ¡ trá»‹ thay Ä‘á»•i	GÃ¢y ra render láº¡i (Re-render) component.	KHÃ”NG gÃ¢y ra render láº¡i component.
Má»¥c Ä‘Ã­ch chÃ­nh	LÆ°u dá»¯ liá»‡u áº£nh hÆ°á»Ÿng Ä‘áº¿n giao diá»‡n (vÃ­ dá»¥: text Ä‘ang gÃµ, tráº¡ng thÃ¡i áº©n/hiá»‡n dropdown).	LÆ°u tham chiáº¿u Ä‘áº¿n DOM hoáº·c cÃ¡c giÃ¡ trá»‹ "ngáº§m" khÃ´ng cáº§n hiá»ƒn thá»‹ ngay.
Trong trÆ°á»ng há»£p nÃ y	Náº¿u dÃ¹ng useState Ä‘á»ƒ lÆ°u cÃ¡i tháº» div, má»—i láº§n React gÃ¡n tháº» div vÃ o state, component sáº½ bá»‹ render láº¡i má»™t láº§n ná»¯a -> Thá»«a thÃ£i vÃ  giáº£m hiá»‡u nÄƒng.	DÃ¹ng useRef lÃ  chuáº©n nháº¥t vÃ¬ ta chá»‰ cáº§n "nhá»›" cÃ¡i tháº» div Ä‘Ã³ náº±m á»Ÿ Ä‘Ã¢u Ä‘á»ƒ so sÃ¡nh xem ngÆ°á»i dÃ¹ng cÃ³ click ra ngoÃ i nÃ³ hay khÃ´ng.
TÃ³m láº¡i:

DÃ¹ng useState khi muá»‘n thay Ä‘á»•i giao diá»‡n.
DÃ¹ng useRef khi muá»‘n thao tÃ¡c vá»›i DOM hoáº·c lÆ°u biáº¿n mÃ  khÃ´ng cáº§n váº½ láº¡i giao diá»‡n.

Trong Ä‘oáº¡n code:

const searchRef = useRef(null);

Báº¡n dÃ¹ng ref Ä‘á»ƒ:

â¤ Láº¥y DOM element cá»§a search box:
if (searchRef.current && !searchRef.current.contains(event.target)) {
    setShowDropdown(false);
}


Báº¡n cáº§n kiá»ƒm tra xem ngÆ°á»i dÃ¹ng click ra ngoÃ i search box hay khÃ´ng.

ğŸ§  VÃ¬ sao khÃ´ng dÃ¹ng useState?
âŒ useState khÃ´ng chá»©a DOM element

State chá»‰ chá»©a dá»¯ liá»‡u Ä‘á»ƒ render UI, khÃ´ng chá»©a Ä‘Æ°á»£c:

DOM node

object khÃ´ng serializable

Báº¡n khÃ´ng thá»ƒ viáº¿t:

const [searchRef, setSearchRef] = useState(null);


Rá»“i gÃ¡n:

<div ref={setSearchRef}>


â†’ Vá» lÃ½ thuyáº¿t cÃ³ thá»ƒ lÃ m, nhÆ°ng nÃ³ sáº½ gÃ¢y re-render má»—i láº§n ref thay Ä‘á»•i, Ä‘iá»u nÃ y khÃ´ng cáº§n thiáº¿t vÃ  gÃ¢y lá»—i.

âš  VÃ¬ sao dÃ¹ng useState á»Ÿ Ä‘Ã¢y lÃ  sai?

DOM node khÃ´ng nÃªn Ä‘i qua bá»™ render cá»§a React
React khÃ´ng designed Ä‘á»ƒ state chá»©a cÃ¡c DOM element.

Náº¿u dÃ¹ng state, má»—i láº§n ref cáº­p nháº­t â†’ component re-render â†’ React láº¡i gÃ¡n ref â†’ re-render â†’ loop
GÃ¢y re-render thá»«a hoáº·c loop vÃ´ háº¡n.

useRef giá»¯ giÃ¡ trá»‹ á»•n Ä‘á»‹nh qua má»—i láº§n render, trong khi state thÃ¬ khÃ´ng.

ğŸ§© TÃ³m láº¡i:
So sÃ¡nh	useRef	useState
Thay Ä‘á»•i cÃ³ gÃ¢y re-render?	âŒ KhÃ´ng	âœ… CÃ³
LÆ°u DOM element?	âœ… CÃ³	âŒ KhÃ´ng nÃªn
DÃ¹ng Ä‘á»ƒ Ä‘á»c/ghi giÃ¡ trá»‹ tá»©c thá»i?	âœ… CÃ³	âŒ KhÃ´ng (asynchronous)
DÃ¹ng Ä‘á»ƒ lÃ m UI cáº­p nháº­t?	âŒ KhÃ´ng	âœ… CÃ³
ğŸ‰ Káº¿t luáº­n
Báº¡n báº¯t buá»™c dÃ¹ng useRef cho trÆ°á»ng há»£p:

âœ” muá»‘n láº¥y pháº§n tá»­ DOM
âœ” muá»‘n lÆ°u giÃ¡ trá»‹ khÃ´ng cáº§n render láº¡i
âœ” muá»‘n dÃ¹ng trong event listener (click outside)

Náº¿u dÃ¹ng useState thÃ¬:

KhÃ´ng chá»©a Ä‘Æ°á»£c DOM

Má»—i thay Ä‘á»•i gÃ¢y re-render khÃ´ng cáº§n thiáº¿t

CÃ³ thá»ƒ gÃ¢y bug click-outside
-----------------------------------------------
phÃ¢n biá»‡t 2 key trong code nÃ y vÃ  cÃ¡c key nÃ y Ä‘á»ƒ lÃ m gÃ¬ <div className="deals-grid-wrapper" style={{ position: 'relative' }}>
        <PrevArrow onClick={handlePrev} />
        <div className={`deals-grid slide-${direction}`} key={currentPage}>
          {deals.map((deal) => (
            <Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

              <div className="deal-image-wrapper">
                <img src={deal.image} alt={deal.title} className="deal-image" />

                <span className="discount-tag">{deal.date}</span>

                {deal.imageBadges && (
                  <img src={deal.imageBadges} alt="Badge" className="mini-badge" />
                )}

              </div>



1. Hai key trong component cá»§a báº¡n lÃ :
âœ… Key 1 â€” dÃ¹ng cho grid
<div className={`deals-grid slide-${direction}`} key={currentPage}>

âœ… Key 2 â€” dÃ¹ng cho tá»«ng item
<Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

Hai key nÃ y phá»¥c vá»¥ 2 má»¥c Ä‘Ã­ch hoÃ n toÃ n khÃ¡c nhau.

ğŸ§© 2. Key cá»§a deals-grid (key = currentPage)
â— Key nÃ y dÃ¹ng Ä‘á»ƒ Ã©p React re-create láº¡i toÃ n bá»™ grid khi trang thay Ä‘á»•i.

á» Ä‘Ã¢y key={currentPage} lÃ m React hiá»ƒu ráº±ng:

"Má»—i khi currentPage Ä‘á»•i â†’ component nÃ y lÃ  má»™t component hoÃ n toÃ n má»›i â†’ pháº£i unmount + mount láº¡i."

Trong React, "mount" lÃ  quÃ¡ trÃ¬nh thÃªm má»™t component vÃ o DOM (thÃ´ng qua hÃ m render), cÃ²n "unmount" lÃ  quÃ¡ trÃ¬nh gá»¡ bá» component Ä‘Ã³ khá»i DOM. Giai Ä‘oáº¡n mount lÃ  khi component láº§n Ä‘áº§u tiÃªn Ä‘Æ°á»£c hiá»ƒn thá»‹, cÃ²n unmount lÃ  khi nÃ³ bá»‹ xÃ³a khá»i mÃ n hÃ¬nh. 

Äiá»u nÃ y cá»±c ká»³ quan trá»ng náº¿u báº¡n Ä‘ang dÃ¹ng hiá»‡u á»©ng slide CSS (slide-left / slide-right).

1. key={currentPage} (á» tháº» div cha)
Má»¥c Ä‘Ã­ch: KÃ­ch hoáº¡t láº¡i Animation (Hiá»‡u á»©ng chuyá»ƒn trang).
Giáº£i thÃ­ch:
Trong React, khi key cá»§a má»™t component thay Ä‘á»•i, React sáº½ coi Ä‘Ã³ lÃ  má»™t component hoÃ n toÃ n má»›i. NÃ³ sáº½ há»§y bá» (unmount) cÃ¡i cÅ© vÃ  váº½ láº¡i (mount) cÃ¡i má»›i tá»« Ä‘áº§u.
á» Ä‘Ã¢y, khi báº¡n báº¥m nÃºt chuyá»ƒn trang (currentPage thay Ä‘á»•i), React sáº½ xÃ³a háº³n cÃ¡i div cÅ© Ä‘i vÃ  táº¡o má»™t cÃ¡i div má»›i.
Viá»‡c nÃ y giÃºp cÃ¡c hiá»‡u á»©ng CSS (nhÆ° slide-next, slide-prev) Ä‘Æ°á»£c cháº¡y láº¡i tá»« Ä‘áº§u. Náº¿u khÃ´ng Ä‘á»•i key, React chá»‰ cáº­p nháº­t ná»™i dung bÃªn trong thÃ´i nÃªn hiá»‡u á»©ng trÆ°á»£t cÃ³ thá»ƒ sáº½ khÃ´ng cháº¡y.

2. key={deal.id} (á» tháº» Link con)
Má»¥c Ä‘Ã­ch: Äá»‹nh danh pháº§n tá»­ trong danh sÃ¡ch (Hiá»‡u nÄƒng & Logic).
Giáº£i thÃ­ch:
ÄÃ¢y lÃ  yÃªu cáº§u báº¯t buá»™c cá»§a React khi báº¡n dÃ¹ng hÃ m .map() Ä‘á»ƒ in ra má»™t danh sÃ¡ch.
NÃ³ giÃºp React biáº¿t chÃ­nh xÃ¡c sáº£n pháº©m nÃ o lÃ  sáº£n pháº©m nÃ o.
VÃ­ dá»¥: Náº¿u danh sÃ¡ch sáº£n pháº©m thay Ä‘á»•i thá»© tá»±, React dá»±a vÃ o key nÃ y Ä‘á»ƒ chá»‰ sáº¯p xáº¿p láº¡i cÃ¡c tháº» Link cÃ³ sáºµn thay vÃ¬ pháº£i xÃ³a Ä‘i váº½ láº¡i toÃ n bá»™, giÃºp trang web cháº¡y mÆ°á»£t hÆ¡n.

Náº¿u khÃ´ng cÃ³ key={currentPage}, váº¥n Ä‘á» xáº£y ra:

React chá»‰ update láº¡i danh sÃ¡ch item

NhÆ°ng khÃ´ng trigger re-render hoÃ n toÃ n

â†’ animation slide cÃ³ thá»ƒ khÃ´ng cháº¡y hoáº·c cháº¡y lá»—i

â†’ React sáº½ chá»‰ cáº­p nháº­t pháº§n tá»­ bÃªn trong, khÃ´ng reset animation

VÃ¬ sao key hoáº¡t Ä‘á»™ng?

Khi key khÃ¡c nhau:

React behavior:

old key: 0 â†’ new key: 1  
=> React unmount deals-grid cÅ©  
=> React mount deals-grid má»›i  
=> CSS animation cháº¡y láº¡i chuáº©n

ğŸ§© 3. Key cho tá»«ng deal item (key = deal.id)

DÃ¹ng khi render list:

{deals.map((deal) => (
  <Link key={deal.id}>

Má»¥c Ä‘Ã­ch:

GiÃºp React nháº­n biáº¿t tá»«ng pháº§n tá»­ trong danh sÃ¡ch Ä‘á»ƒ tá»‘i Æ°u diffing.

Khi dá»¯ liá»‡u thay Ä‘á»•i React sáº½ biáº¿t:

item nÃ o giá»¯ nguyÃªn

item nÃ o thay Ä‘á»•i

item nÃ o cáº§n thÃªm/xoÃ¡

Náº¿u khÃ´ng cÃ³ key â†’ React sáº½:

cáº£nh bÃ¡o

render sai item

gÃ¢y lá»—i animation / lá»—i state bÃªn trong má»—i item

ğŸ“Œ TÃ³m táº¯t sá»± khÃ¡c nhau
Key	Má»¥c Ä‘Ã­ch	Placement	CÃ¡ch hoáº¡t Ä‘á»™ng
key={currentPage}	Reset toÃ n bá»™ grid khi Ä‘á»•i trang â†’ cho hiá»‡u á»©ng slide	TrÃªn <div className="deals-grid">	Má»—i trang lÃ  1 component má»›i
key={deal.id}	GiÃºp React nháº­n biáº¿t item trong máº£ng, tá»‘i Æ°u render	Trong .map()	Giá»¯ item á»•n Ä‘á»‹nh, trÃ¡nh render lá»—i
ğŸ¯ VÃ­ dá»¥ dá»… hiá»ƒu
â¤ Key cho grid

Giá»‘ng nhÆ° thay toÃ n bá»™ trang â†’ cáº§n "láº­t sang trang khÃ¡c"

â¤ Key cho item

Giá»‘ng nhÆ° Ä‘Ã¡nh sá»‘ gháº¿ â†’ React biáº¿t gháº¿ nÃ o thay Ä‘á»•i, gháº¿ nÃ o giá»¯ nguyÃªn.

Äá»‹nh nghÄ©a Key trong React lÃ  gÃ¬?

Key lÃ  má»™t â€œÄ‘á»‹nh danh duy nháº¥tâ€ mÃ  React dÃ¹ng Ä‘á»ƒ nháº­n biáº¿t tá»«ng pháº§n tá»­ trong danh sÃ¡ch hoáº·c tá»«ng phiÃªn báº£n cá»§a má»™t component.

NÃ³i cÃ¡ch khÃ¡c:

Key giÃºp React biáº¿t pháº§n tá»­ nÃ o giá»¯ nguyÃªn, pháº§n tá»­ nÃ o thay Ä‘á»•i, pháº§n tá»­ nÃ o bá»‹ xoÃ¡ hay cáº§n táº¡o má»›i.

ğŸ§  Táº¡i sao React cáº§n key?

React khÃ´ng so sÃ¡nh UI theo tá»«ng pháº§n tá»­ HTML, mÃ  so sÃ¡nh theo tree (cÃ¢y).

Khi danh sÃ¡ch thay Ä‘á»•i, React cáº§n biáº¿t:

Item nÃ o lÃ  item cÅ©

Item nÃ o má»›i xuáº¥t hiá»‡n

Item nÃ o máº¥t Ä‘i

â¡ï¸ Náº¿u khÃ´ng cÃ³ key, React khÃ´ng biáº¿t Ä‘Ã¢u lÃ  Ä‘Ã¢u â†’ dá»… render sai.

ğŸ“Œ VÃ­ dá»¥ cá»±c dá»… hiá»ƒu

Giáº£ sá»­ báº¡n cÃ³ 3 item:

A, B, C


VÃ  báº¡n thÃªm item â€œXâ€ vÃ o Ä‘áº§u:

X, A, B, C

ğŸ”¹ Náº¿u cÃ³ key (unique):

Thá»© tá»± thay Ä‘á»•i nhÆ°ng React biáº¿t:

A váº«n lÃ  A

B váº«n lÃ  B

C váº«n lÃ  C

X lÃ  pháº§n tá»­ má»›i

â¡ï¸ React chá»‰ thÃªm â€œXâ€.

ğŸ”¹ Náº¿u khÃ´ng cÃ³ key:

React khÃ´ng biáº¿t Ä‘Ã¢u lÃ  Ä‘Ã¢u â†’ nÃ³ Ä‘oÃ¡n:

X lÃ  A

A lÃ  B

B lÃ  C

C biáº¿n máº¥t

â¡ï¸ CÃ¡c component con cÃ³ state sáº½ bá»‹ láº«n, UI nháº£y loáº¡n.

ğŸ¯ Khi nÃ o key Ä‘Æ°á»£c React dÃ¹ng?

React dÃ¹ng key Ä‘á»ƒ:

1ï¸âƒ£ So khá»›p (reconcile) danh sÃ¡ch .map()
items.map(item => <div key={item.id}>{item.name}</div>)

2ï¸âƒ£ Ã‰p unmount + remount component (reset hoÃ n toÃ n)
<div key={currentPage}> ... </div>

3ï¸âƒ£ Quáº£n lÃ½ animation vÃ  transition
4ï¸âƒ£ Giá»¯ state á»•n Ä‘á»‹nh trong tá»«ng item
ğŸ“Œ Key pháº£i thoáº£ Ä‘iá»u kiá»‡n gÃ¬?
Thuá»™c tÃ­nh	YÃªu cáº§u
unique	Trong cÃ¹ng 1 danh sÃ¡ch pháº£i khÃ¡c nhau
stable	KhÃ´ng Ä‘Æ°á»£c thay Ä‘á»•i giá»¯a cÃ¡c láº§n render
predictable	KhÃ´ng dÃ¹ng sá»‘ index náº¿u danh sÃ¡ch thay Ä‘á»•i thá»© tá»±
ğŸš« Lá»—i phá»• biáº¿n: DÃ¹ng index lÃ m key
key={index}


â†’ KhÃ´ng nÃªn dÃ¹ng náº¿u danh sÃ¡ch cÃ³ thÃªm/xoÃ¡/sáº¯p xáº¿p láº¡i.

ğŸ§© Äá»‹nh nghÄ©a Ä‘áº§y Ä‘á»§, chuáº©n React:

Key lÃ  thuá»™c tÃ­nh Ä‘áº·c biá»‡t giÃºp React xÃ¡c Ä‘á»‹nh xem má»™t element trong danh sÃ¡ch cÃ³ thay Ä‘á»•i giá»¯a cÃ¡c láº§n render hay khÃ´ng, tá»« Ä‘Ã³ tá»‘i Æ°u quÃ¡ trÃ¬nh diffing vÃ  rendering.



ghi nhá»› ----------------------------------------------------------------------

Trong Redux Toolkit, state lÃ  dá»¯ liá»‡u táº­p trung, Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t kho chung gá»i lÃ  Store, quáº£n lÃ½ tráº¡ng thÃ¡i tá»•ng thá»ƒ cá»§a á»©ng dá»¥ng. Redux Toolkit giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ state báº±ng cÃ¡ch cung cáº¥p cÃ¡c hÃ m tiá»‡n Ã­ch nhÆ° createSlice Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o ra cÃ¡c action vÃ  reducer, configureStore Ä‘á»ƒ thiáº¿t láº­p store, vÃ  createAsyncThunk Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™. 
CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a state trong Redux Toolkit
Store: Chá»©a táº¥t cáº£ state cá»§a á»©ng dá»¥ng trong má»™t Ä‘á»‘i tÆ°á»£ng duy nháº¥t.
Reducer: Má»™t hÃ m nháº­n vÃ o state hiá»‡n táº¡i vÃ  má»™t action, sau Ä‘Ã³ tráº£ vá» má»™t state má»›i. Redux Toolkit Ä‘Æ¡n giáº£n hÃ³a viá»‡c táº¡o reducer báº±ng cÃ¡ch sá»­ dá»¥ng createSlice, nÃ³ sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c reducer vÃ  action creator dá»±a trÃªn má»™t "slice" (má»™t pháº§n) cá»§a state.
Action: Má»™t Ä‘á»‘i tÆ°á»£ng mÃ´ táº£ nhá»¯ng gÃ¬ Ä‘Ã£ xáº£y ra, vÃ­ dá»¥: { type: 'todos/addTodo', payload: { text: 'Learn Redux' } }. createSlice tá»± Ä‘á»™ng táº¡o ra cÃ¡c action creator cho báº¡n.
LÆ°u trá»¯ dá»¯ liá»‡u: Dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u trá»¯ trong store báº±ng cÃ¡c reducer, vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p bá»Ÿi cÃ¡c component thÃ´ng qua cÃ¡c hook cá»§a React Redux hoáº·c API khÃ¡c.
Redux Toolkit: LÃ  cÃ¡ch tiáº¿p cáº­n chÃ­nh thá»©c Ä‘Æ°á»£c khuyáº¿n khÃ­ch Ä‘á»ƒ quáº£n lÃ½ state. NÃ³ bao bá»c lÃµi Redux vÃ  cung cáº¥p cÃ¡c chá»©c nÄƒng giÃºp viá»‡c viáº¿t code Redux trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n, trÃ¡nh cÃ¡c lá»—i phá»• biáº¿n.
Xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™: createAsyncThunk giÃºp xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ má»™t cÃ¡ch Ä‘Æ¡n giáº£n báº±ng cÃ¡ch tá»± Ä‘á»™ng dispatch cÃ¡c action táº¡i cÃ¡c giai Ä‘oáº¡n khÃ¡c nhau (khá»Ÿi táº¡o, thÃ nh cÃ´ng, tháº¥t báº¡i). 


ğŸ–± 4. Click ra ngoÃ i thÃ¬ áº©n dropdown
useEffect(() => {
  const handleClickOutside = (event) => {
    if (searchRef.current && !searchRef.current.contains(event.target)) {
      setShowDropdown(false);
    }
  };
  document.addEventListener("mousedown", handleClickOutside);
  return () => document.removeEventListener("mousedown", handleClickOutside);
}, []);


Giáº£i thÃ­ch:

Khi click chuá»™t xuá»‘ng báº¥t ká»³ Ä‘Ã¢u (mousedown),

Náº¿u click khÃ´ng náº±m trong vÃ¹ng searchRef (tá»©c lÃ  ngoÃ i Ã´ tÃ¬m kiáº¿m),

ThÃ¬ setShowDropdown(false) â†’ Ä‘Ã³ng dropdown.

Cuá»‘i cÃ¹ng, hÃ m return dá»n dáº¹p listener khi component bá»‹ unmount.



ğŸ” 6. HÃ m chÃ­nh Ä‘á»ƒ xá»­ lÃ½ tÃ¬m kiáº¿m
const handleSearch = () => {
  if (searchValue.trim()) {
    const newHistory = [searchValue, ...searchHistory.filter(item => item !== searchValue)].slice(0, 5);
    setSearchHistory(newHistory);
    localStorage.setItem("searchHistory", JSON.stringify(newHistory));
    setShowDropdown(false);
    console.log("Searching for:", searchValue);
  }
};


Chá»©c nÄƒng:

Kiá»ƒm tra náº¿u ngÆ°á»i dÃ¹ng Ä‘Ã£ nháº­p (khÃ´ng Ä‘á»ƒ trá»‘ng).

ThÃªm tá»« khÃ³a má»›i vÃ o Ä‘áº§u danh sÃ¡ch.

TrÃ¡nh trÃ¹ng láº·p (filter(item => item !== searchValue)).

Giá»›i háº¡n chá»‰ giá»¯ 5 tá»« khÃ³a gáº§n nháº¥t (slice(0,5)).

LÆ°u láº¡i searchHistory vÃ o localStorage.

áº¨n dropdown.

CÃ³ thá»ƒ gá»i API hoáº·c navigate() Ä‘á»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m tháº­t.



Khi ngÆ°á»i dÃ¹ng nháº¥n Enter trong Ã´ input â†’ cháº¡y handleSearch().




setCurrentPage((prev) => (prev > 0 ? prev - 1 : totalPages - 1));

setCurrentPage((prev) => (prev > 0 ? prev - 1 : totalPages - 1));
Náº¿u prev > 0: tá»©c lÃ  khÃ´ng pháº£i trang Ä‘áº§u tiÃªn, thÃ¬ lÃ¹i láº¡i 1 trang (prev - 1).

Náº¿u prev === 0: tá»©c lÃ  Ä‘ang á»Ÿ trang Ä‘áº§u, thÃ¬ vÃ²ng láº¡i trang cuá»‘i cÃ¹ng (totalPages - 1).

setCurrentPage((prev) => (prev < totalPages - 1 ? prev + 1 : 0));

Náº¿u prev < totalPages - 1: tá»©c lÃ  chÆ°a Ä‘áº¿n trang cuá»‘i, thÃ¬ tiáº¿n thÃªm 1 (prev + 1).

Náº¿u prev === totalPages - 1: tá»©c lÃ  Ä‘ang á»Ÿ trang cuá»‘i, thÃ¬ vÃ²ng láº¡i trang Ä‘áº§u tiÃªn (0).

rating = 4.5
fullStars = Math.floor(4.5) = 4

Math.ceil(4.5) = 5
emptyStars = 5 - 5 = 0





--------git--------

CÃ¡ch kháº¯c phá»¥c: Táº¡o Ã­t nháº¥t má»™t commit
Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:
- ThÃªm file vÃ o staging area:
git add .
- Táº¡o commit Ä‘áº§u tiÃªn:
git commit -m "Initial commit on main branch"
- Äáº©y lÃªn remote:
git push -u xuantran0503 main

git remote add origin https://github.com/xuantran0503/giao_dien_tiki.git



Sau khi lÃ m xong, Git sáº½ nháº­n diá»‡n nhÃ¡nh main vÃ  cho phÃ©p báº¡n Ä‘áº©y lÃªn GitHub.


Náº¿u báº¡n muá»‘n ghi Ä‘Ã¨ hoÃ n toÃ n ná»™i dung trÃªn GitHub báº±ng code local (cáº©n tháº­n vÃ¬ sáº½ máº¥t dá»¯ liá»‡u trÃªn remote), thÃ¬ dÃ¹ng:
git push -u xuantran0503 main --force


âš ï¸ Chá»‰ dÃ¹ng --force náº¿u báº¡n cháº¯c cháº¯n muá»‘n thay tháº¿ toÃ n bá»™ ná»™i dung trÃªn GitHub.


ğŸ”¸ TrÆ°á»ng há»£p báº¡n chá»‰ muá»‘n chuyá»ƒn sang nhÃ¡nh main (náº¿u nÃ³ Ä‘Ã£ cÃ³ sáºµn):

Náº¿u báº¡n chÆ°a cÃ³ nhÃ¡nh main cá»¥c bá»™, hÃ£y táº¡o tá»« remote:

git fetch origin
git checkout main

git branch -M main

