
-----------Lá»—i chÆ°a sá»­a Ä‘Æ°á»£c ----------------------------------------------------

khoáº£ng cÃ¡ch trÃ¡i pháº£i cá»§a 2 áº£nh vá»›i 2 bÃªn  viá»n chÆ°a báº±ng nhau ( bÃªn trÃ¡i 16px , pháº£i 10px)

thÃªm pháº§n Ä‘iá»u chá»‰nh sá»‘ lÆ°á»£ng kÃ­ tá»± Ä‘á»ƒ xuá»‘ng dÃ²ng khi Äá»‹a chá»‰ chi tiáº¿t trong lá»‹ch sá»­ Ä‘Æ¡n hÃ ng quÃ¡ dÃ i  trong lá»‹ch sá»­ Ä‘Æ¡n hÃ ng

lá»—i currentProduct trong chi tiáº¿t sáº£n pháº©m báº±ng null nhÆ°ng váº«n hiá»ƒn  vÃ  khi currentProduct = null thÃ¬ khi f5 thÃ¬ nÃ³ láº¡i cÃ³ dá»¯ liá»‡u Ä‘Ãºng vá»›i giao diá»‡n Ä‘ang hiá»ƒn thá»‹, vÃ  cÃ³ lÃºc dá»¯ liá»‡u  currentProduct khÃ´ng khá»›p vá»›i dá»¯ liá»‡u Ä‘ang hiá»ƒn thá»‹ á»Ÿ giao diá»‡n, nhÆ°ng mÃ  váº«n thÃªm vÃ o giá» hÃ ng Ä‘Æ°á»£c thÃ nh cÃ´ng 

 giáº£i thÃ­ch khi nÃ o dÃ¹ng useEffect vÃ  nÃ³ hoáº¡t Ä‘á»™ng , chu trÃ¬nh vÃ²ng Ä‘á»i render  useEffect

nháº¡c : náº¯ng hoa niÃªn , cÆ¡n mÆ°a kháº½ rÆ¡i, tháº¿ em lÃ m sao , cÆ¡n mÆ°a kháº½ rÆ¡i

+++++++++++++ÄANG LÃ€M ++++++++++++++++++++++++++++++++++++++++++++++++++++++++

code tiáº¿p api giá» hÃ ng vá»›i  cÃ¡c tÆ°Æ¡ng á»©ng action 
thÃªm sáº£n pháº©m vÃ o giá» hÃ ng
post /api-end-user/cart/cart-public/update-item
chi tiáº¿t sáº£n pháº©m  trong giá» hÃ ng
get /api-end-user/cart/cart-public/{id}
xÃ³a tá»«ng sáº£n pháº©m trong giá» hÃ ng 
put /api-end-user/cart/cart-public/remove-item
xÃ³a táº¥t cáº£ sáº£n pháº©m trong giá» hÃ ng
put /api-end-user/cart/cart-public/clear-item
cáº­p nháº­t thÃ´ng tin sáº£n pháº©m trong giá» hÃ ng ( sá»‘ lÆ°á»£ng)
put /api-end-user/cart/cart-public/update-item
=============================================


Sá»± khÃ¡c biá»‡t:
useState
DÃ¹ng Ä‘á»ƒ quáº£n lÃ½ state cá»¥c bá»™ cá»§a 1 component
Khi state thay Ä‘á»•i â†’ chá»‰ component Ä‘Ã³ re-render (vÃ  cÃ¡c component con náº¿u cÃ³)
Má»—i láº§n state thay Ä‘á»•i â†’ hÃ m component cháº¡y láº¡i tá»« Ä‘áº§u
useEffect
DÃ¹ng Ä‘á»ƒ cháº¡y side effects (gá»i API, subscribe, cleanup, v.v.)
KhÃ´ng gÃ¢y re-render trá»±c tiáº¿p
Cháº¡y sau khi component render (phá»¥ thuá»™c vÃ o dependency array)

Giáº£i thÃ­ch chi tiáº¿t trong ProductDetailPage:
1. useEffect láº¥y dá»¯ liá»‡u tá»« Redux:
Táº¡i sao? Fetch dá»¯ liá»‡u lÃ  side effect, pháº£i dÃ¹ng useEffect
Khi nÃ o cháº¡y? Khi component mount hoáº·c productId thay Ä‘á»•i
2. useState lÆ°u dá»¯ liá»‡u cá»¥c bá»™:
Táº¡i sao? Nhá»¯ng state nÃ y chá»‰ cáº§n á»Ÿ component nÃ y (sá»‘ lÆ°á»£ng, thÃ´ng bÃ¡o)
KhÃ´ng cáº§n Redux vÃ¬ khÃ´ng chia sáº» vá»›i component khÃ¡c
3. useEffect cáº­p nháº­t local state tá»« Redux:
Táº¡i sao? Bá»™i sang Redux state (listingProduct) â†’ cáº­p nháº­t local state
GiÃºp tÃ¡ch biá»‡t logic giá»¯a Redux data vÃ  component UI
Re-render hÃ nh vi:
HÃ nh Ä‘á»™ng	Render pháº¡m vi
setQuantity()	âŒ KhÃ´ng re-render cáº£ trang - chá»‰ component nÃ y
setNotification()	âŒ KhÃ´ng re-render cáº£ trang - chá»‰ component nÃ y
Redux state thay Ä‘á»•i	âœ… Chá»‰ component subscribe state Ä‘Ã³ re-render
TÃ³m láº¡i:
âœ… Redux = lÆ°u data chung (product details)
âœ… useState = lÆ°u data riÃªng (quantity, notification)
âœ… useEffect = káº¿t ná»‘i Redux â†’ local state
âœ… Má»—i setState chá»‰ re-render component Ä‘Ã³, khÃ´ng pháº£i cáº£ trang
=============================================
lÃ m cÃ¡ch nÃ o Ä‘á»ƒ khi chuyá»ƒn trang top deal thÃ¬ flash sale khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng chuyá»ƒn trang theo 

# Giáº£i thÃ­ch vá» Lá»—i Xung Ä‘á»™t PhÃ¢n trang trong Redux

## 1. Váº¥n Ä‘á» báº¡n gáº·p pháº£i

Khi báº¡n báº¥m chuyá»ƒn trang á»Ÿ pháº§n **Top Deals**, pháº§n **Flash Sale** cÅ©ng bá»‹ nháº£y trang theo (hoáº·c ngÆ°á»£c láº¡i).

## 2. NguyÃªn nhÃ¢n (Xung Ä‘á»™t Action)

Trong Redux, cÃ¡c Action Ä‘Æ°á»£c gá»­i Ä‘i (`dispatch`) theo cÆ¡ cháº¿ **Global**.

- Cáº£ `listingSlice` (Top Deals) vÃ  `flashSaleSlice` (Flash Sale) Ä‘á»u Ä‘á»‹nh nghÄ©a má»™t reducer tÃªn lÃ  `setPageIndex`.
- Khi báº¡n gá»i `export const { setPageIndex } = ...`, Redux Toolkit táº¡o ra má»™t Action cÃ³ kiá»ƒu (type) lÃ  `"listing/setPageIndex"` vÃ  `"flashSale/setPageIndex"`.
- **Tuy nhiÃªn**, náº¿u báº¡n vÃ´ tÃ¬nh Ä‘áº·t tÃªn Action giá»‘ng há»‡t nhau hoáº·c sá»­ dá»¥ng nháº§m Action cá»§a Slice nÃ y cho Component kia, Redux sáº½ thá»±c thi nháº§m logic.
- Quan trá»ng hÆ¡n: Náº¿u hai Slice khÃ¡c nhau nhÆ°ng láº¡i dÃ¹ng chung má»™t **Action Type** (do copy-paste hoáº·c Ä‘á»‹nh nghÄ©a trÃ¹ng láº·p), cáº£ hai pháº§n tráº¡ng thÃ¡i (state) sáº½ cÃ¹ng thay Ä‘á»•i khi cÃ³ 1 Action Ä‘Æ°á»£c phÃ¡t Ä‘i.

## 3. Giáº£i phÃ¡p (TÃ¡ch biá»‡t Ä‘á»‹nh danh)

TÃ´i Ä‘Ã£ thá»±c hiá»‡n "Ä‘á»‹nh danh riÃªng" cho má»—i pháº§n Ä‘á»ƒ chÃºng khÃ´ng bao giá» Ä‘á»¥ng hÃ ng:

1. **Trong `listingSlice.ts` (Top Deals):**

   - Äá»•i tÃªn `setPageIndex` thÃ nh `setListingPageIndex`.
   - BÃ¢y giá» Action nÃ y chá»‰ tÃ¡c Ä‘á»™ng Ä‘áº¿n `state.listing`.

2. **Trong `flashSaleSlice.ts` (Flash Sale):**

   - Äá»•i tÃªn `setPageIndex` thÃ nh `setFlashSalePageIndex`.
   - BÃ¢y giá» Action nÃ y chá»‰ tÃ¡c Ä‘á»™ng Ä‘áº¿n `state.flashSale`.

3. **Trong cÃ¡c Component:**
   - `TopDeals.jsx`: Chá»‰ gá»i `setListingPageIndex`.
   - `FlashSale.jsx`: Chá»‰ gá»i `setFlashSalePageIndex`.

## 4. Táº¡i sao lÃ m váº­y láº¡i giáº£i quyáº¿t Ä‘Æ°á»£c?

Báº±ng cÃ¡ch nÃ y, khi báº¡n báº¥m "Next" á»Ÿ Top Deals, Redux chá»‰ gá»­i Ä‘i má»™t tÃ­n hiá»‡u duy nháº¥t lÃ  "Cáº­p nháº­t trang cho Listing". Khá»‘i Flash Sale vÃ¬ khÃ´ng "Ä‘Äƒng kÃ½" láº¯ng nghe tÃ­n hiá»‡u nÃ y nÃªn nÃ³ sáº½ Ä‘á»©ng yÃªn, khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng.
=============================================================

useParams lÃ  má»™t Hook Ä‘Æ°á»£c cung cáº¥p bá»Ÿi thÆ° viá»‡n React Router.

CÃ´ng dá»¥ng chÃ­nh:
NÃ³ dÃ¹ng Ä‘á»ƒ truy xuáº¥t cÃ¡c tham sá»‘ biáº¿n Ä‘á»•i (dynamic parameters) tá»« URL cá»§a trÃ¬nh duyá»‡t.

Khi báº¡n Ä‘á»‹nh nghÄ©a má»™t Route cÃ³ chá»©a tham sá»‘ (thÆ°á»ng báº¯t Ä‘áº§u báº±ng dáº¥u hai cháº¥m :), useParams sáº½ giÃºp báº¡n láº¥y giÃ¡ trá»‹ thá»±c táº¿ cá»§a tham sá»‘ Ä‘Ã³ Ä‘á»ƒ sá»­ dá»¥ng trong Component.

VÃ­ dá»¥ minh há»a:
1. Äá»‹nh nghÄ©a Route (thÆ°á»ng trong App.js hoáº·c main.js):
Giáº£ sá»­ báº¡n cÃ³ má»™t trang chi tiáº¿t sáº£n pháº©m vá»›i Ä‘Æ°á»ng dáº«n nhÆ° sau:

jsx
<Route path="/product/:productId" element={<ProductDetailPage />} />
á» Ä‘Ã¢y, :productId lÃ  má»™t tham sá»‘ Ä‘á»™ng.

2. Sá»­ dá»¥ng trong Component (ProductDetailPage.jsx):
Khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o URL tiki.vn/product/123, báº¡n muá»‘n láº¥y con sá»‘ 123 Ä‘Ã³ Ä‘á»ƒ gá»i API láº¥y dá»¯ liá»‡u sáº£n pháº©m.

jsx
import { useParams } from 'react-router-dom';
const ProductDetailPage = () => {
  // useParams tráº£ vá» má»™t object chá»©a cÃ¡c tham sá»‘ tá»« URL
  const { productId } = useParams();
  console.log(productId); // Káº¿t quáº£ sáº½ lÃ  "123"
  return (
    <div>
      <h1>Äang xem sáº£n pháº©m cÃ³ ID lÃ : {productId}</h1>
    </div>
  );
};
Táº¡i sao nÃ³ quan trá»ng?
Trang Ä‘á»™ng (Dynamic Pages): GiÃºp báº¡n táº¡o ra má»™t Component duy nháº¥t (nhÆ° ProductDetailPage) nhÆ°ng cÃ³ thá»ƒ hiá»ƒn thá»‹ ná»™i dung cho hÃ ng nghÃ¬n sáº£n pháº©m khÃ¡c nhau dá»±a vÃ o ID trÃªn URL.
LiÃªn káº¿t trá»±c tiáº¿p: Cho phÃ©p ngÆ°á»i dÃ¹ng copy URL vÃ  gá»­i cho ngÆ°á»i khÃ¡c, khi má»Ÿ ra váº«n xem Ä‘Ãºng sáº£n pháº©m Ä‘Ã³ vÃ¬ tham sá»‘ Ä‘Ã£ náº±m trÃªn URL.
Trong dá»± Ã¡n báº¡n Ä‘ang má»Ÿ (ProductDetailPage.jsx), cháº¯c háº³n báº¡n Ä‘ang dÃ¹ng nÃ³ Ä‘á»ƒ láº¥y id sáº£n pháº©m nháº±m tÃ¬m Ä‘Ãºng dá»¯ liá»‡u sáº£n pháº©m Ä‘Ã³ tá»« listingSlice hoáº·c gá»i API tÆ°Æ¡ng á»©ng.
===============================================



..........................................................................

  let product = currentProduct;

  if (product) {
    product = {
      ...product,
      name: product.name || product.title || "Sáº£n pháº©m",
      originalPrice: product.originalPrice || product.price || 0,
    };
  }  
  
  táº¡i sao currentProduct thÃ´ng tin sáº£n pháº©m nÃ³ thay Ä‘á»•i  nhÆ°ng mÃ  null á»Ÿ cÃ¡c trang nhÆ°ng váº«n thÃªm Ä‘Æ°á»£c vÃ o  giá» hÃ ng vÃ  táº¡i sao khi má»Ÿ nhiá»u trang thÃ¬ cÃ³ trang currentProduct cÃ³ dá»¯ liá»‡u cÃ³ trang láº¡i null
  

  
======================================================


vÃ  giáº£i thÃ­ch khi nÃ o dÃ¹ng useEffect vÃ  nÃ³ hoáº¡t Ä‘á»™ng , chu trÃ¬nh vÃ²ng Ä‘á»i render  useEffect , táº¡i sao láº¡i Ä‘á»ƒ dispatch(fetchProductsByPage({ pageIndex: 1, pageSize: 18 })); trong  useEffect

useEffect(() => {
    if (products.length === 0) {
      dispatch(fetchProductsByPage({ pageIndex: 1, pageSize: 18 }));
    }
  }, [dispatch, products.length]);


TÃ³m táº¯t: Lifecycle of Reactive Effects (React)
1. Tá»•ng quan vá» Effect vÃ  lifecycle

Trong React, Effects (tÃ¡c Ä‘á»™ng phá»¥) cÃ³ lifecycle khÃ¡c vá»›i lifecycle cá»§a component. 
React

Component thÃ¬ tráº£i qua cÃ¡c giai Ä‘oáº¡n: mounting (Ä‘Æ°á»£c thÃªm vÃ o UI), updating (cáº­p nháº­t), unmounting (bá»‹ gá»¡ khá»i UI). 
React

NhÆ°ng má»™t Effect khÃ´ng gáº¯n cháº·t vÃ o cÃ¡c giai Ä‘oáº¡n nÃ y â€” má»—i Effect mÃ´ táº£ lÃ m sao Ä‘á»ƒ Ä‘á»“ng bá»™ hÃ³a má»™t há»‡ thá»‘ng ngoÃ i React vá»›i state/props hiá»‡n táº¡i. 
React

2. Lifecycle cá»§a má»™t Effect

Má»™t Effect thá»±c thi hai viá»‡c chÃ­nh:

Báº¯t Ä‘áº§u Ä‘á»“ng bá»™ hÃ³a (start synchronization).

Sau Ä‘Ã³ dá»«ng Ä‘á»“ng bá»™ hÃ³a (stop synchronization) thÃ´ng qua cleanup function. 
React

Äiá»u nÃ y cÃ³ thá»ƒ xáº£y ra nhiá»u láº§n trong cÃ¹ng má»™t component khi giÃ¡ trá»‹ phá»¥ thuá»™c (dependencies) thay Ä‘á»•i. 
React

3. VÃ­ dá»¥ minh há»a

Giáº£ sá»­ báº¡n cÃ³ Effect káº¿t ná»‘i tá»›i má»™t server chat:

useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => {
    connection.disconnect();
  };
}, [roomId]);


Pháº§n body cá»§a Effect mÃ´ táº£ báº¯t Ä‘áº§u káº¿t ná»‘i.

Pháº§n return (cleanup) mÃ´ táº£ ngáº¯t káº¿t ná»‘i.

Má»—i láº§n roomId thay Ä‘á»•i, React sáº½ cháº¡y cleanup cÅ© rá»“i cháº¡y Effect má»›i Ä‘á»ƒ Ä‘á»“ng bá»™ vá»›i giÃ¡ trá»‹ má»›i. 
React

4. Khi nÃ o Effect cáº§n tÃ¡i Ä‘á»“ng bá»™

Náº¿u Effect Ä‘á»c dá»¯ liá»‡u tá»« props hoáº·c state, vÃ  cÃ¡c giÃ¡ trá»‹ nÃ y thay Ä‘á»•i sau má»™t render, Effect cáº§n Ä‘Æ°á»£c dá»«ng vÃ  báº¯t Ä‘áº§u láº¡i Ä‘á»ƒ Ä‘á»“ng bá»™ vá»›i giÃ¡ trá»‹ má»›i. 
React

5. CÃ¡ch React quyáº¿t Ä‘á»‹nh dependencies

GiÃ¡ trá»‹ nÃ o Ä‘Æ°á»£c xem lÃ  reactive (thay Ä‘á»•i theo state/props) thÃ¬ pháº£i náº±m trong danh sÃ¡ch dependencies.

React sá»­ dá»¥ng linter Ä‘á»ƒ kiá»ƒm tra báº¡n Ä‘Ã£ khai bÃ¡o dependencies chÃ­nh xÃ¡c hay chÆ°a. 
React

6. Ã nghÄ©a cá»§a máº£ng dependencies rá»—ng []

Náº¿u máº£ng dependencies lÃ  [], Effect khÃ´ng Ä‘á»c báº¥t ká»³ giÃ¡ trá»‹ reactive nÃ o â†’ React chá»‰ cháº¡y Effect má»™t láº§n khi component mount vÃ  cleanup khi unmount. 
React

7. CÃ¡ch nghÄ© Ä‘Ãºng vá» Effect

Thay vÃ¬ nghÄ© vá» nhá»¯ng thá»i Ä‘iá»ƒm trong lifecycle, tá»‘t nháº¥t lÃ  nghÄ© má»—i Effect lÃ  má»™t quÃ¡ trÃ¬nh Ä‘á»“ng bá»™ hÃ³a Ä‘á»™c láº­p:

LÃ m gÃ¬ Ä‘á»ƒ báº¯t Ä‘áº§u Ä‘á»“ng bá»™.

LÃ m gÃ¬ Ä‘á»ƒ dá»«ng Ä‘á»“ng bá»™.
VÃ  React sáº½ gá»i chÃºng á»Ÿ Ä‘Ãºng thá»i Ä‘iá»ƒm cáº§n thiáº¿t, tÃ¹y theo dependencies. 
React

useEffect lÃ  gÃ¬? (theo react.dev)

useEffect dÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n side effects trong function component.

Side effect = nhá»¯ng viá»‡c khÃ´ng pháº£i render UI thuáº§n tÃºy, vÃ­ dá»¥:

Gá»i API

Äá»c / ghi dá»¯ liá»‡u bÃªn ngoÃ i component

Äá»“ng bá»™ state vá»›i Redux / server

Láº¯ng nghe sá»± kiá»‡n (scroll, resizeâ€¦)

Set timer, intervalâ€¦

ğŸ‘‰ React render UI trÆ°á»›c, sau Ä‘Ã³ má»›i cháº¡y useEffect.

2ï¸âƒ£ CÃº phÃ¡p chuáº©n cá»§a useEffect
useEffect(() => {
  // side effect

  return () => {
    // cleanup (khÃ´ng báº¯t buá»™c)
  };
}, [dependencies]);

3 pháº§n quan trá»ng
Pháº§n	Ã nghÄ©a
Callback	Code side-effect cáº§n cháº¡y
Dependency array	Khi nÃ o effect cháº¡y láº¡i
Cleanup	Dá»n dáº¹p khi component unmount / dependency Ä‘á»•i
3ï¸âƒ£ Dependency array quyáº¿t Ä‘á»‹nh khi nÃ o effect cháº¡y
ğŸ”¹ KhÃ´ng cÃ³ dependency
useEffect(() => {
  console.log("Cháº¡y sau má»—i render");
});


âŒ Hiáº¿m khi dÃ¹ng â†’ dá»… gÃ¢y bug

ğŸ”¹ Dependency rá»—ng []
useEffect(() => {
  console.log("Cháº¡y 1 láº§n khi component mount");
}, []);


âœ… DÃ¹ng cho:

Gá»i API láº§n Ä‘áº§u

Khá»Ÿi táº¡o dá»¯ liá»‡u

ğŸ”¹ CÃ³ dependency
useEffect(() => {
  console.log("Cháº¡y khi count thay Ä‘á»•i");
}, [count]);


âœ… DÃ¹ng khi:

Muá»‘n theo dÃµi sá»± thay Ä‘á»•i cá»§a state/props

Äá»“ng bá»™ dá»¯ liá»‡u

4ï¸âƒ£ Khi nÃ o NÃŠN dÃ¹ng useEffect?

âœ… DÃ¹ng khi:

Code phá»¥ thuá»™c vÃ o bÃªn ngoÃ i render

CÃ³ tÃ¡c Ä‘á»™ng phá»¥

âŒ KHÃ”NG dÃ¹ng khi:

Chá»‰ Ä‘á»ƒ tÃ­nh toÃ¡n giÃ¡ trá»‹ â†’ dÃ¹ng biáº¿n thÆ°á»ng

Chá»‰ render JSX dá»±a trÃªn props/state

5ï¸âƒ£ PhÃ¢n tÃ­ch useEffect trong code TopDeals cá»§a báº¡n
ğŸ“Œ Äoáº¡n code báº¡n Ä‘ang dÃ¹ng
useEffect(() => {
  if (products.length === 0) {
    dispatch(fetchProductsByPage({ pageIndex: 1, pageSize: 18 }));
  }
}, [dispatch, products.length]);

6ï¸âƒ£ useEffect nÃ y Ä‘ang lÃ m gÃ¬?

ğŸ‘‰ Má»¥c Ä‘Ã­ch chÃ­nh:
ğŸ“¦ Fetch dá»¯ liá»‡u sáº£n pháº©m láº§n Ä‘áº§u khi component Ä‘Æ°á»£c mount

CÃ¡ch hoáº¡t Ä‘á»™ng theo timeline:

TopDeals render láº§n Ä‘áº§u

Redux products Ä‘ang lÃ  []

useEffect cháº¡y sau render

Äiá»u kiá»‡n products.length === 0 Ä‘Ãºng

dispatch(fetchProductsByPage(...)) â†’ gá»i API

Redux update products

Component re-render

products.length !== 0 â†’ KHÃ”NG fetch láº¡i

âœ… TrÃ¡nh gá»i API nhiá»u láº§n

7ï¸âƒ£ VÃ¬ sao dependency lÃ  [dispatch, products.length]?
â“ Táº¡i sao khÃ´ng lÃ  [products]?

ğŸ‘‰ VÃ¬:

products lÃ  array â†’ má»—i láº§n Redux update cÃ³ thá»ƒ táº¡o reference má»›i

Dá»… gÃ¢y effect cháº¡y láº¡i khÃ´ng cáº§n thiáº¿t

ğŸ‘‰ products.length:

Chá»‰ thay Ä‘á»•i khi sá»‘ lÆ°á»£ng sáº£n pháº©m thay Ä‘á»•i

á»”n Ä‘á»‹nh hÆ¡n

ÄÃºng má»¥c Ä‘Ã­ch kiá»ƒm tra rá»—ng

â“ VÃ¬ sao pháº£i cÃ³ dispatch trong dependency?

Theo React Hook Rules:

Táº¥t cáº£ biáº¿n bÃªn ngoÃ i effect Ä‘á»u pháº£i cÃ³ trong dependency

dispatch lÃ  stable â†’ khÃ´ng gÃ¢y loop

8ï¸âƒ£ useEffect nÃ y dÃ¹ng ÄÃšNG hay SAI?
âœ… Káº¿t luáº­n: DÃ™NG ÄÃšNG & CHUáº¨N

âœ” Fetch dá»¯ liá»‡u khi cáº§n
âœ” KhÃ´ng fetch láº¡i vÃ´ háº¡n
âœ” KhÃ´ng áº£nh hÆ°á»Ÿng render
âœ” ÄÃºng tinh tháº§n react.dev

9ï¸âƒ£ Náº¿u KHÃ”NG dÃ¹ng useEffect thÃ¬ chuyá»‡n gÃ¬ xáº£y ra?

âŒ Náº¿u báº¡n dispatch trá»±c tiáº¿p trong component body:

if (products.length === 0) {
  dispatch(fetchProductsByPage(...));
}


ğŸš¨ Lá»–I NGHIÃŠM TRá»ŒNG:

Render â†’ dispatch â†’ render â†’ dispatch â†’ VÃ’NG Láº¶P VÃ” Háº N

App treo ğŸ’€

ğŸ‘‰ Side effect báº¯t buá»™c pháº£i Ä‘áº·t trong useEffect

ğŸ”Ÿ TÃ³m táº¯t ngáº¯n gá»n Ä‘á»ƒ báº¡n nhá»›

useEffect = lÃ m viá»‡c phá»¥ sau render

ğŸ”¹ Gá»i API â†’ useEffect

ğŸ”¹ Theo dÃµi state thay Ä‘á»•i â†’ useEffect

ğŸ”¹ KhÃ´ng áº£nh hÆ°á»Ÿng JSX â†’ useEffect

ğŸ”¹ TrÃ¡nh gá»i trá»±c tiáº¿p trong body component

Trong code TopDeals:

useEffect dÃ¹ng Ä‘á»ƒ fetch dá»¯ liá»‡u ban Ä‘áº§u má»™t cÃ¡ch an toÃ n
=================================================================
Báº¡n Ä‘ang tháº¥y:

currentProduct:

CÃ³ lÃºc cÃ³ dá»¯ liá»‡u

CÃ³ lÃºc null

Má»—i tab trÃ¬nh duyá»‡t khÃ¡c nhau

DÃ¹ currentProduct = null, báº¡n váº«n:

ThÃªm Ä‘Æ°á»£c sáº£n pháº©m vÃ o giá» hÃ ng

Giá» hÃ ng váº«n Ä‘Ãºng

ğŸ‘‰ Äiá»u nÃ y KHÃ”NG mÃ¢u thuáº«n, vÃ  cÃ³ lÃ½ do ráº¥t rÃµ rÃ ng

2ï¸âƒ£ NguyÃªn nhÃ¢n Gá»C: Redux store KHÃ”NG dÃ¹ng chung giá»¯a cÃ¡c tab
ğŸš¨ Sá»± tháº­t quan trá»ng:

Má»—i tab trÃ¬nh duyá»‡t = 1 Redux store riÃªng

HÃ nh Ä‘á»™ng	Káº¿t quáº£
Má»Ÿ tab A	Redux store A
Má»Ÿ tab B	Redux store B
Reload trang	Redux store bá»‹ reset
Má»Ÿ link /product/123 trá»±c tiáº¿p	currentProduct = null ban Ä‘áº§u

ğŸ‘‰ Redux chá»‰ sá»‘ng trong bá»™ nhá»› (memory)
ğŸ‘‰ KHÃ”NG tá»± lÆ°u láº¡i khi refresh / má»Ÿ tab má»›i

3ï¸âƒ£ Táº¡i sao cÃ³ tab currentProduct cÃ³ dá»¯ liá»‡u, tab khÃ¡c thÃ¬ null?
ğŸ” Flow chÃ­nh xÃ¡c trong code cá»§a báº¡n
useEffect nÃ y:
useEffect(() => {
  if (productId) {
    dispatch(fetchProductById(productId));
  }
}, [dispatch, productId]);

CÃ¡c trÆ°á»ng há»£p xáº£y ra:
âœ… TrÆ°á»ng há»£p 1: Click tá»« trang danh sÃ¡ch â†’ ProductDetail

Trang danh sÃ¡ch Ä‘Ã£ load products

Báº¡n click <Link to="/product/5">

Redux store Ä‘Ã£ cÃ³ dá»¯ liá»‡u

fetchProductById:

CÃ³ thá»ƒ tÃ¬m product trong products

Hoáº·c fetch API nhanh

ğŸ‘‰ currentProduct cÃ³ dá»¯ liá»‡u âœ…

âŒ TrÆ°á»ng há»£p 2: Má»Ÿ link product trong TAB Má»šI / refresh

Redux store trá»‘ng

currentProduct = null

fetchProductById cháº¡y (async)

â³ Trong lÃºc pending â†’ currentProduct váº«n null

Náº¿u:

API cháº­m

Hoáº·c reducer chÆ°a set ká»‹p

ğŸ‘‰ Component render tháº¥y currentProduct = null

ğŸ‘‰ Káº¿t quáº£:
CÃ³ tab cÃ³ data, cÃ³ tab null â†’ HOÃ€N TOÃ€N BÃŒNH THÆ¯á»œNG

4ï¸âƒ£ Váº­y táº¡i sao currentProduct = null mÃ  váº«n thÃªm Ä‘Æ°á»£c vÃ o giá» hÃ ng?

ÄÃ¢y lÃ  chá»— ráº¥t nhiá»u ngÆ°á»i hiá»ƒu sai, báº¡n há»i Ä‘Ãºng ğŸ‘Œ

ğŸ”¥ LÃ½ do QUAN TRá»ŒNG nháº¥t

ğŸ‘‰ Báº¡n KHÃ”NG chá»‰ thÃªm currentProduct vÃ o giá»

Báº¡n thÃªm dá»¯ liá»‡u ÄÃƒ ÄÆ¯á»¢C COPY SANG action:
dispatch(
  addToCart({
    id: product.id,
    name: product.name,
    image: product.image,
    price: finalPrice,
    originalPrice: product.originalPrice,
    discount: product.discount,
    quantity: quantity,
  })
);


ğŸ’¡ NghÄ©a lÃ :

Khi báº¥m nÃºt, product KHÃ”NG null

Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c:

Chuáº©n hÃ³a

Copy vÃ o cartSlice

Sau Ä‘Ã³:

cartSlice KHÃ”NG phá»¥ thuá»™c currentProduct ná»¯a

ğŸ‘‰ Sau khi add:

currentProduct cÃ³ thá»ƒ null

NhÆ°ng cart váº«n giá»¯ dá»¯ liá»‡u cÅ©

ğŸ“Œ Redux cart vÃ  Redux listing lÃ  2 state KHÃC NHAU
Slice	Vai trÃ²
listing.currentProduct	Chá»‰ dÃ¹ng Ä‘á»ƒ hiá»ƒn thá»‹
cart.items	Dá»¯ liá»‡u mua hÃ ng tháº­t

ğŸ‘‰ ThÃªm vÃ o giá» = snapshot dá»¯ liá»‡u táº¡i thá»i Ä‘iá»ƒm click

5ï¸âƒ£ Táº¡i sao reload trang thÃ¬ product null nhÆ°ng cart váº«n cÃ³?

Ráº¥t cÃ³ kháº£ nÄƒng báº¡n Ä‘ang dÃ¹ng:

redux-persist

Hoáº·c lÆ°u cart vÃ o localStorage

ğŸ‘‰ Cart Ä‘Æ°á»£c persist
ğŸ‘‰ Listing thÃ¬ KHÃ”NG

ğŸ“Œ VÃ¬ tháº¿:

currentProduct máº¥t

cart váº«n cÃ²n

ğŸ‘‰ ÄÃ¢y lÃ  Ä‘Ãºng thiáº¿t káº¿, khÃ´ng pháº£i bug

6ï¸âƒ£ Váº¥n Ä‘á» tháº­t sá»± trong code hiá»‡n táº¡i (quan trá»ng)
âŒ Hiá»‡n táº¡i báº¡n Ä‘ang lÃ m:
let product = currentProduct;

if (product) {
  product = {
    ...product,
    name: product.name || product.title || "Sáº£n pháº©m",
    originalPrice: product.originalPrice || product.price || 0,
  };
}


ğŸ‘‰ NhÆ°ng:

Náº¿u currentProduct = null

Component return sá»›m

KhÃ´ng fallback tá»« products

7ï¸âƒ£ CÃ¡ch FIX CHUáº¨N (ráº¥t nÃªn lÃ m)
âœ… Giáº£i phÃ¡p Ä‘Ãºng trong thá»±c táº¿
Náº¿u currentProduct null â†’ tÃ¬m trong products
const product =
  currentProduct ||
  apiProducts.find((p) => String(p.id) === String(productId));


ğŸ‘‰ Khi Ä‘Ã³:

Reload trang

Má»Ÿ tab má»›i

KhÃ´ng cÃ²n null giáº£

ğŸ§  Redux best practice (nÃ¢ng cao)
KhÃ´ng lÆ°u currentProduct riÃªng

âŒ

currentProduct


âœ…

selectProductById(state, productId)


ğŸ‘‰ Redux Toolkit khuyáº¿n nghá»‹ dÃ¹ng selector

8ï¸âƒ£ TÃ³m táº¯t NGáº®N â€“ ÄÃšNG â€“ NHá»š LÃ‚U
â“ VÃ¬ sao currentProduct lÃºc null lÃºc khÃ´ng?

ğŸ‘‰ VÃ¬ Redux store:

Reset khi reload

Má»—i tab lÃ  1 store

Fetch async

â“ VÃ¬ sao null váº«n add Ä‘Æ°á»£c vÃ o cart?

ğŸ‘‰ VÃ¬:

Cart nháº­n báº£n copy dá»¯ liá»‡u

KhÃ´ng phá»¥ thuá»™c currentProduct

â“ ÄÃ¢y cÃ³ pháº£i bug khÃ´ng?

ğŸ‘‰ âŒ KhÃ´ng
ğŸ‘‰ ÄÃ¢y lÃ  hÃ nh vi Ä‘Ãºng cá»§a Redux

âœ… CÃ¡ch lÃ m chuáº©n:

Fallback product tá»« products

Hoáº·c dÃ¹ng selector theo id


===================================
táº¡i sao khi currentProduct Ä‘ang cÃ³ data á»Ÿ trong trang chi  tiáº¿t sáº£n pháº©m nhÆ°ng khi dÃ¹ng chá»©c nÄƒng thÃªm sáº£n pháº©m vÃ o giá» hÃ ng thÃ¬ giÃ¡ trá»‹ cá»§a currentProduct  bá»‹ null

Váº¥n Ä‘á» nÃ y ráº¥t phá»• biáº¿n! HÃ£y Ä‘á»ƒ tÃ´i kiá»ƒm tra code Ä‘á»ƒ tÃ¬m nguyÃªn nhÃ¢n táº¡i sao currentProduct bá»‹ null sau khi thÃªm vÃ o giá» hÃ ng:

Analyzed
ProductDetailPage.jsx#L1-568
Analyzed
cartSlice.ts#L1-386
TÃ´i Ä‘Ã£ tÃ¬m ra nguyÃªn nhÃ¢n! Váº¥n Ä‘á» KHÃ”NG PHáº¢I do action 
addToCart
 lÃ m currentProduct bá»‹ null. HÃ£y Ä‘á»ƒ tÃ´i kiá»ƒm tra xem cÃ³ pháº£i do Redux Persist hoáº·c cross-tab sync khÃ´ng:

Analyzed
syncTabs.ts#L1-151
BÃ¢y giá» tÃ´i hiá»ƒu rá»“i! Váº¥n Ä‘á» lÃ  do Redux Persist Ä‘ang ghi Ä‘Ã¨ state listing khi báº¡n thÃªm sáº£n pháº©m vÃ o giá» hÃ ng. HÃ£y Ä‘á»ƒ tÃ´i giáº£i thÃ­ch:

ğŸ” NguyÃªn nhÃ¢n currentProduct bá»‹ null
Timeline sá»± kiá»‡n:
1ï¸âƒ£ User á»Ÿ trang ProductDetailPage
   â”œâ”€ currentProduct = { id: 123, name: "Sáº£n pháº©m A", ... }
   â””â”€ Redux state: listing.currentProduct = {...}
2ï¸âƒ£ User click "ThÃªm vÃ o giá»"
   â”œâ”€ dispatch(addToCart(...))
   â””â”€ Redux state: cart.items = [..., newItem]
3ï¸âƒ£ Redux Persist lÆ°u state vÃ o localStorage
   â”œâ”€ LÆ°u: persist:root = { cart: {...}, checkout: {...}, ... }
   â””â”€ âš ï¸ KHÃ”NG lÆ°u listing (vÃ¬ listing trong blacklist)
4ï¸âƒ£ Redux Persist REHYDRATE
   â”œâ”€ Load láº¡i state tá»« localStorage
   â”œâ”€ cart âœ… Ä‘Æ°á»£c restore
   â”œâ”€ listing âŒ KHÃ”NG Ä‘Æ°á»£c restore (vÃ¬ blacklist)
   â””â”€ ğŸ’¥ currentProduct = null (vá» initialState)
Váº¥n Ä‘á» cá»¥ thá»ƒ:
Trong 
store.ts
, báº¡n cÃ³:

typescript
const persistConfig: any = {
  key: "root",
  storage,
  whitelist: ["cart", "address", "checkout"], // â† CHá»ˆ lÆ°u 3 cÃ¡i nÃ y
  // listing KHÃ”NG Ä‘Æ°á»£c lÆ°u
};
Khi Redux Persist rehydrate (sau khi dispatch báº¥t ká»³ action nÃ o):

cart, address, checkout â†’ ÄÆ°á»£c restore tá»« localStorage
listing â†’ Quay vá» initialState (vÃ¬ khÃ´ng Ä‘Æ°á»£c persist)
currentProduct â†’ Trá»Ÿ thÃ nh null
âœ… Giáº£i phÃ¡p
CÃ³ 3 cÃ¡ch Ä‘á»ƒ giáº£i quyáº¿t:

Giáº£i phÃ¡p 1: KhÃ´ng dÃ¹ng listing.currentProduct (Khuyáº¿n nghá»‹)
Thay vÃ¬ lÆ°u currentProduct trong Redux, hÃ£y lÆ°u trong local state cá»§a component:

Edited
ProductDetailPage.jsx
+15
-17
HoÃ n táº¥t! BÃ¢y giá» hÃ£y refresh trang vÃ  test láº¡i. Váº¥n Ä‘á» Ä‘Ã£ Ä‘Æ°á»£c giáº£i quyáº¿t!

ğŸ“š Giáº£i thÃ­ch chi tiáº¿t
TrÆ°á»›c khi sá»­a:
javascript
// âŒ Váº¤N Äá»€: product láº¥y trá»±c tiáº¿p tá»« Redux
let product = listingProduct; // â† Tá»« Redux state
// Khi Redux Persist rehydrate:
// listingProduct = null â†’ product = null ğŸ’¥
Sau khi sá»­a:
javascript
// âœ… GIáº¢I PHÃP: LÆ°u product trong local state
const [product, setProduct] = useState(null);
useEffect(() => {
  if (listingProduct) {
    setProduct(listingProduct); // â† Copy vÃ o local state
  }
}, [listingProduct]);
// Khi Redux Persist rehydrate:
// listingProduct = null (trong Redux)
// product = {...} (váº«n giá»¯ nguyÃªn trong local state) âœ…
Timeline sau khi sá»­a:
1ï¸âƒ£ User vÃ o trang ProductDetailPage
   â”œâ”€ dispatch(fetchProductById(123))
   â”œâ”€ API tráº£ vá» â†’ listingProduct = {...}
   â””â”€ useEffect cháº¡y â†’ setProduct({...}) âœ…
2ï¸âƒ£ User click "ThÃªm vÃ o giá»"
   â”œâ”€ dispatch(addToCart(...))
   â”œâ”€ Redux Persist rehydrate
   â”œâ”€ listingProduct = null (trong Redux)
   â””â”€ product = {...} (VáºªN Tá»’N Táº I trong local state) âœ…
3ï¸âƒ£ UI váº«n hiá»ƒn thá»‹ bÃ¬nh thÆ°á»ng
   â””â”€ VÃ¬ component dÃ¹ng local state `product`, khÃ´ng pháº£i Redux state
ğŸ¯ Táº¡i sao giáº£i phÃ¡p nÃ y tá»‘t hÆ¡n?
TiÃªu chÃ­	Redux State	Local State (Giáº£i phÃ¡p má»›i)
Persist	Bá»‹ reset khi rehydrate	Giá»¯ nguyÃªn trong component
Performance	Trigger re-render toÃ n app	Chá»‰ re-render component nÃ y
Complexity	Cáº§n quáº£n lÃ½ persist config	ÄÆ¡n giáº£n, tá»± nhiÃªn
Use case	Data cáº§n share giá»¯a components	Data chá»‰ dÃ¹ng trong 1 component
ğŸ’¡ Khi nÃ o dÃ¹ng Redux vs Local State?
DÃ¹ng Redux khi:
âœ… Data cáº§n share giá»¯a nhiá»u components
âœ… Data cáº§n persist (lÆ°u vÃ o localStorage)
âœ… Data cáº§n sync giá»¯a cÃ¡c tabs
VÃ­ dá»¥: cart, user, settings

DÃ¹ng Local State khi:
âœ… Data chá»‰ dÃ¹ng trong 1 component
âœ… Data táº¡m thá»i, khÃ´ng cáº§n persist
âœ… Data fetch tá»« API má»—i láº§n mount

========================================================

	PageIndex: 1,
      PageSize: 18,
      Orderby: "CreatedDate desc",
      AId: "da1e0cd8-f73b-4da2-acf2-8ddc621bcf75",
      LanguageCode: "vi",
      CurrencyCode: "VND",



http://192.168.2.112:9092/api/swagger/index.html

Danh má»¥c sáº£n pháº©m
GET: /api-end-user/classification/get-all
GET: /api-end-user/classification/{id}/get-children

Danh sÃ¡ch sáº£n pháº©m : 
POST: /api-end-user/listing/get-by-page
Chi tiáº¿t sáº£n pháº©m 
GET: /api-end-user/listing/{id}



tÃ¬m hiá»ƒu https vÃ  restfullAPI , request vÃ  response

dÃ¹ng /api-end-user/listing/get-by-page Ä‘á»ƒ láº¥y Ä‘Æ°á»£c danh  sÃ¡ch sáº£n pháº©m thay giÃ¡ trá»‹ AId: da1e0cd8-f73b-4da2-acf2-8ddc621bcf75


POST: /api-end-user/listing/get-by-page
Example Value
Schema
{
  "PageIndex": 0,
  "PageSize": 0,
  "FieldName": "string",
  "Orderby": "string",
  "Filter": [
    {
      "Opt": "string",
      "Name": "string",
      "Opt1": "string",
      "Type": 1,
      "Values": "string"
    }
  ],
  "Keyword": "string",
  "LanguageCode": "string",
  "CurrencyCode": "string",
  "ProductsId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "AId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "WareHouseId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "ListingPropertyCode": "string",
  "CustomerId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
}

-----------
{
  "PageIndex": 0,
  "PageSize": 0,
  "FieldName": "string",
  "Orderby": "string",
  "Filter": [
    {
      "Opt": "string",
      "Name": "string",
      "Opt1": "string",
      "Type": 1,
      "Values": "string"
    }
  ],
  "Keyword": "string",
  "LanguageCode": "string",
  "CurrencyCode": "string",
  "ProductsId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "AId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "WareHouseId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "ListingPropertyCode": "string",
  "CustomerId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
}
-----------


GET: /api-end-user/listing/{id}

Parameters
Try it out
Name	Description
id *
string($uuid)
(path)
id
aid
string($uuid)
(query)
aid


=====================

useParams() lÃ  gÃ¬?

Hook cá»§a React Router

DÃ¹ng Ä‘á»ƒ láº¥y tham sá»‘ Ä‘á»™ng trong URL

VÃ­ dá»¥ URL:
/category/123

Router:
<Route path="/category/:categoryId" element={<CategoryPage />} />

Káº¿t quáº£:
categoryId = "123"


ğŸ“Œ Ã nghÄ©a thá»±c táº¿
ğŸ‘‰ Biáº¿t Ä‘Æ°á»£c user Ä‘ang Ä‘á»©ng á»Ÿ danh má»¥c nÃ o Ä‘á»ƒ:

load danh má»¥c con

load sáº£n pháº©m tÆ°Æ¡ng á»©ng

====================


Náº¿u báº¡n chá»‰ dÃ¹ng const list = data.Data;, thÃ¬ biáº¿n list lÃºc nÃ y lÃ  má»™t Äá»‘i tÆ°á»£ng (Object) chá»©a cáº£ Result, Total,... chá»© khÃ´ng pháº£i lÃ  má»™t Máº£ng (Array).
HÃ m .map() chá»‰ cháº¡y Ä‘Æ°á»£c trÃªn Máº£ng. VÃ¬ váº­y náº¿u list lÃ  Object, code sáº½ bá»‹ lá»—i ngay láº­p tá»©c vÃ  khÃ´ng hiá»ƒn thá»‹ Ä‘Æ°á»£c gÃ¬.
======================
Dáº¥u ?? trong JavaScript / TypeScript gá»i lÃ  Nullish Coalescing Operator
ğŸ‘‰ dÃ¹ng Ä‘á»ƒ chá»n giÃ¡ trá»‹ há»£p lá»‡ Ä‘áº§u tiÃªn KHÃ”NG pháº£i null hoáº·c undefined

ğŸ§  Ã nghÄ©a ngáº¯n gá»n
a ?? b


â¡ï¸ Náº¿u a khÃ´ng pháº£i null vÃ  undefined â†’ láº¥y a
â¡ï¸ Náº¿u a lÃ  null hoáº·c undefined â†’ láº¥y b
===================================
params dÃ¹ng Ä‘á»ƒ gá»­i query string
ğŸ”¹ Axios tá»± ná»‘i ?aid=... vÃ o URL
ğŸ”¹ GET API báº¯t buá»™c dÃ¹ng params
ğŸ”¹ _ nghÄ©a lÃ  khÃ´ng cáº§n tham sá»‘ truyá»n vÃ o

PageSize = 20 â†’ má»—i trang tráº£ vá» 20 sáº£n pháº©m

PageSize = 10 â†’ má»—i trang tráº£ vá» 10 sáº£n pháº©m

ğŸ“Œ Frontend dÃ¹ng cÃ¡i nÃ y Ä‘á»ƒ:
Render UI

TÃ­nh tá»•ng sá»‘ trang

CreatedDate â†’ ngÃ y táº¡o sáº£n pháº©m

desc â†’ giáº£m dáº§n (má»›i nháº¥t lÃªn trÆ°á»›c)

ğŸ“Œ NghÄ©a lÃ :

Láº¥y sáº£n pháº©m má»›i táº¡o nháº¥t hiá»ƒn thá»‹ trÆ°á»›c

ğŸ§  Tá»•ng há»£p dá»… nhá»›
Field	Ã nghÄ©a	DÃ¹ng Ä‘á»ƒ
PageIndex	Trang hiá»‡n táº¡i	Pagination
PageSize	Sá»‘ item / trang	Pagination
Orderby	Sáº¯p xáº¿p	UI hiá»ƒn thá»‹
AId	ID há»‡ thá»‘ng	PhÃ¢n vÃ¹ng dá»¯ liá»‡u
LanguageCode	NgÃ´n ngá»¯	Äa ngÃ´n ngá»¯
CurrencyCode	Tiá»n tá»‡	Äa thá»‹ trÆ°á»ng


VÃ¬ sao dÃ¹ng POST chá»© khÃ´ng dÃ¹ng GET?

ğŸ“Œ Vá»›i API listing:
=======

VÃ¬ sao dÃ¹ng POST chá»© khÃ´ng dÃ¹ng GET?

ğŸ“Œ Vá»›i API listing:

GET	                        POST
Query string dÃ i	        Gá»­i body gá»n
Lá»™ dá»¯ liá»‡u	                An toÃ n hÆ¡n
KhÃ³ má»Ÿ rá»™ng	               Dá»… thÃªm filter
Ãt dÃ¹ng cho listing lá»›n	    Ráº¥t phá»• biáº¿n


===============
DÃ²ng cháº£y dá»¯ liá»‡u (ráº¥t quan trá»ng Ä‘á»ƒ há»c frontend)
UI (Pagination)
   â†“
Redux (pageIndex, pageSize)
   â†“
payload
   â†“
API Backend
   â†“
DB query + filter + order
   â†“
JSON response
   â†“
Redux store
   â†“
Component render
=====================
Äá»‹nh dáº¡ng Base64 lÃ  phÆ°Æ¡ng phÃ¡p mÃ£ hÃ³a dá»¯ liá»‡u nhá»‹ phÃ¢n thÃ nh vÄƒn báº£n ASCII Ä‘á»ƒ truyá»n qua cÃ¡c kÃªnh chá»‰ há»— trá»£ vÄƒn báº£n (nhÆ° email, HTTP), báº±ng cÃ¡ch sá»­ dá»¥ng 64 kÃ½ tá»± (A-Z, a-z, 0-9, +, /) vÃ  kÃ½ tá»± padding '=' Ä‘á»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u nguyÃªn váº¹n, thÆ°á»ng dÃ¹ng Ä‘á»ƒ nhÃºng hÃ¬nh áº£nh, tá»‡p vÃ o HTML/CSS/XML, hoáº·c mÃ£ hÃ³a dá»¯ liá»‡u email

==================================
hiá»ƒn thá»‹ áº£nh bá»‹ lá»—i 

{/* <img 
                  src={deal.image} 
                  alt={deal.title} 
                  className="deal-image"
                  onError={(e) => {
                    e.target.onerror = null; // Prevent infinite loop
                    // DÃ¹ng base64 image thay vÃ¬ external URL
                    e.target.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Crect fill='%23e0e0e0' width='300' height='300'/%3E%3Ctext fill='%23666' font-family='sans-serif' font-size='20' dy='10.5' font-weight='bold' x='50%25' y='50%25' text-anchor='middle'%3ENo Image%3C/text%3E%3C/svg%3E";
                  }}
                /> */}
=====================

HTTP (HyperText Transfer Protocol) lÃ  Giao thá»©c Truyá»n SiÃªu vÄƒn báº£n, bá»™ quy táº¯c ná»n táº£ng cho viá»‡c trao Ä‘á»•i thÃ´ng tin trÃªn World Wide Web (WWW), cho phÃ©p trÃ¬nh duyá»‡t (mÃ¡y khÃ¡ch) gá»­i yÃªu cáº§u vÃ  nháº­n pháº£n há»“i tá»« mÃ¡y chá»§ web Ä‘á»ƒ hiá»ƒn thá»‹ trang web, hÃ¬nh áº£nh, video, vÃ  cÃ¡c tÃ i nguyÃªn khÃ¡c. NÃ³ hoáº¡t Ä‘á»™ng dá»±a trÃªn mÃ´ hÃ¬nh yÃªu cáº§u-pháº£n há»“i vÃ  lÃ  cÃ´ng nghá»‡ cá»‘t lÃµi giÃºp chÃºng ta truy cáº­p Internet. 
CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cÆ¡ báº£n
YÃªu cáº§u (Request): TrÃ¬nh duyá»‡t cá»§a báº¡n gá»­i yÃªu cáº§u (vÃ­ dá»¥: nháº­p URL) Ä‘áº¿n mÃ¡y chá»§.
Pháº£n há»“i (Response): MÃ¡y chá»§ nháº­n yÃªu cáº§u vÃ  gá»­i láº¡i pháº£n há»“i, thÆ°á»ng chá»©a mÃ£ HTML, hÃ¬nh áº£nh, hoáº·c dá»¯ liá»‡u khÃ¡c.
Hiá»ƒn thá»‹: TrÃ¬nh duyá»‡t Ä‘á»c vÃ  diá»…n giáº£i dá»¯ liá»‡u nÃ y Ä‘á»ƒ hiá»ƒn thá»‹ trang web cho báº¡n. 
CÃ¡c phiÃªn báº£n vÃ  biáº¿n thá»ƒ
HTTP/1.1: PhiÃªn báº£n phá»• biáº¿n, cho phÃ©p nhiá»u yÃªu cáº§u trÃªn má»™t káº¿t ná»‘i.
HTTP/2, HTTP/3: CÃ¡c phiÃªn báº£n má»›i hÆ¡n, tá»‘i Æ°u hÃ³a tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t truyá»n táº£i.

HTTPS (HTTP Secure): PhiÃªn báº£n báº£o máº­t cá»§a HTTP, sá»­ dá»¥ng mÃ£ hÃ³a (TLS/SSL) Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u, thÆ°á»ng tháº¥y trÃªn cÃ¡c trang web cÃ³ biá»ƒu tÆ°á»£ng khÃ³a (vÃ­ dá»¥: https://). 
Äáº·c Ä‘iá»ƒm chÃ­nh
Ná»n táº£ng WWW: LÃ  xÆ°Æ¡ng sá»‘ng cá»§a Web, cho phÃ©p truy cáº­p ná»™i dung online.
MÃ´ hÃ¬nh YÃªu cáº§u-Pháº£n há»“i (Request-Response): Giao tiáº¿p theo kiá»ƒu há»i-Ä‘Ã¡p giá»¯a client vÃ  server.
KhÃ´ng tráº¡ng thÃ¡i (Stateless): Má»—i giao dá»‹ch lÃ  Ä‘á»™c láº­p, nhÆ°ng cÃ¡c phiÃªn báº£n má»›i Ä‘Ã£ cáº£i thiá»‡n Ä‘iá»u nÃ y.
Má»Ÿ rá»™ng: Há»— trá»£ nhiá»u loáº¡i dá»¯ liá»‡u (vÄƒn báº£n, hÃ¬nh áº£nh, video). 

Cá»•ng khÃ¡c: HTTP dÃ¹ng cá»•ng 80, HTTPS dÃ¹ng cá»•ng 443 (cá»•ng báº£o máº­t

HTTP status code Ä‘Æ°á»£c chia thÃ nh 5 loáº¡i khÃ¡c nhau, má»—i loáº¡i báº¯t Ä‘áº§u vá»›i 1 chá»¯ sá»‘ khÃ¡c nhau vÃ  mang Ã½ nghÄ©a riÃªng:

1xx (Informational â€“ ThÃ´ng tin): CÃ¡c status code loáº¡i nÃ y dÃ¹ng Ä‘á»ƒ Ä‘Æ¡n giáº£n thÃ´ng bÃ¡o vá»›i client ráº±ng server Ä‘Ã£ nháº­n Ä‘Æ°á»£c request. CÃ¡c status code nÃ y Ã­t Ä‘Æ°á»£c sá»­ dá»¥ng.
2xx (Sucess â€“ ThÃ nh cÃ´ng): CÃ¡c status code loáº¡i nÃ y cÃ³ Ã½ nghÄ©a ráº±ng request Ä‘Æ°á»£c server xá»­ lÃ½ thÃ nh cÃ´ng.
3xx (Redirect â€“ Chuyá»ƒn hÆ°á»›ng): CÃ¡c status code loáº¡i nÃ y cÃ³ Ã½ nghÄ©a ráº±ng server sáº½ chuyá»ƒn tiáº¿p request hiá»‡n táº¡i sang má»™t request khÃ¡c vÃ  client cáº§n thá»±c hiá»‡n viá»‡c gá»­i request tiáº¿p theo Ä‘Ã³ Ä‘á»ƒ cÃ³ thá»ƒ hoÃ n táº¥t. ThÃ´ng thÆ°á»ng khi trÃ¬nh duyá»‡t nháº­n Ä‘Æ°á»£c status code loáº¡i nÃ y nÃ³ sáº½ tá»± Ä‘á»™ng thá»±c hiá»‡n viá»‡c gá»­i request tiáº¿p theo Ä‘á»ƒ láº¥y vá» káº¿t quáº£.
4xx (Client error â€“ Lá»—i Client): CÃ¡c status code loáº¡i nÃ y cÃ³ Ã½ nghÄ©a ráº±ng Ä‘Ã£ cÃ³ lá»—i tá»« phÃ­a client trong khi gá»­i request. VÃ­ dá»¥ nhÆ° sai URL, sai HTTP method, khÃ´ng cÃ³ quyá»n truy cáº­p vÃ o trangâ€¦
5xx (Server error â€“ Lá»—i Server): CÃ¡c status code loáº¡i nÃ y cÃ³ Ã½ nghÄ©a ráº±ng Ä‘Ã£ cÃ³ lá»—i tá»« phÃ­a server trong khi xá»­ lÃ½ request. VÃ­ dá»¥ nhÆ° server quÃ¡ táº£i, háº¿t bá»™ nhá»›, lá»—i káº¿t ná»‘i databaseâ€¦

=================================================
API (Application Programming Interface) lÃ  má»™t giao diá»‡n trung gian cho phÃ©p cÃ¡c á»©ng dá»¥ng pháº§n má»m giao tiáº¿p vá»›i nhau. Äá»‹nh nghÄ©a cÃ¡ch mÃ  cÃ¡c thÃ nh pháº§n cá»§a pháº§n má»m gá»­i yÃªu cáº§u vÃ  nháº­n pháº£n há»“i mÃ  khÃ´ng cáº§n biáº¿t chi tiáº¿t cÃ¡ch há»‡ thá»‘ng bÃªn trong hoáº¡t Ä‘á»™ng.


Trong API, Request (YÃªu cáº§u) lÃ  lá»i Ä‘á» nghá»‹ cá»§a client gá»­i Ä‘áº¿n server (gá»“m URL, phÆ°Æ¡ng thá»©c HTTP, headers, body), cÃ²n Response (Pháº£n há»“i) lÃ  cÃ¢u tráº£ lá»i cá»§a server sau khi xá»­ lÃ½ yÃªu cáº§u (gá»“m Status Code, Headers, Body dá»¯ liá»‡u), táº¡o thÃ nh má»™t chu trÃ¬nh giao tiáº¿p cÆ¡ báº£n giá»¯a Client-Server. TÃ¬m hiá»ƒu API. Kiáº¿n thá»©c quan trá»ng dÃ nh cho ngÆ°á»i má»›i báº¯t Ä‘áº§u trÃªn BÃ¡c SÄ© IT CÃ¡c phÆ°Æ¡ng thá»©c Request trong REST API vÃ  cÃ¡c tráº¡ng thÃ¡i trÃªn AnhTester HTTP Request VÃ  HTTP Response trÃªn Viblo TÃ¬m hiá»ƒu kiáº¿n thá»©c cÆ¡ báº£n vá» API trÃªn Viblo Giao thá»©c trong kiá»ƒm thá»­ API vÃ  HTTP Status code lÃ  gÃ¬? CÃ¡c loáº¡i trÃªn TDA Company 
Request (YÃªu cáº§u)
Má»¥c Ä‘Ã­ch: Client muá»‘n server thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng hoáº·c cung cáº¥p dá»¯ liá»‡u.
Cáº¥u thÃ nh: Giao thá»©c trong kiá»ƒm thá»­ API vÃ  HTTP Status code lÃ  gÃ¬? CÃ¡c loáº¡i trÃªn TDA Company
URL: Äá»‹a chá»‰ tÃ i nguyÃªn (resource) cáº§n truy cáº­p.
Method (HTTP Method): HÃ nh Ä‘á»™ng cáº§n lÃ m (GET - láº¥y, POST - táº¡o, PUT - cáº­p nháº­t toÃ n bá»™, PATCH - cáº­p nháº­t má»™t pháº§n, DELETE - xÃ³a).
Headers: ThÃ´ng tin bá»• sung (xÃ¡c thá»±c, kiá»ƒu dá»¯ liá»‡u).
Body: Dá»¯ liá»‡u gá»­i Ä‘i (dÃ¹ng cho POST, PUT, PATCH). 
Response (Pháº£n há»“i)
Má»¥c Ä‘Ã­ch: Server tráº£ vá» káº¿t quáº£ cho yÃªu cáº§u cá»§a client.
Cáº¥u thÃ nh: Giao thá»©c trong kiá»ƒm thá»­ API vÃ  HTTP Status code lÃ  gÃ¬? CÃ¡c loáº¡i trÃªn TDA Company
Status Code: MÃ£ tráº¡ng thÃ¡i (vÃ­ dá»¥: 200 OK - thÃ nh cÃ´ng, 201 Created - táº¡o má»›i, 404 Not Found - khÃ´ng tÃ¬m tháº¥y, 500 Internal Server Error - lá»—i server).
Headers: ThÃ´ng tin vá» response (kiá»ƒu dá»¯ liá»‡u tráº£ vá»).
Body: Dá»¯ liá»‡u thá»±c táº¿ (JSON, XML...) hoáº·c thÃ´ng bÃ¡o lá»—i. 
TÃ³m táº¯t hoáº¡t Ä‘á»™ng
Client (á»©ng dá»¥ng Ä‘iá»‡n thoáº¡i) gá»­i Request (GET/users) Ä‘áº¿n Server. Server xá»­ lÃ½, tÃ¬m dá»¯ liá»‡u ngÆ°á»i dÃ¹ng vÃ  tráº£ vá» Response (200 OK + danh sÃ¡ch ngÆ°á»i dÃ¹ng trong Body). 

=======================================================

REST lÃ  má»™t kiáº¿n trÃºc, cÃ²n RESTful lÃ  cÃ¡ch triá»ƒn khai API tuÃ¢n theo cÃ¡c nguyÃªn táº¯c cá»§a REST.

RESTful API (hay REST API) lÃ  má»™t giao diá»‡n láº­p trÃ¬nh á»©ng dá»¥ng (API hay web API) tuÃ¢n theo cÃ¡c rÃ ng buá»™c cá»§a kiá»ƒu kiáº¿n trÃºc REST, cho phÃ©p tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c dá»‹ch vá»¥ web RESTful. Hay nÃ³i Ä‘Æ¡n giáº£n, RESTful API lÃ  má»™t tiÃªu chuáº©n Ä‘Æ°á»£c dÃ¹ng trong viá»‡c thiáº¿t káº¿ API dÃ nh cho cÃ¡c á»©ng dá»¥ng web (thiáº¿t káº¿ Web Services) Ä‘á»ƒ há»— trá»£ cho viá»‡c quáº£n lÃ½ cÃ¡c resource.

RESTful API lÃ  gÃ¬? | FPT Cloud lÃ  má»™t tiÃªu chuáº©n thiáº¿t káº¿ giao diá»‡n láº­p trÃ¬nh á»©ng dá»¥ng (API) cho web, hoáº¡t Ä‘á»™ng dá»±a trÃªn cÃ¡c nguyÃªn táº¯c cá»§a kiáº¿n trÃºc REST (Representational State Transfer), cho phÃ©p cÃ¡c á»©ng dá»¥ng khÃ¡c nhau giao tiáº¿p báº±ng cÃ¡ch sá»­ dá»¥ng giao thá»©c HTTP Ä‘á»ƒ truyá»n táº£i dá»¯ liá»‡u theo Ä‘á»‹nh dáº¡ng chuáº©n nhÆ° JSON or XML, táº­p trung vÃ o viá»‡c quáº£n lÃ½ "tÃ i nguyÃªn" (resources) má»™t cÃ¡ch hiá»‡u quáº£ thÃ´ng qua cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° GET, POST, PUT, DELETE. 

REST: lÃ  má»™t dáº¡ng chuyá»ƒn Ä‘á»•i cáº¥u trÃºc dá»¯ liá»‡u, má»™t kiá»ƒu kiáº¿n trÃºc Ä‘á»ƒ viáº¿t API. NÃ³ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c HTTP Ä‘Æ¡n giáº£n Ä‘á»ƒ táº¡o cho giao tiáº¿p giá»¯a cÃ¡c mÃ¡y. VÃ¬ váº­y, thay vÃ¬ sá»­ dá»¥ng má»™t URL cho viá»‡c xá»­ lÃ½ má»™t sá»‘ thÃ´ng tin ngÆ°á»i dÃ¹ng, REST gá»­i má»™t yÃªu cáº§u HTTP nhÆ° GET, POST, DELETE â€¦ Ä‘áº¿n má»™t URL Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u.

REST hoáº¡t Ä‘á»™ng dá»±a chá»§ yáº¿u trÃªn phÆ°Æ¡ng thá»©c CRUD ( Create, Read, Update, Delete) tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i 4 giao thá»©c HTTP: POST, GET, PUT, DELETE.

RESTful API: lÃ  má»™t tiÃªu chuáº©n dÃ¹ng trong viá»‡c thiáº¿t káº¿ API cho cÃ¡c á»©ng dá»¥ng Web (nhÆ° thiáº¿t káº¿ Web services), Ä‘á»ƒ tiá»‡n cho viá»‡c quáº£n lÃ½ cÃ¡c resource. NÃ³ chÃº trá»ng vÃ o resource há»‡ thá»‘ng (nhÆ°: tá»‡p vÄƒn báº£n, áº£nh, Ã¢m thanh, video, hoáº·c dá»¯ liá»‡u Ä‘á»™ngâ€¦), bao gá»“m cÃ¡c tráº¡ng thÃ¡i resource Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng vÃ  Ä‘Æ°á»£c truyá»n táº£i qua HTTP.
CÃ¡c thÃ nh pháº§n chÃ­nh
API (Application Programming Interface): Bá»™ quy táº¯c cho phÃ©p pháº§n má»m nÃ³i chuyá»‡n vá»›i nhau.
REST (Representational State Transfer): Má»™t phong cÃ¡ch kiáº¿n trÃºc, táº­p trung vÃ o tÃ i nguyÃªn há»‡ thá»‘ng (dá»¯ liá»‡u) vÃ  cÃ¡ch biá»ƒu diá»…n tráº¡ng thÃ¡i cá»§a chÃºng.
HTTP Methods: Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c HTTP nhÆ° GET (láº¥y dá»¯ liá»‡u), POST (táº¡o dá»¯ liá»‡u), PUT (cáº­p nháº­t), DELETE (xÃ³a) Ä‘á»ƒ thao tÃ¡c trÃªn tÃ i nguyÃªn.
TÃ i nguyÃªn (Resources): Dá»¯ liá»‡u Ä‘Æ°á»£c quáº£n lÃ½ (vÃ­ dá»¥: ngÆ°á»i dÃ¹ng, sáº£n pháº©m) vÃ  Ä‘Æ°á»£c Ä‘á»‹nh danh qua URL duy nháº¥t.
Äá»‹nh dáº¡ng dá»¯ liá»‡u: ThÆ°á»ng sá»­ dá»¥ng JSON (nháº¹, phá»• biáº¿n) hoáº·c XML Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u. 
CÃ¡ch hoáº¡t Ä‘á»™ng cÆ¡ báº£n
Client gá»­i yÃªu cáº§u: á»¨ng dá»¥ng (web, mobile) gá»­i yÃªu cáº§u (request) Ä‘áº¿n mÃ¡y chá»§, kÃ¨m theo phÆ°Æ¡ng thá»©c HTTP vÃ  URL cá»§a tÃ i nguyÃªn.
MÃ¡y chá»§ xá»­ lÃ½: MÃ¡y chá»§ nháº­n yÃªu cáº§u, xÃ¡c thá»±c vÃ  xá»­ lÃ½ (vÃ­ dá»¥: láº¥y dá»¯ liá»‡u tá»« database).
MÃ¡y chá»§ tráº£ vá» pháº£n há»“i: MÃ¡y chá»§ gá»­i láº¡i pháº£n há»“i (response) chá»©a dá»¯ liá»‡u (thÆ°á»ng lÃ  JSON) vÃ  mÃ£ tráº¡ng thÃ¡i (thÃ nh cÃ´ng/tháº¥t báº¡i) cho client. 
Lá»£i Ã­ch cá»§a RESTful API
ÄÆ¡n giáº£n, dá»… dÃ¹ng: Dá»±a trÃªn cÃ¡c chuáº©n HTTP quen thuá»™c, dá»… hiá»ƒu.
Kháº£ nÄƒng má»Ÿ rá»™ng: Dá»… dÃ ng má»Ÿ rá»™ng há»‡ thá»‘ng vÃ  thÃªm tÃ­nh nÄƒng má»›i.
TÃ­nh di Ä‘á»™ng (Portability): Há»— trá»£ nhiá»u ná»n táº£ng (web, mobile, desktop) vÃ¬ giao tiáº¿p qua HTTP.
Hiá»‡u quáº£: Sá»­ dá»¥ng Ã­t bÄƒng thÃ´ng, hiá»‡u suáº¥t cao. 

RESTful lÃ  cÃ¡ch thiáº¿t káº¿ API dá»±a trÃªn nguyÃªn táº¯c REST. RESTful API sá»­ dá»¥ng giao thá»©c HTTP Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c vá»›i tÃ i nguyÃªn (resource) nhÆ°:

GET â€“ Láº¥y dá»¯ liá»‡u
POST â€“ Táº¡o má»›i
PUT/PATCH â€“ Cáº­p nháº­t
DELETE â€“ XÃ³a
Dá»¯ liá»‡u pháº£n há»“i thÆ°á»ng Ä‘Æ°á»£c tráº£ vá» dÆ°á»›i dáº¡ng JSON â€“ Ä‘á»‹nh dáº¡ng nháº¹, dá»… phÃ¢n tÃ­ch vÃ  phá»• biáº¿n vá»›i cÃ¡c á»©ng dá»¥ng hiá»‡n Ä‘áº¡i.

Vá» request
Má»™t cÃ¡i request Ä‘Ãºng chuáº©n cáº§n cÃ³ 4 thá»©:

URL
URL lÃ  Ä‘á»‹a chá»‰ duy nháº¥t cho 1 request, thÆ°á»ng lÃ  Ä‘Æ°á»ng dáº«n tá»›i má»™t hÃ m xá»­ lÃ­ logic.
Method
HTTP request cÃ³ táº¥t cáº£ 9 loáº¡i method , 2 loáº¡i Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n nháº¥t lÃ  GET vÃ  POST
GET: Sá»­ dá»¥ng Ä‘á»ƒ láº¥y thÃ´ng tin tá»« server theo URI Ä‘Ã£ cung cáº¥p.
HEAD: Giá»‘ng vá»›i GET nhÆ°ng response tráº£ vá» khÃ´ng cÃ³ body, chá»‰ cÃ³ header.
POST: Gá»­i thÃ´ng tin tá»›i sever thÃ´ng qua cÃ¡c parameters HTTP.
PUT: Ghi Ä‘Ã¨ táº¥t cáº£ thÃ´ng tin cá»§a Ä‘á»‘i tÆ°á»£ng vá»›i nhá»¯ng gÃ¬ Ä‘Æ°á»£c gá»­i lÃªn.
PATCH: Ghi Ä‘Ã¨ cÃ¡c thÃ´ng tin Ä‘Æ°á»£c thay Ä‘á»•i cá»§a Ä‘á»‘i tÆ°á»£ng.
DELETE: XÃ³a resource trÃªn server.
CONNECT: Thiáº¿t láº­p má»™t káº¿t ná»‘i tá»›i server theo URI.
OPTIONS: MÃ´ táº£ cÃ¡c tÃ¹y chá»n giao tiáº¿p cho resource.
TRACE: Thá»±c hiá»‡n má»™t bÃ i test loop-back theo Ä‘Æ°á»ng dáº«n Ä‘áº¿n resource.
Headers
LÃ  nÆ¡i chá»©a cÃ¡c thÃ´ng tin cáº§n thiáº¿t cá»§a 1 request nhÆ°ng end-users khÃ´ng biáº¿t cÃ³ sá»± tá»“n táº¡i cá»§a nÃ³. VÃ­ dá»¥: Ä‘á»™ dÃ i cá»§a request body, thá»i gian gá»­i request, loáº¡i thiáº¿t bá»‹ Ä‘ang sá»­ dá»¥ng, loáº¡i Ä‘á»‹nh dáº¡ng cÃ¡i response mÃ  client cÃ³ Ä‘á»c Ä‘Æ°á»£câ€¦
Body
LÃ  nÆ¡i chá»©a thÃ´ng tin mÃ  client sáº½ Ä‘iá»n.
Vá» response
Sau khi nháº­n Ä‘Æ°á»£c request tá»« phÃ­a client, server sáº½ xá»­ lÃ½ cÃ¡i request Ä‘Ã³ vÃ  gá»­i ngÆ°á»£c láº¡i cho client 1 cÃ¡i response. Cáº¥u trÃºc cá»§a 1 response tÆ°Æ¡ng Ä‘á»‘i giá»‘ng pháº§n request nhÆ°ng Status code sáº½ thay tháº¿ cho URL vÃ  Method. TÃ³m láº¡i, nÃ³ cÃ³ cáº§u trÃºc 3 pháº§n:

Status code
Headers
Body
Pháº§n Header vÃ  body tÆ°Æ¡ng Ä‘á»‘i giá»‘ng vá»›i request.

Khi request má»™t API, cÃ³ má»™t sá»‘ status code thÆ°á»ng gáº·p nhÆ° sau:

200 OK: Tráº£ vá» thÃ nh cÃ´ng cho nhá»¯ng phÆ°Æ¡ng thá»©c GET, PUT, PATCH hoáº·c DELETE.
201 Created: Tráº£ vá» khi táº¡o thÃ nh cÃ´ng má»™t Resouce.
204 No Content: Tráº£ vá» khi xÃ³a thÃ nh cÃ´ng Resource.
304 Not Modified: Client cÃ³ thá»ƒ sá»­ dá»¥ng dá»¯ liá»‡u cache.
400 Bad Request: Request khÃ´ng há»£p lá»‡.
401 Unauthorized: Request cáº§n pháº£i cÃ³ auth.
403 Forbidden: Bá»‹ tá»« chá»‘i khÃ´ng cho phÃ©p.
404 Not Found: KhÃ´ng tÃ¬m tháº¥y resource tá»« URI.
405 Method Not Allowed: PhÆ°Æ¡ng thá»©c khÃ´ng cho phÃ©p vá»›i user hiá»‡n táº¡i.
410 Gone: Resource khÃ´ng cÃ²n tá»“n táº¡i, version cÅ© khÃ´ng cÃ²n há»— trá»£.
415 Unsupported Media Type: KhÃ´ng há»— trá»£ kiá»ƒu Resource nÃ y.
422 Unprocessable Entity: Dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c xÃ¡c thá»±c.
429 Too Many Requests: Request bá»‹ tá»« chá»‘i do bá»‹ giá»›i háº¡n.
=================================================
HTTPS (Hypertext Transfer Protocol Secure) lÃ  phiÃªn báº£n báº£o máº­t cá»§a giao thá»©c HTTP, sá»­ dá»¥ng mÃ£ hÃ³a SSL/TLS Ä‘á»ƒ táº¡o káº¿t ná»‘i an toÃ n giá»¯a trÃ¬nh duyá»‡t vÃ  website, báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m (nhÆ° máº­t kháº©u, thÃ´ng tin thanh toÃ¡n) khá»i bá»‹ Ä‘Ã¡nh cáº¯p hoáº·c can thiá»‡p, thá»ƒ hiá»‡n qua biá»ƒu tÆ°á»£ng á»• khÃ³a vÃ  Ä‘á»‹a chá»‰ báº¯t Ä‘áº§u báº±ng "https://". NÃ³ mÃ£ hÃ³a thÃ´ng tin Ä‘á»ƒ chá»‰ ngÆ°á»i gá»­i vÃ  ngÆ°á»i nháº­n cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c, ngÄƒn cháº·n tin táº·c, nhÃ  cung cáº¥p dá»‹ch vá»¥ Internet (ISP) chÃ¨n ná»™i dung Ä‘á»™c háº¡i. 
HTTPS hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
MÃ£ hÃ³a: Dá»¯ liá»‡u Ä‘Æ°á»£c mÃ£ hÃ³a (biáº¿n thÃ nh dáº¡ng khÃ³ Ä‘á»c) trÆ°á»›c khi gá»­i Ä‘i vÃ  chá»‰ cÃ³ thá»ƒ giáº£i mÃ£ bá»Ÿi mÃ¡y chá»§ vÃ  trÃ¬nh duyá»‡t cá»§a báº¡n.
SSL/TLS: Sá»­ dá»¥ng chá»©ng chá»‰ SSL (Secure Sockets Layer) hoáº·c TLS (Transport Layer Security) Ä‘á»ƒ thiáº¿t láº­p káº¿t ná»‘i an toÃ n (báº¯t tay SSL/TLS).
Cá»•ng khÃ¡c: HTTP dÃ¹ng cá»•ng 80, HTTPS dÃ¹ng cá»•ng 443 (cá»•ng báº£o máº­t). 
Táº¡i sao HTTPS quan trá»ng?
Báº£o máº­t dá»¯ liá»‡u: Báº£o vá»‡ thÃ´ng tin cÃ¡ nhÃ¢n, tÃ i chÃ­nh, Ä‘Äƒng nháº­p khá»i bá»‹ nghe lÃ©n.
Tin cáº­y & Uy tÃ­n: TÄƒng niá»m tin cho ngÆ°á»i dÃ¹ng; cÃ¡c trÃ¬nh duyá»‡t cáº£nh bÃ¡o trang HTTP lÃ  "KhÃ´ng an toÃ n".
SEO: Google vÃ  cÃ¡c cÃ´ng cá»¥ tÃ¬m kiáº¿m Æ°u tiÃªn cÃ¡c trang web HTTPS. 
CÃ¡ch nháº­n biáº¿t?
Äá»‹a chá»‰ URL báº¯t Ä‘áº§u báº±ng https:// thay vÃ¬ http://.
CÃ³ biá»ƒu tÆ°á»£ng á»• khÃ³a nhá» trÃªn thanh Ä‘á»‹a chá»‰ trÃ¬nh duyá»‡t. 


===================================================
Endpoint (Äiá»ƒm cuá»‘i) cÃ³ hai nghÄ©a chÃ­nh trong cÃ´ng nghá»‡: (1) Thiáº¿t bá»‹ váº­t lÃ½ káº¿t ná»‘i máº¡ng (mÃ¡y tÃ­nh, Ä‘iá»‡n thoáº¡i, IoT) vÃ  (2) Äá»‹a chá»‰ (URL) trong API nÆ¡i á»©ng dá»¥ng giao tiáº¿p Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u, giá»‘ng nhÆ° cÃ¡nh cá»­a truy cáº­p tÃ i nguyÃªn cá»§a dá»‹ch vá»¥. Cáº£ hai Ä‘á»u lÃ  Ä‘iá»ƒm Ä‘áº§u/cuá»‘i trong quÃ¡ trÃ¬nh truyá»n thÃ´ng tin vÃ  Ä‘á»u cáº§n Ä‘Æ°á»£c báº£o máº­t Ä‘á»ƒ trÃ¡nh rá»§i ro an ninh máº¡ng. 
1. Trong lÄ©nh vá»±c máº¡ng & báº£o máº­t (Thiáº¿t bá»‹)
LÃ  gÃ¬: Báº¥t ká»³ thiáº¿t bá»‹ nÃ o káº¿t ná»‘i vá»›i máº¡ng, Ä‘Ã³ng vai trÃ² lÃ  Ä‘iá»ƒm cuá»‘i cá»§a má»™t káº¿t ná»‘i hoáº·c luá»“ng dá»¯ liá»‡u.
VÃ­ dá»¥: MÃ¡y tÃ­nh Ä‘á»ƒ bÃ n, laptop, Ä‘iá»‡n thoáº¡i thÃ´ng minh, mÃ¡y tÃ­nh báº£ng, mÃ¡y in, mÃ¡y chá»§, thiáº¿t bá»‹ y táº¿, Ä‘á»“ng há»“ thÃ´ng minh, thiáº¿t bá»‹ IoT (Internet váº¡n váº­t).
Vai trÃ²: LÃ  nÆ¡i ngÆ°á»i dÃ¹ng truy cáº­p há»‡ thá»‘ng, chá»©a dá»¯ liá»‡u nháº¡y cáº£m, nÃªn cáº§n Ä‘Æ°á»£c báº£o vá»‡ khá»i cÃ¡c má»‘i Ä‘e dá»a an ninh máº¡ng (Endpoint Security). 
2. Trong láº­p trÃ¬nh & API (Äá»‹a chá»‰)
LÃ  gÃ¬: Má»™t Ä‘á»‹a chá»‰ (URL) cá»¥ thá»ƒ trÃªn mÃ¡y chá»§ nÆ¡i cÃ¡c á»©ng dá»¥ng gá»­i yÃªu cáº§u (request) Ä‘á»ƒ nháº­n dá»¯ liá»‡u hoáº·c thá»±c hiá»‡n hÃ nh Ä‘á»™ng, vÃ­ dá»¥ nhÆ° https://api.example.com/users.
VÃ­ dá»¥:
endpoint GET /posts: Láº¥y danh sÃ¡ch bÃ i viáº¿t.
endpoint POST /users: Táº¡o ngÆ°á»i dÃ¹ng má»›i.
Vai trÃ²: Cáº§u ná»‘i giao tiáº¿p giá»¯a cÃ¡c á»©ng dá»¥ng (client vÃ  server), Ä‘á»‹nh nghÄ©a cÃ¡c chá»©c nÄƒng mÃ  API cung cáº¥p vÃ  cÃ¡ch truy cáº­p chÃºng. 
TÃ³m láº¡i: Endpoint vá»«a lÃ  thiáº¿t bá»‹ (mÃ¡y tÃ­nh, Ä‘iá»‡n thoáº¡i) vá»«a lÃ  Ä‘á»‹a chá»‰ (URL API), Ä‘á»u lÃ  "Ä‘iá»ƒm cuá»‘i" quan trá»ng trong há»‡ thá»‘ng ká»¹ thuáº­t sá»‘, vÃ  viá»‡c quáº£n lÃ½/báº£o máº­t chÃºng lÃ  ráº¥t cáº§n thiáº¿t. 
==================================================

Trong API, Param (Parameter - Tham sá»‘) lÃ  cÃ¡c giÃ¡ trá»‹ dá»¯ liá»‡u mÃ  báº¡n gá»­i tá»« á»©ng dá»¥ng cá»§a mÃ¬nh (client) tá»›i mÃ¡y chá»§ Ä‘á»ƒ yÃªu cáº§u má»™t hÃ nh Ä‘á»™ng hoáº·c láº¥y thÃ´ng tin cá»¥ thá»ƒ; chÃºng giá»‘ng nhÆ° cÃ¡c "biáº¿n sá»‘" Ä‘á»ƒ 'nÃ³i' cho API biáº¿t báº¡n muá»‘n lÃ m gÃ¬, nhÆ° username, password, id, tÃªn_sáº£n_pháº©m, v.v., Ä‘Æ°á»£c truyá»n qua URL, thÃ¢n yÃªu cáº§u (body) hoáº·c tiÃªu Ä‘á» (header). 
Vai trÃ² cá»§a Param trong API
Cung cáº¥p thÃ´ng tin cáº§n thiáº¿t: API cáº§n cÃ¡c tham sá»‘ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh yÃªu cáº§u cá»§a báº¡n. VÃ­ dá»¥: API Ä‘Äƒng nháº­p cáº§n username vÃ  password Ä‘á»ƒ xÃ¡c thá»±c.
Lá»c dá»¯ liá»‡u: Khi yÃªu cáº§u danh sÃ¡ch sáº£n pháº©m, báº¡n cÃ³ thá»ƒ dÃ¹ng category=electronics Ä‘á»ƒ chá»‰ nháº­n sáº£n pháº©m Ä‘iá»‡n tá»­.
TÃ¹y chá»‰nh káº¿t quáº£: Gá»­i limit=10 Ä‘á»ƒ chá»‰ nháº­n 10 káº¿t quáº£ Ä‘áº§u tiÃªn. 
CÃ¡c loáº¡i Param phá»• biáº¿n
Query Parameters (Tham sá»‘ truy váº¥n): Gáº¯n vÃ o cuá»‘i URL (sau dáº¥u ?), dÃ¹ng Ä‘á»ƒ lá»c, sáº¯p xáº¿p, phÃ¢n trang.
VÃ­ dá»¥: https://api.example.com/products?category=electronics&sort=price_asc.
Path Parameters (Tham sá»‘ Ä‘Æ°á»ng dáº«n): LÃ  má»™t pháº§n cá»§a URL, dÃ¹ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh tÃ i nguyÃªn cá»¥ thá»ƒ.
VÃ­ dá»¥: https://api.example.com/products/123 (á»Ÿ Ä‘Ã¢y 123 lÃ  ID sáº£n pháº©m).
Body Parameters (Tham sá»‘ thÃ¢n yÃªu cáº§u): DÃ¹ng Ä‘á»ƒ gá»­i lÆ°á»£ng lá»›n dá»¯ liá»‡u phá»©c táº¡p (JSON, XML), thÆ°á»ng dÃ¹ng khi táº¡o hoáº·c cáº­p nháº­t tÃ i nguyÃªn (POST, PUT).
VÃ­ dá»¥: Dá»¯ liá»‡u ngÆ°á»i dÃ¹ng khi Ä‘Äƒng kÃ½, Ä‘Æ°á»£c gá»­i trong pháº§n thÃ¢n request. 
TÃ³m láº¡i, Param lÃ  cÃ¡ch báº¡n "giao tiáº¿p" vá»›i API Ä‘á»ƒ yÃªu cáº§u chÃ­nh xÃ¡c nhá»¯ng gÃ¬ báº¡n cáº§n. 
=====================================================
Props (viáº¿t táº¯t cá»§a "Properties") lÃ  cÆ¡ cháº¿ truyá»n dá»¯ liá»‡u má»™t chiá»u tá»« component cha xuá»‘ng component con trong cÃ¡c framework nhÆ° React, giÃºp component con nháº­n dá»¯ liá»‡u Ä‘áº§u vÃ o (nhÆ° tÃªn, mÃ u sáº¯c,...) Ä‘á»ƒ tÃ¹y chá»‰nh hiá»ƒn thá»‹ hoáº·c hÃ nh vi, giá»‘ng nhÆ° cÃ¡c thuá»™c tÃ­nh (attributes) trong HTML nhÆ°ng cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a tá»± do vÃ  báº¥t biáº¿n (chá»‰ Ä‘á»c, khÃ´ng Ä‘Æ°á»£c sá»­a) bÃªn trong component con. 
Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Props:
Truyá»n dá»¯ liá»‡u: LÃ  cÃ¡ch Ä‘á»ƒ component cha gá»­i thÃ´ng tin (dá»¯ liá»‡u, hÃ m) cho component con.
Báº¥t biáº¿n (Read-only): Component con chá»‰ cÃ³ thá»ƒ Ä‘á»c giÃ¡ trá»‹ cá»§a props, khÃ´ng Ä‘Æ°á»£c thay Ä‘á»•i chÃºng. Náº¿u cáº§n thay Ä‘á»•i, component cha pháº£i gá»­i láº¡i má»™t props má»›i.
TÃ¡i sá»­ dá»¥ng: GiÃºp táº¡o ra cÃ¡c component linh hoáº¡t, cÃ³ thá»ƒ dÃ¹ng á»Ÿ nhiá»u nÆ¡i vá»›i cÃ¡c dá»¯ liá»‡u Ä‘áº§u vÃ o khÃ¡c nhau, chá»‰ cáº§n thay Ä‘á»•i props lÃ  cÃ³ giao diá»‡n/chá»©c nÄƒng khÃ¡c.
Luá»“ng dá»¯ liá»‡u Ä‘Æ¡n hÆ°á»›ng: Dá»¯ liá»‡u luÃ´n cháº£y tá»« cha xuá»‘ng con, giÃºp á»©ng dá»¥ng dá»… quáº£n lÃ½ hÆ¡n. 
VÃ­ dá»¥ Ä‘Æ¡n giáº£n:
Component Cha (App): <Greeting name="Alice" />.
Component Con (Greeting): Nháº­n name lÃ  prop vÃ  hiá»ƒn thá»‹ "Hello, Alice!". 
TÃ³m láº¡i:
Props lÃ  cáº§u ná»‘i dá»¯ liá»‡u quan trá»ng nháº¥t, giÃºp cÃ¡c thÃ nh pháº§n trong á»©ng dá»¥ng React giao tiáº¿p, chia sáº» thÃ´ng tin vÃ  trá»Ÿ nÃªn linh hoáº¡t, dá»… báº£o trÃ¬. 

=================================================

installHook.js:1 SerializableStateInvariantMiddleware took 34ms, which is more than the warning threshold of 32ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.

============================================
Dáº¤U ? TRONG INTERFACE LÃ€ GÃŒ?
interface AddressSelectorProps {
  onLoginClick?: () => void;
  forceOpen?: boolean;
  onClose?: () => void;
}

ğŸ‘‰ Dáº¥u ? cÃ³ nghÄ©a lÃ : thuá»™c tÃ­nh KHÃ”NG Báº®T BUá»˜C (optional)

2ï¸âƒ£ Cá»¤ THá»‚ Tá»ªNG DÃ’NG
ğŸ”¹ onLoginClick?: () => void;

CÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng truyá»n

Náº¿u cÃ³ â†’ lÃ  function

Náº¿u khÃ´ng â†’ undefined

âœ… Há»£p lá»‡:

<AddressSelector />
<AddressSelector onLoginClick={() => console.log("login")} />

âŒ Náº¿u khÃ´ng cÃ³ ? thÃ¬ dÃ²ng dÆ°á»›i sáº½ lá»—i:

<AddressSelector /> // âŒ thiáº¿u onLoginClick

ğŸ”¹ forceOpen?: boolean;

KhÃ´ng truyá»n â†’ undefined

NhÆ°ng trong component báº¡n Ä‘Ã£ set default:

forceOpen = false

ğŸ‘‰ NÃªn luÃ´n an toÃ n

ğŸ”¹ onClose?: () => void;

CÃ³ thá»ƒ khÃ´ng cáº§n truyá»n náº¿u component khÃ´ng cáº§n Ä‘Ã³ng

3ï¸âƒ£ KHÃ”NG CÃ“ ? THÃŒ Sáº¼ NHÆ¯ THáº¾ NÃ€O?
interface AddressSelectorProps {
  onLoginClick: () => void; // âŒ Báº®T BUá»˜C
}

ğŸ‘‰ Khi dÃ¹ng:

<AddressSelector /> // âŒ TypeScript bÃ¡o lá»—i

âš ï¸ Äiá»u nÃ y ráº¥t báº¥t tiá»‡n vá»›i component tÃ¡i sá»­ dá»¥ng

=============================================================

const addressTransform = createTransform(
  // SAVE: Loáº¡i bá» cÃ¡c field khÃ´ng cáº§n thiáº¿t
  (inboundState: AddressState) => {
    const { addressData, status, error, showLocationModal, ...rest } = inboundState;

    // console.log("Saving address to localStorage:", rest);
    return rest;
  },

  //LOAD: KhÃ´i phá»¥c giÃ¡ trá»‹ máº·c Ä‘á»‹nh cho cÃ¡c field Ä‘Ã£ loáº¡i bá»
  (outboundState: Partial<AddressState>): AddressState => {

    const result = {
      ...outboundState,
      
      // KhÃ´i phá»¥c giÃ¡ trá»‹ máº·c Ä‘á»‹nh
      addressData: [],
      status: "idle" as const, // Type assertion Ä‘á»ƒ giá»¯ nguyÃªn kiá»ƒu
      error: null,
      showLocationModal: false,
    } as AddressState;

    // console.log("Loading address from localStorage:", result);
    return result;
  },

  { whitelist: ["address"] }
);
==================================================
CÃ¡c thÃ nh pháº§n chÃ­nh cá»§a RESTful API: TrÃ¬nh bÃ y cÃ¡c yáº¿u tá»‘ cáº¥u thÃ nh RESTful API nhÆ° resource, method, endpoint, vÃ  status code.

200 OK â€“ ThÃ nh cÃ´ng
201 Created â€“ Táº¡o má»›i thÃ nh cÃ´ng
400 Bad Request â€“ Lá»—i cÃº phÃ¡p yÃªu cáº§u
401 Unauthorized â€“ ChÆ°a xÃ¡c thá»±c
404 Not Found â€“ KhÃ´ng tÃ¬m tháº¥y tÃ i nguyÃªn
500 Internal Server Error â€“ Lá»—i tá»« phÃ­a server


Khi request má»™t API, cÃ³ má»™t sá»‘ status code thÆ°á»ng gáº·p nhÆ° sau:

200 OK: Tráº£ vá» thÃ nh cÃ´ng cho nhá»¯ng phÆ°Æ¡ng thá»©c GET, PUT, PATCH hoáº·c DELETE.
201 Created: Tráº£ vá» khi táº¡o thÃ nh cÃ´ng má»™t Resouce.
204 No Content: Tráº£ vá» khi xÃ³a thÃ nh cÃ´ng Resource.
304 Not Modified: Client cÃ³ thá»ƒ sá»­ dá»¥ng dá»¯ liá»‡u cache.
400 Bad Request: Request khÃ´ng há»£p lá»‡.
401 Unauthorized: Request cáº§n pháº£i cÃ³ auth.
403 Forbidden: Bá»‹ tá»« chá»‘i khÃ´ng cho phÃ©p.
404 Not Found: KhÃ´ng tÃ¬m tháº¥y resource tá»« URI.
405 Method Not Allowed: PhÆ°Æ¡ng thá»©c khÃ´ng cho phÃ©p vá»›i user hiá»‡n táº¡i.
410 Gone: Resource khÃ´ng cÃ²n tá»“n táº¡i, version cÅ© khÃ´ng cÃ²n há»— trá»£.
415 Unsupported Media Type: KhÃ´ng há»— trá»£ kiá»ƒu Resource nÃ y.
422 Unprocessable Entity: Dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c xÃ¡c thá»±c.
429 Too Many Requests: Request bá»‹ tá»« chá»‘i do bá»‹ giá»›i háº¡n.

==============================================================
const AddressSelector: React.FC<AddressSelectorProps> = ({ onLoginClick, forceOpen = false, onClose }) => {
  // const dispatch = useDispatch<any>();
  const dispatch = useAppDispatch();
  // const addressData = useSelector(selectAddressData);
  const addressData = useAppSelector(selectAddressData);
  // const status = useSelector(selectAddressStatus);
  const status = useAppSelector(selectAddressStatus);
  // const error = useSelector(selectAddressError);
  const error = useAppSelector(selectAddressError);
  // const selectedAddress = useSelector(selectSelectedAddress);
  const selectedAddress = useAppSelector(selectSelectedAddress);
  // const locationType = useSelector(selectLocationType);
  const locationType = useAppSelector(selectLocationType);
  // const selectedCity = useSelector(selectSelectedCity);
  const selectedCity = useAppSelector(selectSelectedCity);
  // const selectedDistrict = useSelector(selectSelectedDistrict);
  const selectedDistrict = useAppSelector(selectSelectedDistrict);
  // const selectedWard = useSelector(selectSelectedWard);
  const selectedWard = useAppSelector(selectSelectedWard);
  // const showLocationModal = useSelector(selectShowLocationModal);
  const showLocationModal = useAppSelector(selectShowLocationModal);
  // Láº¥y danh sÃ¡ch districts vÃ  wards tá»« selectors
  const districts = useAppSelector(selectDistrictsByCity);
  const wards = useAppSelector(selectWardsByDistrict);

============================================================
export const fetchAddressData = createAsyncThunk<City[], void, { rejectValue: string }>(
  "address/fetchAddressData",
  async (_, { rejectWithValue }) => {
    try {
      const response = await axios.get<City[]>(
        "https://provinces.open-api.vn/api/?depth=3"
      );
      return response.data;
    } catch (error) // type error :unknown
    //náº¿u type:any Lá»—i runtime náº¿u error lÃ  string, number, null...
    {
      // return rejectWithValue(error.response.data)
      //náº¿u error k pháº£i instance of Error thÃ¬ ta tráº£ vá» message máº·c Ä‘á»‹nh
      return rejectWithValue( error instanceof Error ? error.message : "Failed to fetch address data" );
    }
  }
);

====================================================
const persistConfig: any = {
  key: "root",
  storage,
  whitelist: ["cart", "address", "checkout"], 
  transforms: [addressTransform],
  throttle: 100, // LÆ°u localStorage tá»‘i Ä‘a 1 láº§n/100ms
  // debug: true, // Enable debug logging
};

======================================
Trong code cá»§a báº¡n:

_ = tham sá»‘ Ä‘áº§u tiÃªn (khÃ´ng sá»­ dá»¥ng vÃ¬ ArgType lÃ  void)
{ rejectWithValue } = destructuring tá»« thunkAPI
Khi dispatch: dispatch(fetchAddressData()) - khÃ´ng cáº§n truyá»n gÃ¬


ÄÃ¢y lÃ  hÃ m async Ä‘Æ°á»£c truyá»n vÃ o createAsyncThunk cá»§a Redux Toolkit.
data (tham sá»‘ Ä‘áº§u tiÃªn): LÃ  payload hoáº·c giÃ¡ trá»‹ mÃ  báº¡n truyá»n vÃ o khi gá»i action async (vÃ­ dá»¥: dispatch(login('user@example.com'))).
{ rejectWithValue }: LÃ  má»™t tiá»‡n Ã­ch (utility) do Redux Toolkit cung cáº¥p, cho phÃ©p báº¡n tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng lá»—i tÃ¹y chá»‰nh, thay vÃ¬ chá»‰ lÃ  reject(error) thÃ´ng thÆ°á»ng. Lá»—i nÃ y sáº½ Ä‘Æ°á»£c gá»­i Ä‘áº¿n rejected action vá»›i payload lÃ  giÃ¡ trá»‹ báº¡n truyá»n vÃ o rejectWithValue.
==============================
Trong Ä‘oáº¡n mÃ£ trÃªn, City[] Ä‘Ã³ng vai trÃ² lÃ  má»™t TypeScript Type Annotation (Ä‘á»‹nh nghÄ©a kiá»ƒu dá»¯ liá»‡u) Ä‘á»ƒ mÃ´ táº£ cáº¥u trÃºc cá»§a dá»¯ liá»‡u mÃ  hÃ m sáº½ tráº£ vá».
Cá»¥ thá»ƒ, City[] cÃ³ Ã½ nghÄ©a sau:
Dáº¡ng máº£ng (Array): Cáº·p ngoáº·c vuÃ´ng [] cho biáº¿t Ä‘Ã¢y lÃ  má»™t danh sÃ¡ch (máº£ng) chá»©a nhiá»u Ä‘á»‘i tÆ°á»£ng cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  City.
Kiá»ƒu dá»¯ liá»‡u City: ÄÃ¢y lÃ  má»™t interface hoáº·c type (thÆ°á»ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a á»Ÿ má»™t file khÃ¡c) Ä‘áº¡i diá»‡n cho cáº¥u trÃºc cá»§a má»™t Ä‘Æ¡n vá»‹ hÃ nh chÃ­nh (ThÃ nh phá»‘/Tá»‰nh) tá»« API.
Vá»‹ trÃ­ trong createAsyncThunk:
NÃ³ xÃ¡c Ä‘á»‹nh kiá»ƒu cá»§a dá»¯ liá»‡u tráº£ vá» khi Thunk thÃ nh cÃ´ng (fulfilled).
NÃ³ giÃºp TypeScript thá»±c hiá»‡n Type Checking: Äáº£m báº£o response.data tá»« axios pháº£i khá»›p vá»›i cáº¥u trÃºc cá»§a City[]. 
Cáº¥u trÃºc dá»± Ä‘oÃ¡n cá»§a City
Dá»±a vÃ o API provinces.open-api.vn vá»›i depth=3, má»™t Ä‘á»‘i tÆ°á»£ng City thÆ°á»ng sáº½ cÃ³ cáº¥u trÃºc nhÆ° sau:
typescript
interface City {
  name: string;
  code: number;
  division_type: string;
  codename: string;
  phone_code: number;
  districts: District[]; // Danh sÃ¡ch cÃ¡c Quáº­n/Huyá»‡n bÃªn trong
}
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

TÃ³m láº¡i
City[] giÃºp trÃ¬nh biÃªn dá»‹ch vÃ  láº­p trÃ¬nh viÃªn biáº¿t ráº±ng: "HÃ m fetchAddressData nÃ y sau khi cháº¡y xong sáº½ tráº£ vá» má»™t máº£ng cÃ¡c Tá»‰nh/ThÃ nh phá»‘, má»—i pháº§n tá»­ trong máº£ng Ä‘Ã³ tuÃ¢n thá»§ cÃ¡c thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng City".

==================================
addressSlice.ts , AddressSelector.tsx , store.ts, syncTabs.ts
hooks.ts , checkoutSlice.ts , cartSlice.ts , priceUtils.ts, App.tsx, index.tsx, SearchBar.tsx , Login.tsx

há»c vÃ  sá»­ dá»¥ng typeScript, 

táº¡o code .ts tÆ°Æ¡ng á»©ng tá»« cÃ¡c code .js báº¯t buá»™c pháº£i chuyá»ƒn sang chuáº©n cáº¥u trÃºc ts á»Ÿ dÆ°á»›i Ä‘Ã¢y vÃ  váº«n pháº£i giá»¯ nguyÃªn file code js cÅ© : SearchBar.tsx , Login.tsx

Khi NÃ€O nÃªn chuyá»ƒn sang TypeScript?
 NÃªn chuyá»ƒn:
File má»›i: Táº¡o file má»›i thÃ¬ nÃªn dÃ¹ng .ts/.tsx
File phá»©c táº¡p: Logic business quan trá»ng
API calls: Xá»­ lÃ½ data tá»« server
Redux slices: State management
Shared utilities: Functions Ä‘Æ°á»£c dÃ¹ng nhiá»u nÆ¡i
Type definitions: Interfaces, types
 CÃ³ thá»ƒ Ä‘á»ƒ JavaScript:
File Ä‘Æ¡n giáº£n: Chá»‰ cÃ³ UI logic cÆ¡ báº£n
Prototype code: Code thá»­ nghiá»‡m
Legacy code: Code cÅ© hoáº¡t Ä‘á»™ng tá»‘t
Third-party code: ThÆ° viá»‡n bÃªn ngoÃ i

 PRIORITY 1 - Core Files (4 files):
src/index.js â†’ src/index.tsx
src/App.jsx â†’ src/App.tsx
src/store/store.js â†’ src/store.ts
src/utils/ (2 files)

 PRIORITY 2 - Complex Components (8 files):
CheckoutForm.jsx, Login.jsx, SearchBar.jsx, Header.jsx
FlashSale.jsx, TopDeals.jsx, SuggestedProducts.jsx

 PRIORITY 3 - Pages (13 files):
Main pages: Home.jsx, CartPage.jsx, ProductDetailPage.jsx
Feature pages: CategoryPage.jsx, FlashSalePage.jsx, etc.

 PRIORITY 4 - UI Components (16 files):
Layout: Banner.jsx, Footer.jsx, HeroSlider.jsx
Features: FeaturedBrands.jsx, MiniCategories.jsx, etc.

 PRIORITY 5 - Data Files (6 files):
src/data/ - Táº¥t cáº£ data files
------------------------------------
1. PhÃ¢n biá»‡t Class vÃ  Object
Class (Lá»›p) - Báº£n thiáº¿t káº¿
Class lÃ  má»™t báº£n thiáº¿t káº¿ (blueprint) hoáº·c khuÃ´n máº«u Ä‘á»ƒ táº¡o ra cÃ¡c object.

typescript
// Class lÃ  báº£n thiáº¿t káº¿
class Person {
  // Thuá»™c tÃ­nh (properties)
  name: string;
  age: number;
  
  // Constructor - hÃ m khá»Ÿi táº¡o
  constructor(name: string, age: number) {
    this.name = name;
    this.age = age;
  }
  
  // PhÆ°Æ¡ng thá»©c (methods)
  greet() {
    return `Xin chÃ o, tÃ´i lÃ  ${this.name}`;
  }
}
Object (Äá»‘i tÆ°á»£ng) - Thá»ƒ hiá»‡n cá»¥ thá»ƒ
Object lÃ  má»™t thá»ƒ hiá»‡n cá»¥ thá»ƒ (instance) Ä‘Æ°á»£c táº¡o ra tá»« class.

typescript
// Object lÃ  thá»ƒ hiá»‡n cá»¥ thá»ƒ tá»« class
const person1 = new Person("Nguyá»…n VÄƒn A", 25);
const person2 = new Person("Tráº§n Thá»‹ B", 30);
console.log(person1.greet());  // "Xin chÃ o, tÃ´i lÃ  Nguyá»…n VÄƒn A"
console.log(person2.greet());  // "Xin chÃ o, tÃ´i lÃ  Tráº§n Thá»‹ B"
So sÃ¡nh trá»±c quan
Class	Object
Báº£n thiáº¿t káº¿ nhÃ 	NgÃ´i nhÃ  thá»±c táº¿
CÃ´ng thá»©c lÃ m bÃ¡nh	Chiáº¿c bÃ¡nh Ä‘Ã£ lÃ m
KhuÃ´n Ä‘Ãºc	Sáº£n pháº©m Ä‘Ãºc ra
Äá»‹nh nghÄ©a	Thá»ƒ hiá»‡n cá»¥ thá»ƒ
typescript
// Class = KhuÃ´n máº«u
class Car {
  brand: string;
  model: string;
  
  constructor(brand: string, model: string) {
    this.brand = brand;
    this.model = model;
  }
}
// Objects = CÃ¡c xe cá»¥ thá»ƒ Ä‘Æ°á»£c táº¡o tá»« khuÃ´n máº«u
const car1 = new Car("Toyota", "Camry");    // Object 1
const car2 = new Car("Honda", "Civic");     // Object 2
const car3 = new Car("BMW", "X5");          // Object 3
2. CÃ¡c kiá»ƒu dá»¯ liá»‡u trong JavaScript/TypeScript
A. Kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (Primitive Types)
ÄÃ¢y lÃ  cÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n, khÃ´ng pháº£i object.

typescript
// 1. String - Chuá»—i
let name: string = "Nguyá»…n VÄƒn A";
let message: string = 'Hello World';
// 2. Number - Sá»‘
let age: number = 25;
let price: number = 99.99;
let negative: number = -10;
// 3. Boolean - ÄÃºng/Sai
let isActive: boolean = true;
let isCompleted: boolean = false;
// 4. Null - GiÃ¡ trá»‹ rá»—ng
let emptyValue: null = null;
// 5. Undefined - ChÆ°a Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹
let notAssigned: undefined = undefined;
// 6. Symbol - GiÃ¡ trá»‹ duy nháº¥t (ES6+)
let uniqueId: symbol = Symbol("id");
// 7. BigInt - Sá»‘ nguyÃªn lá»›n (ES2020+)
let bigNumber: bigint = 9007199254740991n;
B. Kiá»ƒu dá»¯ liá»‡u phá»©c táº¡p (Reference Types) - ÄÃ‚Y LÃ€ OBJECT
typescript
// 1. Object - Äá»‘i tÆ°á»£ng
let person: object = {
  name: "John",
  age: 30
};
// 2. Array - Máº£ng (lÃ  má»™t loáº¡i object Ä‘áº·c biá»‡t)
let numbers: number[] = [1, 2, 3, 4, 5];
let fruits: string[] = ["apple", "banana", "orange"];
// 3. Function - HÃ m (cÅ©ng lÃ  object)
function greet(name: string): string {
  return `Hello ${name}`;
}
// 4. Date - NgÃ y thÃ¡ng (object)
let today: Date = new Date();
// 5. RegExp - Biá»ƒu thá»©c chÃ­nh quy (object)
let pattern: RegExp = /[a-z]+/;
// 6. Error - Lá»—i (object)
let error: Error = new Error("Something went wrong");
3. VÃ­ dá»¥ thá»±c táº¿ vá»›i Class vÃ  Object
VÃ­ dá»¥ 1: Class Error
typescript
// Error lÃ  má»™t class cÃ³ sáºµn trong JavaScript
class Error {
  name: string;
  message: string;
  
  constructor(message: string) {
    this.name = "Error";
    this.message = message;
  }
}
// Táº¡o object tá»« class Error
const myError = new Error("File not found");  // Object
console.log(myError instanceof Error);  // true - myError lÃ  object cá»§a class Error
console.log(myError.message);          // "File not found"
VÃ­ dá»¥ 2: Class tá»± Ä‘á»‹nh nghÄ©a
typescript
// Äá»‹nh nghÄ©a class
class Product {
  id: number;
  name: string;
  price: number;
  
  constructor(id: number, name: string, price: number) {
    this.id = id;
    this.name = name;
    this.price = price;
  }
  
  getDiscountPrice(discount: number): number {
    return this.price * (1 - discount / 100);
  }
  
  getInfo(): string {
    return `${this.name} - ${this.price}Ä‘`;
  }
}
// Táº¡o cÃ¡c object tá»« class
const product1 = new Product(1, "iPhone 15", 25000000);
const product2 = new Product(2, "Samsung S24", 20000000);
console.log(product1.getInfo());              // "iPhone 15 - 25000000Ä‘"
console.log(product1.getDiscountPrice(10));   // 22500000
console.log(product1 instanceof Product);     // true
console.log(product2 instanceof Product);     // true
4. Kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u
A. Kiá»ƒm tra Primitive Types - dÃ¹ng typeof
typescript
console.log(typeof "Hello");        // "string"
console.log(typeof 123);            // "number"
console.log(typeof true);           // "boolean"
console.log(typeof undefined);      // "undefined"
console.log(typeof null);           // "object" (Ä‘Ã¢y lÃ  bug lá»‹ch sá»­ cá»§a JS)
console.log(typeof Symbol("id"));   // "symbol"
B. Kiá»ƒm tra Object/Class - dÃ¹ng instanceof
typescript
const myDate = new Date();
const myError = new Error("Oops");
const myArray = [1, 2, 3];
console.log(myDate instanceof Date);      // true
console.log(myError instanceof Error);    // true
console.log(myArray instanceof Array);    // true
console.log(myDate instanceof Error);     // false
console.log(myError instanceof Date);     // false
5. Báº£ng tá»•ng há»£p
Primitive vs Reference Types
Äáº·c Ä‘iá»ƒm	Primitive Types	Reference Types (Objects)
LÆ°u trá»¯	GiÃ¡ trá»‹ trá»±c tiáº¿p	Tham chiáº¿u Ä‘áº¿n vÃ¹ng nhá»›
So sÃ¡nh	So sÃ¡nh giÃ¡ trá»‹	So sÃ¡nh Ä‘á»‹a chá»‰ bá»™ nhá»›
Kiá»ƒm tra	typeof	instanceof
VÃ­ dá»¥	string, number, boolean	Object, Array, Date, Error
CÃ³ thá»ƒ thay Ä‘á»•i	KhÃ´ng (immutable)	CÃ³ (mutable)
VÃ­ dá»¥ vá» sá»± khÃ¡c biá»‡t
typescript
// PRIMITIVE - So sÃ¡nh giÃ¡ trá»‹
let a = 5;
let b = 5;
console.log(a === b);  // true (cÃ¹ng giÃ¡ trá»‹)
// OBJECT - So sÃ¡nh tham chiáº¿u
let obj1 = { name: "John" };
let obj2 = { name: "John" };
console.log(obj1 === obj2);  // false (khÃ¡c Ä‘á»‹a chá»‰ bá»™ nhá»›)
let obj3 = obj1;
console.log(obj1 === obj3);  // true (cÃ¹ng Ä‘á»‹a chá»‰ bá»™ nhá»›)
6. Ãp dá»¥ng vÃ o code cá»§a báº¡n
typescript
catch (error) {  // error cÃ³ thá»ƒ lÃ  báº¥t cá»© thá»© gÃ¬
  // Kiá»ƒm tra xem error cÃ³ pháº£i lÃ  object cá»§a class Error khÃ´ng
  if (error instanceof Error) {
    // Náº¿u Ä‘Ãºng, error cÃ³ thuá»™c tÃ­nh .message
    return rejectWithValue(error.message);
  }
  
  // Náº¿u khÃ´ng pháº£i Error object (cÃ³ thá»ƒ lÃ  string, number, object khÃ¡c...)
  return rejectWithValue("Failed to fetch address data");
}
CÃ¡c trÆ°á»ng há»£p cÃ³ thá»ƒ xáº£y ra:
typescript
// TrÆ°á»ng há»£p 1: Error object
throw new Error("Network error");
// â†’ error instanceof Error = true
// â†’ Tráº£ vá»: "Network error"
// TrÆ°á»ng há»£p 2: String
throw "Something went wrong";
// â†’ error instanceof Error = false
// â†’ Tráº£ vá»: "Failed to fetch address data"
// TrÆ°á»ng há»£p 3: Object thÃ´ng thÆ°á»ng
throw { code: 500, msg: "Server error" };
// â†’ error instanceof Error = false
// â†’ Tráº£ vá»: "Failed to fetch address data"
TÃ³m táº¯t
Class: Báº£n thiáº¿t káº¿, khuÃ´n máº«u (blueprint)
Object: Thá»ƒ hiá»‡n cá»¥ thá»ƒ Ä‘Æ°á»£c táº¡o tá»« class (instance)
Primitive Types: string, number, boolean, null, undefined, symbol, bigint
Reference Types: Object, Array, Function, Date, Error, RegExp (táº¥t cáº£ Ä‘á»u lÃ  object)
Kiá»ƒm tra: typeof cho primitive, instanceof cho object/class

========================================
1. instanceof Error - Kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u
instanceof lÃ  má»™t toÃ¡n tá»­ trong JavaScript/TypeScript dÃ¹ng Ä‘á»ƒ kiá»ƒm tra xem má»™t object cÃ³ pháº£i lÃ  instance (thá»ƒ hiá»‡n) cá»§a má»™t class/constructor cá»¥ thá»ƒ hay khÃ´ng.


instanceof	ToÃ¡n tá»­ kiá»ƒm tra xem object cÃ³ pháº£i lÃ  instance cá»§a má»™t class khÃ´ng


CÃº phÃ¡p:

typescript
object instanceof Constructor
Tráº£ vá»:

true náº¿u object lÃ  instance cá»§a Constructor
false náº¿u khÃ´ng pháº£i

Náº¿u error lÃ  má»™t instance cá»§a class Error (tá»©c lÃ  má»™t object lá»—i thá»±c sá»±)
ThÃ¬ tráº£ vá» error.message (thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ)
Náº¿u khÃ´ng tráº£ vá» chuá»—i máº·c Ä‘á»‹nh "Failed to fetch address data"

âŒ KhÃ´ng kiá»ƒm tra (Nguy hiá»ƒm):
typescript
catch (error: any) {
  return rejectWithValue(error.message);  
  // Lá»—i runtime náº¿u error lÃ  string, number, null...
}
âœ… Kiá»ƒm tra vá»›i instanceof:
typescript
catch (error: unknown) {
  return rejectWithValue(
    error instanceof Error ? error.message : "Failed to fetch"
  );
  // An toÃ n, luÃ´n tráº£ vá» string
}


any cho phÃ©p báº¡n lÃ m má»i thá»© mÃ  khÃ´ng cáº§n kiá»ƒm tra kiá»ƒu (bá» qua viá»‡c kiá»ƒm tra kiá»ƒu), trong khi unknown yÃªu cáº§u báº¡n pháº£i xÃ¡c minh kiá»ƒu (type assertion) hoáº·c thu háº¹p kiá»ƒu (type narrowing) trÆ°á»›c khi thá»±c hiá»‡n báº¥t ká»³ thao tÃ¡c nÃ o, khiáº¿n nÃ³ an toÃ n hÆ¡n nhiá»u vÃ  Ä‘Æ°á»£c khuyáº¿n nghá»‹ dÃ¹ng khi khÃ´ng biáº¿t kiá»ƒu dá»¯ liá»‡u, cÃ²n any chá»‰ dÃ¹ng khi cáº§n "thoÃ¡t" khá»i há»‡ thá»‘ng kiá»ƒu cá»§a TypeScript. 

any
TÃ­nh cháº¥t: NhÆ° má»™t "lá»— Ä‘en" kiá»ƒu dá»¯ liá»‡u, cÃ³ thá»ƒ gÃ¡n cho báº¥t ká»³ giÃ¡ trá»‹ nÃ o vÃ  cÃ³ thá»ƒ thá»±c hiá»‡n má»i phÃ©p toÃ¡n lÃªn nÃ³.
An toÃ n kiá»ƒu: KhÃ´ng an toÃ n, lÃ m suy yáº¿u hoÃ n toÃ n kháº£ nÄƒng kiá»ƒm tra cá»§a TypeScript.

unknown
TÃ­nh cháº¥t: Giá»‘ng nhÆ° any á»Ÿ chá»— cÃ³ thá»ƒ gÃ¡n báº¥t ká»³ giÃ¡ trá»‹ nÃ o cho nÃ³, nhÆ°ng láº¡i cá»±c ká»³ háº¡n cháº¿ cÃ¡c thao tÃ¡c.
An toÃ n kiá»ƒu: Ráº¥t an toÃ n. Báº¡n pháº£i nÃ³i rÃµ kiá»ƒu dá»¯ liá»‡u cá»§a nÃ³ báº±ng typeof, instanceof hoáº·c assertion (nhÆ° as string) trÆ°á»›c khi sá»­ dá»¥ng.

Khi nÃ o dÃ¹ng?
DÃ¹ng unknown: Khi báº¡n nháº­n dá»¯ liá»‡u tá»« bÃªn ngoÃ i (API, localStorage) mÃ  chÆ°a biáº¿t cháº¯c cháº¯n kiá»ƒu cá»§a nÃ³ vÃ  muá»‘n TypeScript kiá»ƒm tra tÃ­nh an toÃ n trÆ°á»›c khi dÃ¹ng. ÄÃ¢y lÃ  cÃ¡ch tiáº¿p cáº­n khuyáº¿n khÃ­ch.
DÃ¹ng any: Chá»‰ dÃ¹ng khi báº¡n thá»±c sá»± cáº§n "táº¯t" kiá»ƒm tra kiá»ƒu, vÃ­ dá»¥ khi viáº¿t code thá»­ nghiá»‡m nhanh hoáº·c khi tÆ°Æ¡ng tÃ¡c vá»›i thÆ° viá»‡n cÅ© khÃ´ng cÃ³ kiá»ƒu, vÃ¬ nÃ³ lÃ m máº¥t Ä‘i lá»£i Ã­ch cá»§a TypeScript. 
-------------------------------------------------
TrÆ°á»›c khi chÃºng ta tÃ¬m hiá»ƒu reselect cÃ³ tÃ¡c dá»¥ng gÃ¬ thÃ¬ trÆ°á»›c tiÃªn, chÃºng ta pháº£i hiá»ƒu Ä‘Æ°á»£c selector lÃ  gÃ¬ ?. selector cÃ³ thá»ƒ hiá»ƒu lÃ  má»™t Ä‘oáº¡n logic Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ­nh toÃ¡n ra má»™t giÃ¡ trá»‹ nÃ o Ä‘Ã³ tá»« cÃ¡c giÃ¡ trá»‹ cÃ³ sáºµn, hoáº·c chá»‰ Ä‘Æ¡n giáº£n lÃ  láº¥y má»™t giÃ¡ trá»‹ tá»« má»™t giÃ¡ trá»‹ cÃ³ sáºµn.

Trong má»™t á»©ng dá»¥ng React cÃ³ sá»­ dá»¥ng Redux, ChÃºng ta hoÃ n toÃ n cÃ³ thá»ƒ viáº¿t cÃ¡c selector cá»§a riÃªng mÃ¬nh Ä‘á»ƒ láº¥y hoáº·c tÃ­nh toÃ¡n má»™t giÃ¡ trá»‹ tá»« cÃ¡c giÃ¡ trá»‹ trong store cá»§a redux Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng chÃºng trong function mapStateToProps. VD:

// *** selector dÃ¹ng Ä‘á»ƒ láº¥y property 'users' tá»« store cá»§a redux
const getUsers = state => state.users;

// *** selector dÃ¹ng Ä‘á»ƒ tÃ­nh toÃ¡n má»™t giÃ¡ trá»‹ dá»±a trÃªn property 'users' cá»§a store
const getUserViaId = (state, id) => state.users.map(user => user.id === id);

Tháº¿ nhÆ°ng, má»—i khi users Ä‘Æ°á»£c update, hÃ m getUserViaId vÃ  getUser sáº½ pháº£i tÃ­nh toÃ¡n láº¡i. ÄÃ¢y chÃ­nh lÃ  váº¥n Ä‘á» cá»§a cÃ¡c selector Ä‘Æ¡n giáº£n, khi users trá»Ÿ nÃªn lá»›n hÆ¡n, hoáº·c viá»‡c tÃ­nh toÃ¡n bÃªn trong getUserViaId phá»©c táº¡p hÆ¡n, tá»‘n nhiá»u tÃ i nguyÃªn hÆ¡n vÃ  káº¿t quáº£ lÃ  app cá»§a chÃºng ta sáº½ ... cháº­m hÆ¡n ğŸŒğŸŒğŸŒ. ÄÃ¢y chÃ­nh lÃ  lÃºc thÆ° viá»‡n Reselect toáº£ sÃ¡ng. ğŸ’¨ğŸ’¨ğŸ’¨

reselector Ä‘Æ¡n giáº£n lÃ  má»™t thÆ° viá»‡n giÃºp chÃºng ta giáº£i quyáº¿t Ä‘Æ°á»£c váº¥n Ä‘á» á»Ÿ trÃªn báº±ng cÃ¡ch so sÃ¡nh cÃ¡c tham sá»‘ cá»§a má»™t selector (Ä‘Æ°á»£c táº¡o báº±ng thÆ° viá»‡n reselect) vá»›i nhau, selector Ä‘Ã³ sáº½ chá»‰ thá»±c hiá»‡n tÃ­nh toÃ¡n náº¿u cÃ¡c tham sá»‘ cÅ© khÃ¡c vá»›i tham sá»‘ má»›i.

----------------------------------------
addCase will run the reducer if the dispatched action's action.type field exactly matches the string that you provide
addMatcher will run the reducer if the callback function you provide returns true, and it's up to you to decide how the matching behavior works. Typically this is done by looking to see if the action.type field is a partial match, such as return action.type.endsWith("/pending")

PhÆ°Æ¡ng thá»©c `addCase` sáº½ cháº¡y reducer náº¿u trÆ°á»ng `action.type` cá»§a action Ä‘Æ°á»£c gá»­i Ä‘i khá»›p chÃ­nh xÃ¡c vá»›i chuá»—i báº¡n cung cáº¥p.
PhÆ°Æ¡ng thá»©c `addMatcher` sáº½ cháº¡y reducer náº¿u hÃ m callback báº¡n cung cáº¥p tráº£ vá» `true`, vÃ  báº¡n sáº½ quyáº¿t Ä‘á»‹nh cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a viá»‡c khá»›p. ThÃ´ng thÆ°á»ng, Ä‘iá»u nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch kiá»ƒm tra xem trÆ°á»ng `action.type` cÃ³ khá»›p má»™t pháº§n hay khÃ´ng, vÃ­ dá»¥ nhÆ° `return action.type.endsWith("/pending")`.


====================
Káº¿t luáº­n:

City, District, Ward lÃ  tÃªn interface (do developer Ä‘áº·t Ä‘á»ƒ dá»… hiá»ƒu)
API chá»‰ cÃ³ districts vÃ  wards lÃ  property names
KhÃ´ng cÃ³ property tÃªn city trong JSON response! ğŸ¯
============================

throttle (Ä‘Æ¡n vá»‹: milliseconds)
TÃ¡c dá»¥ng: Giá»›i háº¡n táº§n suáº¥t ghi dá»¯ liá»‡u vÃ o localStorage

GiÃ¡ trá»‹: 100 = 100 milliseconds (0.1 giÃ¢y)
Ã nghÄ©a: Redux state chá»‰ Ä‘Æ°á»£c lÆ°u vÃ o localStorage tá»‘i Ä‘a 1 láº§n má»—i 100ms
Táº¡i sao cáº§n throttle?
Khi báº¡n dispatch nhiá»u actions liÃªn tiáº¿p (vÃ­ dá»¥: thÃªm 5 sáº£n pháº©m vÃ o giá» hÃ ng trong 1 giÃ¢y):

âŒ KhÃ´ng cÃ³ throttle:
Action 1 â†’ LÆ°u localStorage (0ms)
Action 2 â†’ LÆ°u localStorage (50ms)
Action 3 â†’ LÆ°u localStorage (100ms)
Action 4 â†’ LÆ°u localStorage (150ms)
Action 5 â†’ LÆ°u localStorage (200ms)
â†’ 5 láº§n ghi = tá»‘n performance, cÃ³ thá»ƒ gÃ¢y lag UI

âœ… CÃ³ throttle: 100:
Action 1 â†’ LÆ°u localStorage (0ms)
Action 2 â†’ Bá» qua (50ms - chÆ°a Ä‘á»§ 100ms)
Action 3 â†’ LÆ°u localStorage (100ms)
Action 4 â†’ Bá» qua (150ms - chÆ°a Ä‘á»§ 100ms)
Action 5 â†’ LÆ°u localStorage (200ms)
â†’ 3 láº§n ghi = tiáº¿t kiá»‡m performance

=================================
instanceof kiá»ƒm tra xem error cÃ³ pháº£i lÃ  instance cá»§a class Error hay khÃ´ng:

CÃ¡ch hoáº¡t Ä‘á»™ng:
Náº¿u error instanceof Error === true:
error lÃ  má»™t Error object (hoáº·c subclass cá»§a Error)
CÃ³ thá»ƒ an toÃ n truy cáº­p error.message
Tráº£ vá»: error.message (thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ)
Náº¿u error instanceof Error === false:
error cÃ³ thá»ƒ lÃ  string, number, object thÃ´ng thÆ°á»ng, v.v.
KhÃ´ng cÃ³ thuá»™c tÃ­nh .message Ä‘Ã¡ng tin cáº­y
Tráº£ vá»: "Failed to fetch address data" (fallback message)
=======================================

Báº¡n dÃ¹ng createAsyncThunk Ä‘á»ƒ gá»i API trong Redux Toolkit vÃ¬ nÃ³ Ä‘Æ¡n giáº£n hÃ³a viá»‡c xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ (nhÆ° gá»i API) báº±ng cÃ¡ch tá»± Ä‘á»™ng táº¡o ra cÃ¡c action types (pending, fulfilled, rejected) vÃ  xá»­ lÃ½ cÃ¡c tráº¡ng thÃ¡i nÃ y trong slice [1].
TrÆ°á»›c Ä‘Ã¢y, trong Redux truyá»n thá»‘ng, báº¡n cáº§n dÃ¹ng cÃ¡c middleware nhÆ° redux-thunk hoáº·c redux-saga, Ä‘á»“ng thá»i pháº£i tá»± Ä‘á»‹nh nghÄ©a vÃ  gá»­i Ä‘i ba action riÃªng biá»‡t (trÆ°á»›c khi gá»i, khi thÃ nh cÃ´ng, khi tháº¥t báº¡i) [1]. createAsyncThunk Ä‘Ã³ng gÃ³i toÃ n bá»™ logic nÃ y vÃ o má»™t hÃ m duy nháº¥t, giÃºp code sáº¡ch sáº½ vÃ  dá»… báº£o trÃ¬ hÆ¡n, Ä‘áº·c biá»‡t khi lÃ m viá»‡c vá»›i createSlice [1]. 
Cá»¥ thá»ƒ hÆ¡n:
Tá»± Ä‘á»™ng xá»­ lÃ½ vÃ²ng Ä‘á»i request: NÃ³ tá»± Ä‘á»™ng dispatch cÃ¡c action pending, fulfilled, vÃ  rejected trong cÃ¡c giai Ä‘oáº¡n khÃ¡c nhau cá»§a lá»i gá»i API [1].
TÃ­ch há»£p vá»›i extraReducers: createSlice Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ láº¯ng nghe cÃ¡c action Ä‘Æ°á»£c táº¡o ra bá»Ÿi createAsyncThunk thÃ´ng qua extraReducers, giÃºp cáº­p nháº­t state má»™t cÃ¡ch dá»… dÃ ng vÃ  cÃ³ cáº¥u trÃºc [1].
Xá»­ lÃ½ lá»—i tÃ­ch há»£p: Cho phÃ©p báº¡n tráº£ vá» má»™t giÃ¡ trá»‹ lá»—i (dÃ¹ng rejectWithValue) mÃ  sau Ä‘Ã³ sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o payload cá»§a action rejected, giÃºp quáº£n lÃ½ lá»—i hiá»‡u quáº£ hÆ¡n [1].
Trong Ä‘oáº¡n code cá»§a báº¡n:
Báº¡n Ä‘á»‹nh nghÄ©a fetchAddressData báº±ng createAsyncThunk.
Pháº§n extraReducers trong addressSlice láº¯ng nghe cÃ¡c action pending, fulfilled, vÃ  rejected cá»§a fetchAddressData Ä‘á»ƒ cáº­p nháº­t status, error, vÃ  addressData trong store Redux. 
TÃ³m láº¡i, createAsyncThunk lÃ  cÃ¡ch chuáº©n vÃ  hiá»‡u quáº£ Ä‘Æ°á»£c Redux Toolkit khuyáº¿n nghá»‹ Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™. 


========================================
const timestamp = Date.now();
ğŸ‘‰ Date.now() lÃ  gÃ¬?

Tráº£ vá» sá»‘ milliseconds (ms) ká»ƒ tá»«:

00:00:00 â€“ 01/01/1970 (Unix Epoch)

VÃ­ dá»¥ thá»±c táº¿:
Date.now() // 1731918723456

ğŸ‘‰ Con sá»‘ nÃ y:

LuÃ´n tÄƒng dáº§n
Gáº§n nhÆ° khÃ´ng trÃ¹ng
Ráº¥t phÃ¹ há»£p Ä‘á»ƒ:
ÄÃ¡nh dáº¥u thá»i Ä‘iá»ƒm

Káº¿t há»£p táº¡o ID

ğŸ“Œ 1 giÃ¢y = 1000 ms
ğŸ‘‰ 1 ms Ä‘Ã£ Ä‘á»§ phÃ¢n biá»‡t 2 láº§n click ráº¥t nhanh

ğŸ‘‰ VÃ¬ sao khÃ´ng dÃ¹ng new Date()?
Date.now()	new Date()
Sá»‘	Object
DÃ¹ng táº¡o ID tá»‘t	KhÃ´ng tiá»‡n
So sÃ¡nh nhanh	Chá»§ yáº¿u Ä‘á»ƒ format
ğŸ”¹ orderDate: new Date().toISOString()
ğŸ‘‰ DÃ²ng nÃ y dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?

LÆ°u ngÃ y giá» Ä‘áº·t hÃ ng

Theo chuáº©n ISO 8601

GiÃ¡ trá»‹ thá»±c táº¿:
"2025-11-16T03:21:45.123Z"

Ã nghÄ©a:
Pháº§n	Ã nghÄ©a
2025-11-16	NgÃ y
T03:21:45	Giá» (UTC)
.123	milliseconds
Z	UTC timezone

ğŸ“Œ Chuáº©n nÃ y:
Backend ráº¥t thÃ­ch
Dá»… parse
KhÃ´ng bá»‹ lá»—i timezone

â“ VÃ¬ sao KHÃ”NG dÃ¹ng Date.now() cho orderDate?
ğŸ‘‰ VÃ¬:
orderDate cáº§n hiá»ƒn thá»‹
Date.now() chá»‰ lÃ  sá»‘ â†’ pháº£i convert láº¡i

3ï¸âƒ£ Pháº§n ID RANDOM â€“ Cá»°C Ká»² QUAN TRá»ŒNG
ğŸ”¹ const randomId = Math.random().toString(36).substring(2, 11);
Má»• xáº» tá»«ng pháº§n ğŸ‘‡
â‘  Math.random()
Math.random() // 0.583742913847


Tráº£ vá» sá»‘ 0 â†’ 0.999999

KhÃ´ng trÃ¹ng xÃ¡c suáº¥t ráº¥t tháº¥p

â‘¡ .toString(36)

ğŸ‘‰ Chuyá»ƒn sá»‘ sang há»‡ cÆ¡ sá»‘ 36:

KÃ½ tá»±	Bao gá»“m
0â€“9	Sá»‘
aâ€“z	Chá»¯ thÆ°á»ng

VÃ­ dá»¥:

0.5837429 â†’ "0.l9k4fa3x"

â‘¢ .substring(2, 11)
"0.l9k4fa3x9z"
   â†‘
   cáº¯t tá»« Ä‘Ã¢y


ğŸ‘‰ Bá»:

"0."

Láº¥y 9 kÃ½ tá»± ngáº«u nhiÃªn

VÃ­ dá»¥ káº¿t quáº£:

"l9k4fa3x9"


ğŸ“Œ ÄÃ¢y chÃ­nh lÃ  random string ngáº¯n gá»n, dá»… Ä‘á»c

ğŸ”¹ GhÃ©p ID hoÃ n chá»‰nh
id: `order_${timestamp}_${randomId}`

VÃ­ dá»¥ thá»±c táº¿:
order_1731918723456_l9k4fa3x9

Táº¡i sao ghÃ©p nhÆ° váº­y?
Pháº§n	LÃ½ do
order_	PhÃ¢n biá»‡t loáº¡i dá»¯ liá»‡u
timestamp	Äáº£m báº£o tÄƒng dáº§n
randomId	TrÃ¡nh trÃ¹ng khi click nhanh

ğŸ‘‰ Gáº§n nhÆ° KHÃ”NG BAO GIá»œ trÃ¹ng

4ï¸âƒ£ VÃ¬ sao KHÃ”NG dÃ¹ng UUID?
CÃ¡ch	LÃ½ do chá»n / khÃ´ng chá»n
uuidv4()	DÃ i, khÃ³ debug
Backend tá»± sinh ID	Pháº£i cÃ³ server
timestamp + random	âœ” Gá»n, offline tá»‘t

ğŸ“Œ Vá»›i frontend + localStorage â†’ cÃ¡ch báº¡n Ä‘ang dÃ¹ng lÃ  ráº¥t chuáº©n

5ï¸âƒ£ CÃ¡c field cÃ²n láº¡i (giáº£i thÃ­ch nhanh)
items: meta.items || []


Snapshot danh sÃ¡ch sáº£n pháº©m táº¡i thá»i Ä‘iá»ƒm mua

totalAmount: meta.totalAmount || 0


Tá»•ng tiá»n (trÃ¡nh undefined)

deliveryAddress: `Äá»‹a chá»‰ chi tiáº¿t: ${data.addressDetail}\nÄá»‹a chá»‰: ${selectedAddress}`


GhÃ©p string Ä‘á»ƒ dá»… lÆ°u / hiá»ƒn thá»‹

paymentMethod: "COD"


PhÆ°Æ¡ng thá»©c thanh toÃ¡n

status: "pending"


Tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng ban Ä‘áº§u

customerInfo: { ... }


ThÃ´ng tin khÃ¡ch táº¡i thá»i Ä‘iá»ƒm mua

addressSnapshot


Ráº¥t quan trá»ng: lÆ°u Ä‘á»‹a chá»‰ Ä‘Ãºng lÃºc Ä‘áº·t hÃ ng
ğŸ‘‰ Sau nÃ y user Ä‘á»•i Ä‘á»‹a chá»‰ â†’ Ä‘Æ¡n hÃ ng cÅ© khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng

6ï¸âƒ£ TÃ³m táº¯t ngáº¯n gá»n
ThÃ nh pháº§n	Má»¥c Ä‘Ã­ch
Date.now()	Táº¡o timestamp duy nháº¥t
Math.random()	ThÃªm Ä‘á»™ ngáº«u nhiÃªn
order_${timestamp}_${randomId}	ID Ä‘Æ¡n hÃ ng
toISOString()	NgÃ y giá» chuáº©n backend
addressSnapshot	Snapshot dá»¯ liá»‡u lá»‹ch sá»­


=======================================
const addressTransform = createTransform(
  // Save: Remove large fields before persisting
  (inboundState: AddressState) => {
    const { addressData, status, error, showLocationModal, ...rest } = inboundState; // loáº¡i bá» khÃ´ng lÆ°u cÃ¡c trÆ°á»ng nÃ y 

    console.log("Saving address to localStorage:", rest);
    return rest;
  },

  // Load: Restore default values for excluded fields
  (outboundState: Partial<AddressState>): AddressState => {
    // Partial vÃ¬ VÃ¬ redux-persist KHÃ”NG tráº£ vá» full state.
    const result = {
      ...outboundState, // lÆ°u trÆ°á»›c khi thÃªm láº¡i cÃ¡c trÆ°á»ng trÆ°á»›c Ä‘Ã³ Ä‘Ã£ khÃ´ng lÆ°u 
      
      addressData: [],
      status: "idle" as const,
      error: null,
      showLocationModal: false,
    } as AddressState;
	
	//Láº¥y pháº§n Ä‘Ã£ lÆ°u (outboundState)

	ThÃªm láº¡i cÃ¡c field bá»‹ thiáº¿u

	Ã‰p kiá»ƒu (as AddressState) vÃ¬ lÃºc nÃ y Ä‘Ã£ Ä‘á»§ field

ğŸ“Œ LÃºc nÃ y má»›i Ä‘Ãºng lÃ  AddressState hoÃ n chá»‰nh.
    
    console.log("Loading address from localStorage:", result);
    return result;
  },

  { whitelist: ["address"] }
);


----------------------------
Partial lÃ  gÃ¬?

Partial<T> lÃ  utility type cá»§a TypeScript.
ğŸ‘‰ NÃ³ biáº¿n táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cá»§a T thÃ nh optional.
Äá»‹nh nghÄ©a (TypeScript cÃ³ sáºµn)
type Partial<T> = {
  [P in keyof T]?: T[P];
};

ğŸ“Œ NghÄ©a lÃ :
Náº¿u AddressState cÃ³ 10 field
Partial<AddressState> â†’ cÃ³ thá»ƒ chá»‰ cÃ³ 1, 2, hoáº·c vÃ i field
2ï¸âƒ£ Partial á»Ÿ Ä‘Ã¢u ra?
NÃ³ náº±m sáºµn trong TypeScript

3ï¸âƒ£ Ãp vÃ o code cá»§a báº¡n
(outboundState: Partial<AddressState>): AddressState => {

â“ VÃ¬ sao outboundState láº¡i lÃ  Partial<AddressState>?

ğŸ‘‰ VÃ¬ redux-persist KHÃ”NG tráº£ vá» full state.

Nhá»› láº¡i bÆ°á»›c SAVE ğŸ‘‡
const { addressData, status, error, showLocationModal, ...rest } = inboundState;
return rest;


â›” Báº¡n khÃ´ng lÆ°u máº¥y field nÃ y:
addressData
status
error
showLocationModal

â¡ï¸ NÃªn khi LOAD lÃªn:

outboundState = {
  selectedCity,
  selectedDistrict,
  selectedWard,
  addressDetail
}

â— NÃ³ KHÃ”NG pháº£i AddressState Ä‘áº§y Ä‘á»§

ğŸ‘‰ VÃ¬ váº­y:
outboundState: Partial<AddressState>
lÃ  báº¯t buá»™c vÃ  Ä‘Ãºng chuáº©n

----------------------------------

export interface City {
  code: number;
  name: string;
  districts: District[];
}

//kiá»ƒu Type tÆ°Æ¡ng Ä‘Æ°Æ¡ng
// export type City = {
//   code: number;
//   name: string;
//   districts: District[];
// };

Khi nÃ o nÃªn dÃ¹ng Interface (LÃ½ do cho Ä‘oáº¡n code trÃªn)
LÃ½ do chÃ­nh khiáº¿n interface Ä‘Æ°á»£c sá»­ dá»¥ng trong Ä‘oáº¡n mÃ£ cá»§a báº¡n lÃ  vÃ¬ nÃ³ Ä‘Æ°á»£c thiáº¿t káº¿ tá»‘i Æ°u hÆ¡n cho viá»‡c Ä‘á»‹nh nghÄ©a cáº¥u trÃºc Ä‘á»‘i tÆ°á»£ng (object shapes).
CÃº phÃ¡p sáº¡ch sáº½ vÃ  táº­p trung vÃ o Ä‘á»‘i tÆ°á»£ng: interface cÃ³ cÃº phÃ¡p trá»±c quan hÆ¡n khi mÃ´ táº£ má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ nhiá»u thuá»™c tÃ­nh.
typescript
// Interface (sá»­ dá»¥ng trong code cá»§a báº¡n)
export interface City {
  code: number;
  name: string;
  districts: District[];
}
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

So vá»›i type cáº§n dáº¥u = vÃ  khÃ´ng cáº§n dáº¥u pháº©y (náº¿u viáº¿t theo dáº¡ng interface):
typescript
// Type tÆ°Æ¡ng Ä‘Æ°Æ¡ng
export type City = {
  code: number;
  name: string;
  districts: District[];
};
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

Kháº£ nÄƒng má»Ÿ rá»™ng (Declaration Merging): ÄÃ¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t quan trá»ng nháº¥t. interface cÃ³ thá»ƒ Ä‘Æ°á»£c má»Ÿ rá»™ng báº±ng cÃ¡ch khai bÃ¡o láº¡i cÃ¹ng tÃªn á»Ÿ nhá»¯ng nÆ¡i khÃ¡c nhau, TypeScript sáº½ tá»± Ä‘á»™ng gá»™p chÃºng láº¡i.Äiá»u nÃ y cá»±c ká»³ há»¯u Ã­ch trong cÃ¡c thÆ° viá»‡n lá»›n hoáº·c khi báº¡n muá»‘n má»Ÿ rá»™ng cÃ¡c kiá»ƒu dá»¯ liá»‡u toÃ n cá»¥c (vÃ­ dá»¥: má»Ÿ rá»™ng Ä‘á»‘i tÆ°á»£ng Window trong trÃ¬nh duyá»‡t).
typescript
interface AddressState {
  addressData: City[];
  status: string;
}

// á» má»™t file khÃ¡c, báº¡n cÃ³ thá»ƒ thÃªm thuá»™c tÃ­nh má»›i mÃ  khÃ´ng sá»­a file gá»‘c
interface AddressState {
  // TypeScript sáº½ gá»™p thuá»™c tÃ­nh nÃ y vÃ o
  locationType: 'default' | 'custom';
}
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

type thÃ¬ khÃ´ng lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y; náº¿u báº¡n khai bÃ¡o láº¡i má»™t type cÃ¹ng tÃªn, báº¡n sáº½ gáº·p lá»—i.
Quy Æ°á»›c trong cá»™ng Ä‘á»“ng (Convention): Trong cá»™ng Ä‘á»“ng React/Redux/TypeScript, quy Æ°á»›c chung lÃ  sá»­ dá»¥ng interface cho cÃ¡c Ä‘á»‘i tÆ°á»£ng (props, state, models) vÃ  sá»­ dá»¥ng type cho cÃ¡c kiá»ƒu phá»©c táº¡p hÆ¡n (union types, intersection types, tuples).
Khi nÃ o thÃ¬ dÃ¹ng Type (TrÆ°á»ng há»£p khÃ´ng dÃ¹ng Interface Ä‘Æ°á»£c)
Máº·c dÃ¹ interface tuyá»‡t vá»i cho Ä‘á»‘i tÆ°á»£ng, type láº¡i linh hoáº¡t hÆ¡n nhiá»u trong cÃ¡c trÆ°á»ng há»£p khÃ¡c mÃ  interface khÃ´ng há»— trá»£.
Trong chÃ­nh Ä‘oáº¡n mÃ£ cá»§a báº¡n, báº¡n Ä‘Ã£ sá»­ dá»¥ng type má»™t cÃ¡ch khÃ©o lÃ©o cho cÃ¡c kiá»ƒu káº¿t há»£p (union types/literals):
Kiá»ƒu káº¿t há»£p (Union Types):
typescript
// Interface khÃ´ng thá»ƒ Ä‘á»‹nh nghÄ©a kiá»ƒu nÃ y trá»±c tiáº¿p
type LocationType = 'default' | 'custom';

// ÄÆ°á»£c dÃ¹ng trong PayloadAction:
setLocationType: (state, action: PayloadAction< 'default' | 'custom' >) => { ... }
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

Tráº¡ng thÃ¡i (Literal Types):
typescript
// Interface khÃ´ng thá»ƒ Ä‘á»‹nh nghÄ©a kiá»ƒu nÃ y trá»±c tiáº¿p
type Status = 'idle' | 'pending' | 'succeeded' | 'failed';

// ÄÆ°á»£c dÃ¹ng trong AddressState:
status: 'idle' | 'pending' | 'succeeded' | 'failed';
HÃ£y tháº­n trá»ng khi sá»­ dá»¥ng mÃ£.

TÃ³m táº¯t sá»± lá»±a chá»n
TÃ­nh nÄƒng	Interface	Type
MÃ´ táº£ Ä‘á»‘i tÆ°á»£ng	Tá»‘t nháº¥t, cÃº phÃ¡p sáº¡ch	Tá»‘t, linh hoáº¡t
Má»Ÿ rá»™ng (Merging)	CÃ³ (Tá»± Ä‘á»™ng gá»™p)	KhÃ´ng
Äá»‹nh nghÄ©a Union/Literal Types	KhÃ´ng thá»ƒ trá»±c tiáº¿p	CÃ³ (Ráº¥t linh hoáº¡t)
Trong Ä‘oáº¡n mÃ£ cá»§a báº¡n, interface Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cÃ¡c mÃ´ hÃ¬nh dá»¯ liá»‡u (City, District, Ward) vÃ  cáº¥u trÃºc tráº¡ng thÃ¡i lá»›n (AddressState), táº­n dá»¥ng sá»± rÃµ rÃ ng vÃ  kháº£ nÄƒng má»Ÿ rá»™ng cá»§a nÃ³.
Náº¿u báº¡n thay táº¥t cáº£ interface báº±ng type trong mÃ£ cá»§a mÃ¬nh, nÃ³ váº«n sáº½ cháº¡y vÃ  hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c. Viá»‡c lá»±a chá»n sá»­ dá»¥ng cÃ¡i nÃ o chá»§ yáº¿u dá»±a trÃªn quy Æ°á»›c nhÃ³m, sá»Ÿ thÃ­ch cÃ¡ nhÃ¢n vÃ  nhu cáº§u vá» tÃ­nh nÄƒng má»Ÿ rá»™ng (merging).


--------------------------------
Má»¥c Ä‘Ã­ch chÃ­nh cá»§a interface á»Ÿ Ä‘Ã¢y lÃ  Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cáº¥u trÃºc (kiá»ƒu dá»¯ liá»‡u) rÃµ rÃ ng cho dá»¯ liá»‡u trong á»©ng dá»¥ng cá»§a báº¡n. 
DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng lÃ½ do cá»¥ thá»ƒ táº¡i sao chÃºng ta pháº£i dÃ¹ng interface trong ngá»¯ cáº£nh nÃ y:
1. Äáº£m báº£o an toÃ n kiá»ƒu dá»¯ liá»‡u (Type Safety)
TypeScript Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ giÃºp báº¡n báº¯t cÃ¡c lá»—i liÃªn quan Ä‘áº¿n kiá»ƒu dá»¯ liá»‡u ngay trong quÃ¡ trÃ¬nh viáº¿t mÃ£ (biÃªn dá»‹ch) thay vÃ¬ chá» Ä‘áº¿n lÃºc cháº¡y chÆ°Æ¡ng trÃ¬nh (runtime).
VÃ­ dá»¥: Khi báº¡n Ä‘á»‹nh nghÄ©a export interface City { code: number; name: string; districts: District[]; }, báº¡n Ä‘ang nÃ³i vá»›i trÃ¬nh biÃªn dá»‹ch ráº±ng má»i Ä‘á»‘i tÆ°á»£ng kiá»ƒu City pháº£i cÃ³ cÃ¡c thuá»™c tÃ­nh code (kiá»ƒu sá»‘), name (kiá»ƒu chuá»—i) vÃ  districts (má»™t máº£ng cÃ¡c District).
Náº¿u á»Ÿ Ä‘Ã¢u Ä‘Ã³ trong code, báº¡n cá»‘ gáº¯ng truy cáº­p myCity.city_name (sai tÃªn thuá»™c tÃ­nh) hoáº·c gÃ¡n má»™t chuá»—i vÃ o myCity.code, TypeScript sáº½ bÃ¡o lá»—i ngay láº­p tá»©c.
2. Cung cáº¥p tÃ i liá»‡u rÃµ rÃ ng (Self-Documentation)
CÃ¡c interface Ä‘Ã³ng vai trÃ² nhÆ° tÃ i liá»‡u mÃ´ táº£ chÃ­nh xÃ¡c dá»¯ liá»‡u cá»§a báº¡n trÃ´ng nhÆ° tháº¿ nÃ o:
Báº¥t ká»³ láº­p trÃ¬nh viÃªn nÃ o Ä‘á»c mÃ£ nÃ y (ká»ƒ cáº£ báº¡n trong tÆ°Æ¡ng lai) Ä‘á»u hiá»ƒu ngay láº­p tá»©c cáº¥u trÃºc cá»§a dá»¯ liá»‡u Ä‘á»‹a chá»‰ mÃ  API tráº£ vá» (City, District, Ward) vÃ  cáº¥u trÃºc cá»§a tráº¡ng thÃ¡i Redux (AddressState).
3. Táº­n dá»¥ng tÃ­nh nÄƒng cá»§a Redux Toolkit vÃ  Axios
Cáº£ createAsyncThunk cá»§a Redux Toolkit vÃ  thÆ° viá»‡n axios Ä‘á»u hoáº¡t Ä‘á»™ng hiá»‡u quáº£ hÆ¡n khi biáº¿t kiá»ƒu dá»¯ liá»‡u:
Vá»›i createAsyncThunk: Báº¡n dÃ¹ng <City[], void, { rejectValue: string }> Ä‘á»ƒ khai bÃ¡o rÃµ kiá»ƒu dá»¯ liá»‡u mÃ  hÃ m thunk sáº½ tráº£ vá» (City[]) vÃ  kiá»ƒu dá»¯ liá»‡u cho lá»—i.
Vá»›i axios: Báº¡n dÃ¹ng axios.get<City[]>(...) Ä‘á»ƒ yÃªu cáº§u Axios Ä‘áº£m báº£o dá»¯ liá»‡u nháº­n Ä‘Æ°á»£c tá»« API cÃ³ kiá»ƒu City[].
4. Há»— trá»£ IntelliSense/Gá»£i Ã½ mÃ£ (Code Autocomplete)
Trong cÃ¡c trÃ¬nh chá»‰nh sá»­a mÃ£ (nhÆ° VS Code), nhá» cÃ³ interface, khi báº¡n gÃµ state.addressData[0]. (dáº¥u cháº¥m), trÃ¬nh biÃªn dá»‹ch sáº½ ngay láº­p tá»©c gá»£i Ã½ cÃ¡c thuá»™c tÃ­nh code, name, districts, giÃºp tÄƒng tá»‘c Ä‘á»™ láº­p trÃ¬nh vÃ  giáº£m lá»—i chÃ­nh táº£.
TÃ³m táº¯t
Báº¡n pháº£i dÃ¹ng interface vÃ¬ Ä‘oáº¡n mÃ£ Ä‘ang sá»­ dá»¥ng TypeScript, vÃ  interface lÃ  cÃ¡ch Ä‘á»ƒ Ã¡p dá»¥ng ká»· luáº­t vá» kiá»ƒu dá»¯ liá»‡u, lÃ m cho mÃ£ nguá»“n minh báº¡ch hÆ¡n, dá»… báº£o trÃ¬ hÆ¡n vÃ  Ã­t lá»—i hÆ¡n.

=============================

import { useDispatch, useSelector, TypedUseSelectorHook } from 'react-redux';
import type { RootState, AppDispatch } from './store';

export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;

1. CÃ¡c dÃ²ng import
typescript
import { useDispatch, useSelector, TypedUseSelectorHook } from 'react-redux';
import type { RootState, AppDispatch } from './store';
useDispatch, useSelector: ÄÃ¢y lÃ  cÃ¡c hooks tiÃªu chuáº©n tá»« thÆ° viá»‡n react-redux dÃ¹ng Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i store Redux.
TypedUseSelectorHook: Má»™t kiá»ƒu dá»¯ liá»‡u (type) Ä‘áº·c biá»‡t tá»« react-redux giÃºp Ä‘á»‹nh nghÄ©a má»™t phiÃªn báº£n hook useSelector Ä‘Ã£ Ä‘Æ°á»£c gÃµ kiá»ƒu.
type { RootState, AppDispatch } from './store';: DÃ²ng nÃ y nháº­p (import) cÃ¡c kiá»ƒu dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn trong file ./store cá»§a báº¡n:
RootState: Kiá»ƒu dá»¯ liá»‡u mÃ´ táº£ toÃ n bá»™ cáº¥u trÃºc cá»§a tráº¡ng thÃ¡i Redux (toÃ n bá»™ dá»¯ liá»‡u trong store).
AppDispatch: Kiá»ƒu dá»¯ liá»‡u mÃ´ táº£ chÃ­nh xÃ¡c hÃ m dispatch cá»§a store, bao gá»“m táº¥t cáº£ cÃ¡c loáº¡i hÃ nh Ä‘á»™ng (actions) mÃ  nÃ³ cÃ³ thá»ƒ gá»­i Ä‘i. 
2. Äá»‹nh nghÄ©a cÃ¡c hooks Ä‘Ã£ Ä‘Æ°á»£c gÃµ kiá»ƒu 
typescript
// Typed hooks for use throughout the app
export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;
ÄÃ¢y lÃ  nÆ¡i táº¡o ra cÃ¡c hooks tÃ¹y chá»‰nh mÃ  báº¡n sáº½ sá»­ dá»¥ng trong toÃ n bá»™ á»©ng dá»¥ng thay vÃ¬ hooks gá»‘c:
useAppDispatch:
NÃ³ bá»c hÃ m useDispatch gá»‘c.
Tham sá»‘ generic <AppDispatch> nÃ³i vá»›i TypeScript ráº±ng hÃ m dispatch nÃ y chá»‰ cÃ³ thá»ƒ nháº­n cÃ¡c hÃ nh Ä‘á»™ng Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong AppDispatch.
CÃ´ng dá»¥ng: Khi báº¡n gá»i const dispatch = useAppDispatch(), TypeScript sáº½ biáº¿t chÃ­nh xÃ¡c nhá»¯ng hÃ nh Ä‘á»™ng nÃ o há»£p lá»‡ vÃ  sáº½ bÃ¡o lá»—i náº¿u báº¡n cá»‘ gáº¯ng gá»­i má»™t hÃ nh Ä‘á»™ng khÃ´ng tá»“n táº¡i hoáº·c sai cáº¥u trÃºc.
useAppSelector:
NÃ³ gÃ¡n kiá»ƒu TypedUseSelectorHook<RootState> cho hÃ m useSelector gá»‘c.
CÃ´ng dá»¥ng: Khi báº¡n sá»­ dá»¥ng useAppSelector Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« store (vÃ­ dá»¥: const user = useAppSelector(state => state.user)), TypeScript sáº½ tá»± Ä‘á»™ng hiá»ƒu cáº¥u trÃºc cá»§a state lÃ  gÃ¬ (RootState) vÃ  biáº¿t thuá»™c tÃ­nh user cÃ³ tá»“n táº¡i hay khÃ´ng, giÃºp ngÄƒn ngá»«a lá»—i truy cáº­p thuá»™c tÃ­nh khÃ´ng xÃ¡c Ä‘á»‹nh. 
TÃ³m táº¯t
Thay vÃ¬ sá»­ dá»¥ng useDispatch vÃ  useSelector trá»±c tiáº¿p tá»« react-redux (vá»‘n khÃ´ng biáº¿t gÃ¬ vá» cáº¥u trÃºc store cá»¥ thá»ƒ cá»§a báº¡n), Ä‘oáº¡n code nÃ y Ä‘á»‹nh nghÄ©a cÃ¡c phiÃªn báº£n "thÃ´ng minh hÆ¡n" (useAppDispatch vÃ  useAppSelector) Ä‘á»ƒ cung cáº¥p tráº£i nghiá»‡m phÃ¡t triá»ƒn an toÃ n hÆ¡n vá»›i TypeScript. Báº¡n sáº½ sá»­ dá»¥ng 2 hooks má»›i nÃ y trong má»i component React cá»§a mÃ¬nh. 

================================

const AddressSelector: React.FC<AddressSelectorProps> = ({ ... }) => { ... }
-> React.FC (Function Component): Kiá»ƒu chuáº©n cho component React.
   NÃ³ Ä‘áº£m báº£o component nÃ y nháº­n Ä‘Ãºng cÃ¡c props Ä‘Ã£ khai bÃ¡o trong AddressSelectorProps.

---------------------

Trong TypeScript (TS), number (chá»¯ thÆ°á»ng) lÃ  má»™t kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (primitive type) dÃ¹ng Ä‘á»ƒ biá»ƒu diá»…n táº¥t cáº£ cÃ¡c giÃ¡ trá»‹ sá»‘ (sá»‘ nguyÃªn, sá»‘ tháº­p phÃ¢n), cÃ²n Number (chá»¯ hoa) lÃ  má»™t constructor function (hÃ m táº¡o) hoáº·c kiá»ƒu wrapper object (Ä‘á»‘i tÆ°á»£ng bao bá»c) tÆ°Æ¡ng á»©ng vá»›i kiá»ƒu number, cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng sá»‘ (nhÆ°ng thÆ°á»ng khÃ´ng cáº§n thiáº¿t) vÃ  Ä‘Ã³ng vai trÃ² trong viá»‡c Ä‘á»‹nh nghÄ©a kiá»ƒu, nhÆ°ng number lÃ  cÃ¡ch dÃ¹ng phá»• biáº¿n vÃ  chuáº©n hÆ¡n trong TypeScript. 
========================================
há»c vÃ  sá»­ dá»¥ng createAsyncThunk 

sá»­ dá»¥ng axios thay cho fetch Ä‘á»ƒ dÃ¹ng api 

Fetch lÃ  má»™t cÃ´ng cá»¥ Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c trÃ¬nh duyá»‡t hiá»‡n nay, lÃ  má»™t pháº§n tiÃªu chuáº©n JavaScript mÃ  báº¡n khÃ´ng cáº§n cÃ i Ä‘áº·t gÃ¬ thÃªm. Äáº¥y lÃ  Æ°u Ä‘iá»ƒm nhÆ°ng cÅ©ng lÃ  nhÆ°á»£c Ä‘iá»ƒm cá»§a Fetch so vá»›i Axios. Fetch nháº¹ nhÃ ng, khÃ´ng cáº§n Ä‘Ã²i há»i cÃ i Ä‘áº·t thÃªm nhÆ° Axios nhÆ°ng má»©c Ä‘á»™ tÆ°Æ¡ng thÃ­ch giá»¯a cÃ¡c trÃ¬nh duyá»‡t láº¡i cÃ³ sá»± khÃ¡c nhau; trong khi Ä‘Ã³ Axios Ä‘áº£m báº£o Ä‘Æ°á»£c tÃ­nh nháº¥t quÃ¡n mÃ  khÃ´ng phá»¥ thuá»™c vÃ o version cá»§a trÃ¬nh duyá»‡t.

NgoÃ i ra, Axios cung cáº¥p cho chÃºng ta nhiá»u tÃ­nh nÄƒng hÆ¡n so vá»›i Fetch, cá»¥ thá»ƒ:

Xá»­ lÃ½ JSON tá»± Ä‘á»™ng. Fetch sáº½ yÃªu cáº§u báº¡n gá»i .json() Ä‘á»ƒ chuyá»ƒn Ä‘á»•i
TÃ­nh nÄƒng Interceptors. Fetch khÃ´ng tÃ­ch há»£p
TÃ­nh nÄƒng há»§y request. Fetch khÃ´ng cÃ³ tÃ­nh nÄƒng nÃ y
Há»— trá»£ cÃ i Ä‘áº·t plugin má»Ÿ rá»™ng. Fetch yÃªu cáº§u viáº¿t mÃ£ tÃ¹y chá»‰nh náº¿u muá»‘n
Thá»±c táº¿ dá»± Ã¡n vá»›i cÃ¡c á»©ng dá»¥ng Web Ä‘Æ¡n giáº£n, khÃ´ng Ä‘Ã²i há»i cÃ¡c tÆ°Æ¡ng tÃ¡c nhiá»u vá»›i ngÆ°á»i dÃ¹ng nhÆ° cÃ¡c Web tin tá»©c, giá»›i thiá»‡u,â€¦ thÃ¬ sá»­ dá»¥ng Fetch lÃ  Ä‘á»§. Axios sáº½ phÃ¹ há»£p hÆ¡n cho cÃ¡c á»©ng dá»¥ng client cÃ³ nhiá»u chá»©c nÄƒng hÆ¡n nhÆ° Single Page Application, cÃ¡c há»‡ thá»‘ng quáº£n trá»‹ ná»™i dung, thao tÃ¡c CRUD vá»›i dá»¯ liá»‡u.
+++++++++++++++++++++++++++++------------------------------------
Ã¡p dá»¥ng vÃ o cho code AddressSelector


location?:string lÃ  khi khai bÃ¡o cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng

async (_, { rejectWithValue }) => { ... }
   -> _: Dáº¥u gáº¡ch dÆ°á»›i lÃ  quy Æ°á»›c Ä‘áº·t tÃªn cho tham sá»‘ khÃ´ng dÃ¹ng Ä‘áº¿n (tham sá»‘ Ä‘áº§u tiÃªn).

rejectWithValue lÃ  má»™t hÃ m tiá»‡n Ã­ch mÃ  báº¡n cÃ³ thá»ƒ return (hoáº·c throw ) trong trÃ¬nh táº¡o hÃ nh Ä‘á»™ng Ä‘á»ƒ tráº£ vá» pháº£n há»“i bá»‹ tá»« chá»‘i vá»›i má»™t payload vÃ  meta Ä‘Ã£ xÃ¡c Ä‘á»‹nh. 

'idle': KhÃ´ng hoáº¡t Ä‘á»™ng, sáºµn sÃ ng Ä‘á»ƒ báº¯t Ä‘áº§u .
'loading': Äang diá»…n ra (Ä‘ang chá» pháº£n há»“i) .
'succeeded': ÄÃ£ hoÃ n thÃ nh thÃ nh cÃ´ng .
'failed': ÄÃ£ hoÃ n thÃ nh nhÆ°ng gáº·p lá»—i .

DÃ¹ng Class khi báº¡n cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng cÃ³ tráº¡ng thÃ¡i (properties) vÃ  hÃ nh vi (methods) cá»¥ thá»ƒ, cÃ³ thá»ƒ káº¿ thá»«a vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c instantiate (táº¡o thá»ƒ hiá»‡n) trong JS, cÃ²n dÃ¹ng Interface khi báº¡n chá»‰ cáº§n Ä‘á»‹nh nghÄ©a "khuÃ´n máº«u" (blueprint) cho cáº¥u trÃºc cá»§a Ä‘á»‘i tÆ°á»£ng/class, má»™t há»£p Ä‘á»“ng vá» thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c cáº§n cÃ³, khÃ´ng thá»ƒ instantiate, vÃ  há»¯u Ã­ch cho viá»‡c kiá»ƒm tra kiá»ƒu vÃ  há»£p nháº¥t khai bÃ¡o (declaration merging) trong TypeScript. 

Khi nÃ o dÃ¹ng Class:
Táº¡o thá»ƒ hiá»‡n (Instantiation): Khi báº¡n muá»‘n táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ cÃ³ tráº¡ng thÃ¡i vÃ  hÃ nh vi giá»‘ng nhau (vÃ­ dá»¥: new User(), new Product()).
Káº¿ thá»«a & Thá»±c thi: Khi cáº§n káº¿ thá»«a logic tá»« lá»›p cha (class) hoáº·c thá»±c thi má»™t há»£p Ä‘á»“ng tá»« interface.
Tráº¡ng thÃ¡i & HÃ nh vi: Khi Ä‘á»‘i tÆ°á»£ng cáº§n giá»¯ tráº¡ng thÃ¡i (dá»¯ liá»‡u) vÃ  cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ thao tÃ¡c vá»›i tráº¡ng thÃ¡i Ä‘Ã³.
Runtime Value: Class cÃ³ tá»“n táº¡i trong JavaScript sau khi biÃªn dá»‹ch (dÃ¹ Ä‘Ã£ bá»‹ loáº¡i bá» pháº§n logic kiá»ƒm tra kiá»ƒu), dÃ¹ng Ä‘Æ°á»£c cho cÃ¡c má»¥c Ä‘Ã­ch runtime nhÆ° instanceof. 
Khi nÃ o dÃ¹ng Interface:
Äá»‹nh nghÄ©a cáº¥u trÃºc: Äá»ƒ mÃ´ táº£ hÃ¬nh dáº¡ng (shape) cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng hoáº·c cÃ¡c lá»›p, Ä‘áº£m báº£o chÃºng cÃ³ cÃ¡c thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c nháº¥t Ä‘á»‹nh.
Há»£p Ä‘á»“ng (Contracts): Äá»ƒ Ã¡p Ä‘áº·t má»™t "giao kÃ¨o" lÃªn cÃ¡c class (hoáº·c Ä‘á»‘i tÆ°á»£ng), Ä‘áº£m báº£o chÃºng tuÃ¢n thá»§ má»™t bá»™ quy táº¯c nháº¥t Ä‘á»‹nh.
Kiá»ƒm tra kiá»ƒu: Chá»§ yáº¿u dÃ¹ng cho má»¥c Ä‘Ã­ch kiá»ƒm tra kiá»ƒu cá»§a TypeScript (type-checking), khÃ´ng táº¡o ra code JavaScript thá»±c táº¿.
Há»£p nháº¥t khai bÃ¡o (Declaration Merging): Cho phÃ©p báº¡n má»Ÿ rá»™ng Ä‘á»‹nh nghÄ©a cá»§a má»™t interface báº±ng cÃ¡ch khai bÃ¡o láº¡i cÃ¹ng tÃªn á»Ÿ nhiá»u nÆ¡i.
API cÃ´ng khai: Äá»‹nh nghÄ©a API cÃ´ng khai cho cÃ¡c module hoáº·c thÆ° viá»‡n, nÆ¡i khÃ´ng cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng mÃ  chá»‰ cáº§n kiá»ƒm tra cáº¥u trÃºc. 
TÃ³m láº¡i sá»± khÃ¡c biá»‡t:
Class: LÃ  má»™t báº£n thiáº¿t káº¿ + triá»ƒn khai (cÃ³ thá»ƒ cÃ³ logic bÃªn trong) vÃ  táº¡o ra Ä‘á»‘i tÆ°á»£ng thá»±c.
Interface: Chá»‰ lÃ  má»™t báº£n thiáº¿t káº¿ (blueprint) cho cáº¥u trÃºc, dÃ¹ng Ä‘á»ƒ kiá»ƒm tra kiá»ƒu, khÃ´ng táº¡o ra Ä‘á»‘i tÆ°á»£ng.
VÃ­ dá»¥:
class Person { ... } -> Táº¡o ra cÃ¡c thá»ƒ hiá»‡n person1 = new Person().
interface IPerson { name: string; age: number; } -> DÃ¹ng Ä‘á»ƒ Ä‘áº£m báº£o má»™t Ä‘á»‘i tÆ°á»£ng hoáº·c class cÃ³ name vÃ  age, vÃ­ dá»¥: const user: IPerson = { name: "Alice", age: 30 };. 

"compilerOptions": {
    // 1. Má»¥c tiÃªu JavaScript Ä‘áº§u ra
    "target": "es5", 
    // -> Code sáº½ Ä‘Æ°á»£c dá»‹ch xuá»‘ng chuáº©n ES5 (cÅ©) Ä‘á»ƒ cháº¡y Ä‘Æ°á»£c trÃªn háº§u háº¿t má»i trÃ¬nh duyá»‡t.

    // 2. ThÆ° viá»‡n há»— trá»£
    "lib": ["dom", "dom.iterable", "esnext"],
    // -> Náº¡p sáºµn cÃ¡c kiá»ƒu dá»¯ liá»‡u cá»§a trÃ¬nh duyá»‡t (nhÆ° document, window, console...) 
    // vÃ  cÃ¡c tÃ­nh nÄƒng JS má»›i nháº¥t.

    // 3. Cháº¿ Ä‘á»™ lai (Hybrid) - QUAN TRá»ŒNG CHO VIá»†C CHUYá»‚N Äá»”I Dáº¦N Dáº¦N
    "allowJs": true,
    // -> Cho phÃ©p file .js vÃ  .ts cÃ¹ng tá»“n táº¡i. 
    // Báº¡n khÃ´ng cáº§n sá»­a háº¿t 100% file sang TS ngay láº­p tá»©c.

    // 4. Kiá»ƒm soÃ¡t lá»—i cháº·t cháº½
    "strict": true,
    // -> Báº­t cháº¿ Ä‘á»™ kiá»ƒm tra lá»—i nghiÃªm ngáº·t nháº¥t. 
    // VÃ­ dá»¥: Báº¯t buá»™c khai bÃ¡o kiá»ƒu, khÃ´ng cho phÃ©p biáº¿n cÃ³ giÃ¡ trá»‹ "any" ngáº§m Ä‘á»‹nh.

    // 5. Cáº¥u hÃ¬nh React
    "jsx": "react-jsx",
    // -> Há»— trá»£ cÃº phÃ¡p JSX má»›i cá»§a React 17+ (khÃ´ng cáº§n `import React` á»Ÿ má»i file).

    // 6. Xá»­ lÃ½ Module
    "module": "esnext",
    "moduleResolution": "node",
    // -> GiÃºp TypeScript hiá»ƒu cÃ¡ch import/export file giá»‘ng nhÆ° NodeJS/Webpack Ä‘ang lÃ m.

    // 7. KhÃ´ng táº¡o file Ä‘áº§u ra
    "noEmit": true,
    // -> TypeScript chá»‰ lÃ m nhiá»‡m vá»¥ kiá»ƒm tra lá»—i (Type Checking). 
    // Viá»‡c táº¡o ra file .js cuá»‘i cÃ¹ng Ä‘á»ƒ cháº¡y sáº½ do React-Scripts (Webpack/Babel) Ä‘áº£m nhiá»‡m.
}

---------------------------------------------------------------

1. let vÃ  const giá»‘ng nhau á»Ÿ Ä‘iá»ƒm nÃ o?

Cáº£ hai Ä‘á»u lÃ  block scope (pháº¡m vi trong ngoáº·c { })
VÃ­ dá»¥:

{
  let a = 1;
  const b = 2;
}
console.log(a, b); // âŒ lá»—i: a, b khÃ´ng tá»“n táº¡i ngoÃ i block


â†’ khÃ¡c vá»›i var (function scope).

âœ… 2. let khÃ¡c vá»›i const á»Ÿ Ä‘Ã¢u?
A. Vá» kháº£ nÄƒng thay Ä‘á»•i giÃ¡ trá»‹
ğŸ”¹ let: cÃ³ thá»ƒ gÃ¡n láº¡i (reassign)
let x = 10;
x = 20; // âœ” ok

ğŸ”¹ const: khÃ´ng thá»ƒ gÃ¡n láº¡i (no reassign)
const y = 10;
y = 20; // âŒ lá»—i

B. Vá» viá»‡c gÃ¡n giÃ¡ trá»‹ ngay khi khai bÃ¡o
ğŸ”¹ let: cÃ³ thá»ƒ khai bÃ¡o rá»“i gÃ¡n sau
let a;
a = 123; // âœ” ok

ğŸ”¹ const: báº¯t buá»™c gÃ¡n ngay khi khai bÃ¡o
const b;  // âŒ lá»—i

C. Vá»›i object hoáº·c array

const khÃ´ng cho phÃ©p Ä‘á»•i tham chiáº¿u (reference)
â†’ NhÆ°ng báº¡n váº«n cÃ³ thá»ƒ thay Ä‘á»•i ná»™i dung bÃªn trong.

VÃ­ dá»¥:
const obj = { name: "A" };
obj.name = "B"; // âœ” Ä‘Æ°á»£c

obj = { name: "C" }; // âŒ lá»—i: thay toÃ n bá»™ object


â†’ LÃ½ do: báº¡n khÃ´ng Ä‘Æ°á»£c Ä‘á»•i biáº¿n obj sang object khÃ¡c, nhÆ°ng Ä‘Æ°á»£c sá»­a thuá»™c tÃ­nh.

âœ… 3. Khi nÃ o nÃªn dÃ¹ng let?

DÃ¹ng let khi báº¡n biáº¿t giÃ¡ trá»‹ sáº½ thay Ä‘á»•i, vÃ­ dá»¥:

TrÆ°á»ng há»£p thÆ°á»ng dÃ¹ng:

biáº¿n Ä‘áº¿m vÃ²ng láº·p

biáº¿n tráº¡ng thÃ¡i thay Ä‘á»•i

gÃ¡n láº¡i káº¿t quáº£

VÃ­ dá»¥:

let count = 0;
count++;


Hoáº·c:

let result;
if (condition) {
  result = 10;
} else {
  result = 20;
}

âœ… 4. Khi nÃ o nÃªn dÃ¹ng const?

DÃ¹ng const khi báº¡n khÃ´ng muá»‘n giÃ¡ trá»‹ bá»‹ thay Ä‘á»•i trong suá»‘t chÆ°Æ¡ng trÃ¬nh.

ğŸ‘‰ ÄÃ¢y lÃ  best practice: Ä‘áº·t máº·c Ä‘á»‹nh dÃ¹ng const, vÃ  chá»‰ dÃ¹ng let khi tháº­t cáº§n thay Ä‘á»•i.

ThÆ°á»ng dÃ¹ng:

config

URL

cÃ¡c giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh

hÃ m

object khÃ´ng muá»‘n thay Ä‘á»•i tham chiáº¿u

VÃ­ dá»¥:

const PI = 3.14;
const API_URL = "https://api.com";
const user = { name: "A" };

ğŸ”¥ Gá»£i Ã½ tá»« cÃ¡c chuyÃªn gia JavaScript (ESLint, AirBnB Style Guide)

LuÃ´n dÃ¹ng const máº·c Ä‘á»‹nh

Chá»‰ dÃ¹ng let khi báº¡n cáº§n thay Ä‘á»•i giÃ¡ trá»‹

â†’ GiÃºp code an toÃ n hÆ¡n, Ã­t bug hÆ¡n.

ğŸ“Œ TÃ³m táº¯t siÃªu ngáº¯n, dá»… nhá»›
Äáº·c Ä‘iá»ƒm	let	const
Thay Ä‘á»•i giÃ¡ trá»‹	âœ” CÃ³ thá»ƒ	âŒ KhÃ´ng thá»ƒ
Pháº£i gÃ¡n khi khai bÃ¡o	âŒ KhÃ´ng	âœ” CÃ³
Sá»­a ná»™i dung object	âœ” CÃ³ thá»ƒ	âœ” CÃ³ thá»ƒ (chá»‰ khÃ´ng Ä‘á»•i reference)
Khi nÃ o dÃ¹ng	Khi giÃ¡ trá»‹ sáº½ thay Ä‘á»•i	Khi giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh



---------------------------------------------------------


 const payload = { ...data, meta: meta || null, id: String(Math.floor(Math.random() * 1000000000)) };
 
 DÆ°á»›i Ä‘Ã¢y lÃ  sá»± khÃ¡c biá»‡t cá»¥ thá»ƒ:

1. key={currentPage} (á» tháº» div cha)
Má»¥c Ä‘Ã­ch: KÃ­ch hoáº¡t láº¡i Animation (Hiá»‡u á»©ng chuyá»ƒn trang).
Giáº£i thÃ­ch:
Trong React, khi key cá»§a má»™t component thay Ä‘á»•i, React sáº½ coi Ä‘Ã³ lÃ  má»™t component hoÃ n toÃ n má»›i. NÃ³ sáº½ há»§y bá» (unmount) cÃ¡i cÅ© vÃ  váº½ láº¡i (mount) cÃ¡i má»›i tá»« Ä‘áº§u.
á» Ä‘Ã¢y, khi báº¡n báº¥m nÃºt chuyá»ƒn trang (currentPage thay Ä‘á»•i), React sáº½ xÃ³a háº³n cÃ¡i div cÅ© Ä‘i vÃ  táº¡o má»™t cÃ¡i div má»›i.
Viá»‡c nÃ y giÃºp cÃ¡c hiá»‡u á»©ng CSS (nhÆ° slide-next, slide-prev) Ä‘Æ°á»£c cháº¡y láº¡i tá»« Ä‘áº§u. Náº¿u khÃ´ng Ä‘á»•i key, React chá»‰ cáº­p nháº­t ná»™i dung bÃªn trong thÃ´i nÃªn hiá»‡u á»©ng trÆ°á»£t cÃ³ thá»ƒ sáº½ khÃ´ng cháº¡y.
2. key={deal.id} (á» tháº» Link con)
Má»¥c Ä‘Ã­ch: Äá»‹nh danh pháº§n tá»­ trong danh sÃ¡ch (Hiá»‡u nÄƒng & Logic).
Giáº£i thÃ­ch:
ÄÃ¢y lÃ  yÃªu cáº§u báº¯t buá»™c cá»§a React khi báº¡n dÃ¹ng hÃ m .map() Ä‘á»ƒ in ra má»™t danh sÃ¡ch.
NÃ³ giÃºp React biáº¿t chÃ­nh xÃ¡c sáº£n pháº©m nÃ o lÃ  sáº£n pháº©m nÃ o.
VÃ­ dá»¥: Náº¿u danh sÃ¡ch sáº£n pháº©m thay Ä‘á»•i thá»© tá»±, React dá»±a vÃ o key nÃ y Ä‘á»ƒ chá»‰ sáº¯p xáº¿p láº¡i cÃ¡c tháº» Link cÃ³ sáºµn thay vÃ¬ pháº£i xÃ³a Ä‘i váº½ láº¡i toÃ n bá»™, giÃºp trang web cháº¡y mÆ°á»£t hÆ¡n.


TÃ³m táº¯t sá»± khÃ¡c nhau:
Äáº·c Ä‘iá»ƒm	key={currentPage}	key={deal.id}
Vá»‹ trÃ­	Äáº·t á»Ÿ tháº» bao ngoÃ i (div).	Äáº·t á»Ÿ tá»«ng pháº§n tá»­ con (Link).
Äá»‘i tÆ°á»£ng	Quáº£n lÃ½ cáº£ nhÃ³m sáº£n pháº©m.	Quáº£n lÃ½ tá»«ng sáº£n pháº©m láº».
TÃ¡c dá»¥ng chÃ­nh	Báº¯t buá»™c React váº½ láº¡i tá»« Ä‘áº§u Ä‘á»ƒ cháº¡y hiá»‡u á»©ng chuyá»ƒn cáº£nh.	GiÃºp React theo dÃµi tá»«ng mÃ³n hÃ ng Ä‘á»ƒ cáº­p nháº­t thÃ´ng minh vÃ  tá»‘i Æ°u.





1. NÃ³ láº¥y tá»« Ä‘Ã¢u ra?

NÃ³ Ä‘Æ°á»£c láº¥y ra tá»« máº£ng history (lá»‹ch sá»­ mua hÃ ng).
Cá»¥ thá»ƒ lÃ  trong hÃ m .map((entry, idx) => ...): HÃ m nÃ y cháº¡y qua tá»«ng pháº§n tá»­ cá»§a máº£ng history. Má»—i láº§n cháº¡y, nÃ³ láº¥y ra má»™t pháº§n tá»­ vÃ  Ä‘áº·t tÃªn táº¡m thá»i lÃ  entry.
2. NÃ³ lÃ  gÃ¬?

NÃ³ lÃ  má»™t Object (Ä‘á»‘i tÆ°á»£ng) chá»©a toÃ n bá»™ thÃ´ng tin cá»§a má»™t Ä‘Æ¡n hÃ ng mÃ  báº¡n Ä‘Ã£ lÆ°u trÆ°á»›c Ä‘Ã³.
Cáº¥u trÃºc cá»§a nÃ³ thÆ°á»ng trÃ´ng nhÆ° tháº¿ nÃ y (dá»±a trÃªn code CheckoutForm.jsx):
javascript
{
  fullName: "Nguyá»…n VÄƒn A",
  phone: "0987654321",
  email: "a@gmail.com",
  addressDetail: "Sá»‘ 123, ÄÆ°á»ng ABC...",
  note: "Giao giá» hÃ nh chÃ­nh",
  meta: {
      products: [ ...danh sÃ¡ch sáº£n pháº©m... ]
  }
}
3. DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?

NÃ³ dÃ¹ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t cá»§a Ä‘Æ¡n hÃ ng Ä‘Ã³ lÃªn mÃ n hÃ¬nh.
VÃ­ dá»¥ trong code:
entry.meta?.products: Láº¥y danh sÃ¡ch sáº£n pháº©m Ä‘á»ƒ tÃ­nh tá»•ng tiá»n.
entry.fullName: Hiá»ƒn thá»‹ tÃªn ngÆ°á»i nháº­n.
entry.phone: Hiá»ƒn thá»‹ sá»‘ Ä‘iá»‡n thoáº¡i.
TÃ³m láº¡i: Náº¿u history lÃ  má»™t cuá»‘n sá»• ghi chÃ©p bÃ¡n hÃ ng, thÃ¬ entry chÃ­nh lÃ  má»™t trang giáº¥y trong cuá»‘n sá»• Ä‘Ã³, ghi chi tiáº¿t vá» má»™t láº§n bÃ¡n hÃ ng cá»¥ thá»ƒ.

reverse vÃ  products.reduce trong nÃ y cÃ³ tÃ¡c dá»¥ng nhÆ° nÃ o vÃ  nÃ³ hoáº¡t Ä‘á»™ng nhÆ° nÃ o  @BuyerInfo.jsx#L67-69 

DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch chi tiáº¿t vá» tÃ¡c dá»¥ng vÃ  cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a reverse() vÃ  reduce() trong Ä‘oáº¡n code trÃªn:

1. .reverse() (Äáº£o ngÆ°á»£c danh sÃ¡ch)
TÃ¡c dá»¥ng: Äáº£o ngÆ°á»£c thá»© tá»± cÃ¡c pháº§n tá»­ trong máº£ng history.
Táº¡i sao cáº§n dÃ¹ng?
Máº·c Ä‘á»‹nh, khi báº¡n thÃªm Ä‘Æ¡n hÃ ng má»›i vÃ o máº£ng (dÃ¹ng push hoáº·c [...]), Ä‘Æ¡n hÃ ng má»›i nháº¥t sáº½ náº±m á»Ÿ cuá»‘i máº£ng.
Tuy nhiÃªn, khi hiá»ƒn thá»‹ lá»‹ch sá»­ mua hÃ ng, ngÆ°á»i dÃ¹ng thÆ°á»ng muá»‘n tháº¥y Ä‘Æ¡n hÃ ng má»›i nháº¥t á»Ÿ trÃªn cÃ¹ng.
reverse() giÃºp Ä‘Æ°a pháº§n tá»­ cuá»‘i lÃªn Ä‘áº§u Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c Ä‘Ã­ch nÃ y.
LÆ°u Ã½ nhá»: TrÆ°á»›c Ä‘Ã³ cÃ³ dÃ¹ng .slice() (history.slice().reverse()). Äiá»u nÃ y ráº¥t quan trá»ng vÃ¬ reverse() sáº½ lÃ m thay Ä‘á»•i trá»±c tiáº¿p máº£ng gá»‘c. DÃ¹ng slice() Ä‘á»ƒ táº¡o ra má»™t báº£n sao (copy) trÆ°á»›c, sau Ä‘Ã³ má»›i Ä‘áº£o ngÆ°á»£c báº£n sao Ä‘Ã³, giá»¯ nguyÃªn máº£ng gá»‘c history khÃ´ng bá»‹ xÃ¡o trá»™n.
2. products.reduce(...) (TÃ­nh tá»•ng tiá»n)
TÃ¡c dá»¥ng: Cá»™ng dá»“n giÃ¡ tiá»n cá»§a táº¥t cáº£ sáº£n pháº©m trong Ä‘Æ¡n hÃ ng Ä‘á»ƒ ra Tá»•ng tiá»n Ä‘Æ¡n hÃ ng.
CÃ¡ch hoáº¡t Ä‘á»™ng: HÃ m reduce cháº¡y qua tá»«ng sáº£n pháº©m (p) trong danh sÃ¡ch products vÃ  cá»™ng dá»“n vÃ o biáº¿n tá»•ng (sum). CÃ´ng thá»©c trong code: 
(sum, p) => sum + (p.price * p.quantity)
Láº§n cháº¡y 1:
sum (khá»Ÿi táº¡o) = 0 (do sá»‘ 0 á»Ÿ cuá»‘i hÃ m reduce).
Sáº£n pháº©m A: GiÃ¡ 10k, Sá»‘ lÆ°á»£ng 2 -> ThÃ nh tiá»n: 20k.
sum má»›i = 0 + 20k = 20k.
Láº§n cháº¡y 2:
sum (hiá»‡n táº¡i) = 20k.
Sáº£n pháº©m B: GiÃ¡ 50k, Sá»‘ lÆ°á»£ng 1 -> ThÃ nh tiá»n: 50k.
sum má»›i = 20k + 50k = 70k.
...Cá»© tháº¿ cho Ä‘áº¿n háº¿t sáº£n pháº©m. Káº¿t quáº£ cuá»‘i cÃ¹ng tráº£ vá» lÃ  tá»•ng tiá»n cá»§a cáº£ Ä‘Æ¡n hÃ ng.
TÃ³m láº¡i:

reverse: GiÃºp Ä‘Æ¡n hÃ ng má»›i nháº¥t hiá»‡n lÃªn Ä‘áº§u.
reduce: GiÃºp tÃ­nh tá»•ng tiá»n pháº£i tráº£ cho toÃ n bá»™ Ä‘Æ¡n hÃ ng Ä‘Ã³.




Má»¥c Ä‘Ã­ch cá»§a hÃ m: Khi báº¡n má»Ÿ nhiá»u tab trÃ¬nh duyá»‡t, náº¿u má»™t tab thay Ä‘á»•i dá»¯ liá»‡u (vÃ­ dá»¥: Ä‘áº·t hÃ ng thÃ nh cÃ´ng), cÃ¡c tab khÃ¡c cáº§n cáº­p nháº­t theo. Dá»¯ liá»‡u nÃ y Ä‘Æ°á»£c láº¥y tá»« localStorage (nÆ¡i lÆ°u trá»¯ dáº¡ng chuá»—i JSON) vÃ  gá»­i vÃ o hÃ m nÃ y thÃ´ng qua action.payload.
Táº¡i sao pháº£i viáº¿t nhÆ° váº­y?
const { history, data } = action.payload || {};
Váº¥n Ä‘á»: ÄÃ´i khi action.payload cÃ³ thá»ƒ bá»‹ undefined hoáº·c null (vÃ­ dá»¥: lá»—i khi gá»i hÃ m, hoáº·c dá»¯ liá»‡u truyá»n vÃ o bá»‹ rá»—ng). Náº¿u báº¡n cá»‘ truy cáº­p action.payload.history khi action.payload lÃ  null, á»©ng dá»¥ng sáº½ bá»‹ lá»—i ngay láº­p tá»©c ("Cannot read property 'history' of null").
Giáº£i phÃ¡p: || {} (hoáº·c object rá»—ng) lÃ  má»™t ká»¹ thuáº­t "phÃ²ng thá»§". Náº¿u action.payload khÃ´ng cÃ³ giÃ¡ trá»‹, nÃ³ sáº½ láº¥y {} lÃ m máº·c Ä‘á»‹nh. Nhá» Ä‘Ã³, viá»‡c destructuring { history, data } sáº½ khÃ´ng bao giá» gÃ¢y lá»—i, nÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  undefined náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u.
state.history = history || [];
Váº¥n Ä‘á»: Trong component 
BuyerInfo.jsx
, báº¡n cÃ³ code history.map(...). HÃ m .map() chá»‰ hoáº¡t Ä‘á»™ng trÃªn máº£ng. Náº¿u state.history bá»‹ gÃ¡n thÃ nh null hoáº·c undefined, khi component cá»‘ cháº¡y .map(), á»©ng dá»¥ng sáº½ bá»‹ "tráº¯ng trang" (crash) vá»›i lá»—i "Cannot read property 'map' of undefined".
Giáº£i phÃ¡p: || [] Ä‘áº£m báº£o ráº±ng dÃ¹ dá»¯ liá»‡u Ä‘áº§u vÃ o cÃ³ bá»‹ lá»—i, thiáº¿u, hay null, thÃ¬ state.history luÃ´n luÃ´n lÃ  má»™t máº£ng (Ã­t nháº¥t lÃ  máº£ng rá»—ng []). Äiá»u nÃ y giÃºp giao diá»‡n váº«n hiá»ƒn thá»‹ Ä‘Æ°á»£c (dÃ¹ lÃ  hiá»ƒn thá»‹ danh sÃ¡ch trá»‘ng) thay vÃ¬ bá»‹ sáº­p hoÃ n toÃ n.
state.data = data || null;
TÆ°Æ¡ng tá»±, dÃ²ng nÃ y Ä‘áº£m báº£o state.data cÃ³ giÃ¡ trá»‹ rÃµ rÃ ng (lÃ  dá»¯ liá»‡u hoáº·c lÃ  null), trÃ¡nh Ä‘á»ƒ nÃ³ á»Ÿ tráº¡ng thÃ¡i undefined khÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c.
TÃ³m láº¡i: CÃ¡ch viáº¿t nÃ y lÃ  láº­p trÃ¬nh phÃ²ng thá»§ (defensive programming). NÃ³ cháº¥p nháº­n ráº±ng dá»¯ liá»‡u Ä‘áº§u vÃ o tá»« localStorage cÃ³ thá»ƒ khÃ´ng hoÃ n háº£o (do lá»—i parse JSON, do ngÆ°á»i dÃ¹ng xÃ³a storage, v.v.) vÃ  chá»§ Ä‘á»™ng xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p xáº¥u Ä‘Ã³ Ä‘á»ƒ á»©ng dá»¥ng luÃ´n cháº¡y á»•n Ä‘á»‹nh.


 Math.random().toString(36).substr(2, 9);
Math.random():
HÃ m nÃ y sinh ra má»™t sá»‘ tháº­p phÃ¢n ngáº«u nhiÃªn tá»« 0 Ä‘áº¿n 1 (vÃ­ dá»¥: 0.85920312...).
.toString(36):
ÄÃ¢y lÃ  bÆ°á»›c quan trá»ng nháº¥t. NÃ³ chuyá»ƒn sá»‘ tháº­p phÃ¢n kia thÃ nh má»™t chuá»—i kÃ½ tá»± theo há»‡ cÆ¡ sá»‘ 36.
Há»‡ cÆ¡ sá»‘ 36 bao gá»“m 10 chá»¯ sá»‘ (0-9) vÃ  26 chá»¯ cÃ¡i tiáº¿ng Anh (a-z). Tá»•ng cá»™ng lÃ  36 kÃ½ tá»±.
VÃ­ dá»¥: Sá»‘ 0.8592... khi chuyá»ƒn sang há»‡ 36 sáº½ thÃ nh chuá»—i dáº¡ng "0.u8x1n4...". NÃ³ giÃºp nÃ©n sá»‘ láº¡i ngáº¯n hÆ¡n vÃ  nhÃ¬n giá»‘ng mÃ£ code hÆ¡n.
.substr(2, 9):
HÃ m nÃ y cáº¯t chuá»—i kÃ½ tá»±.
2: Báº¯t Ä‘áº§u cáº¯t tá»« vá»‹ trÃ­ thá»© 2 (Ä‘á»ƒ bá» Ä‘i 2 kÃ½ tá»± Ä‘áº§u lÃ  "0.").
9: Láº¥y Ä‘á»™ dÃ i 9 kÃ½ tá»± tiáº¿p theo.
VÃ­ dá»¥ minh há»a quy trÃ¬nh:

Math.random() â” 0.5820184...
.toString(36) â” "0.ky7j2q9..." (Chuyá»ƒn sang chuá»—i gá»“m sá»‘ vÃ  chá»¯)
.substr(2, 9) â” "ky7j2q9" (Cáº¯t bá» "0." vÃ  láº¥y pháº§n Ä‘uÃ´i)


so sÃ¡nh sá»± khÃ¡c nhau giá»¯a useState vá»›i useRef , vÃ  chá»‰ ra khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i

giáº£i thÃ­ch key lÃ  gÃ¬ trong code nÃ y vÃ  cÃ¡c key cÃ³ gÃ¬ khÃ¡c nhau <div className="deals-grid-wrapper" style={{ position: 'relative' }}>
        <PrevArrow onClick={handlePrev} />
        <div className={`deals-grid slide-${direction}`} key={currentPage}>
          {deals.map((deal) => (
            <Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

              <div className="deal-image-wrapper">
                <img src={deal.image} alt={deal.title} className="deal-image" />

                <span className="discount-tag">{deal.date}</span>

                {deal.imageBadges && (
                  <img src={deal.imageBadges} alt="Badge" className="mini-badge" />
                )}

lÃ m form nháº­p thÃ´ng tin ngÆ°á»i mua hÃ ng báº±ng react-hook-form 

 dÃ¹ng API address nÃ y Ä‘á»ƒ láº¥y Ä‘áº§y Ä‘á»§ dá»¯ liá»‡u  :
 https://provinces.open-api.vn/api/?depth=3
 
 DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch thay toÃ n bá»™ addressData tÄ©nh báº±ng dá»¯ liá»‡u tháº­t tá»« API:

ğŸ“Œ API:
https://provinces.open-api.vn/api/?depth=3
â†’ tráº£ vá» Ä‘áº§y Ä‘á»§ Tá»‰nh/TP â†’ Quáº­n/Huyá»‡n â†’ PhÆ°á»ng/XÃ£

âœ… Báº¡n chá»‰ cáº§n lÃ m 3 bÆ°á»›c:
1ï¸âƒ£ Táº¡o state chá»©a dá»¯ liá»‡u API
const [addressData, setAddressData] = React.useState([]);

2ï¸âƒ£ Gá»i API trong useEffect Ä‘á»ƒ láº¥y danh sÃ¡ch tá»‰nh/thÃ nh
React.useEffect(() => {
    fetch("https://provinces.open-api.vn/api/?depth=3")
        .then(res => res.json())
        .then(data => {
            setAddressData(data);
        })
        .catch(err => console.log("Lá»—i API:", err));
}, []);


â¡ï¸ KhÃ´ng cáº§n giá»¯ cÃ¡i addressData object ráº¥t dÃ i ná»¯a.

3ï¸âƒ£ Láº¥y District vÃ  Ward theo API tháº­t

API tráº£ vá» format nhÆ° sau:

[
  {
    "name": "HÃ  Ná»™i",
    "code": 1,
    "districts": [
      {
        "name": "Quáº­n Ba ÄÃ¬nh",
        "wards": [
          { "name": "PhÆ°á»ng Liá»…u Giai" },
          { "name": "PhÆ°á»ng Äá»™i Cáº¥n" }
        ]
      }
    ]
  }
]

ğŸ“Œ Viáº¿t hÃ m láº¥y District theo City
const getDistrictsByCity = (cityCode) => {
    const city = addressData.find(c => c.code === Number(cityCode));
    return city ? city.districts : [];
};

ğŸ“Œ Viáº¿t hÃ m láº¥y Ward theo District
const getWardsByDistrict = (cityCode, districtCode) => {
    const city = addressData.find(c => c.code === Number(cityCode));
    if (!city) return [];

    const district = city.districts.find(d => d.code === Number(districtCode));
    return district ? district.wards : [];
};

ğŸ”¥ 4ï¸âƒ£ Update dropdown select dÃ¹ng dá»¯ liá»‡u API
City Select
<select
    {...register("city", { required: "Vui lÃ²ng chá»n tá»‰nh/thÃ nh phá»‘" })}
    value={selectedCity}
    onChange={(e) => {
        setSelectedCity(e.target.value);
        setSelectedDistrict("");
        setSelectedWard("");
    }}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n tá»‰nh/thÃ nh phá»‘</option>

    {addressData.map((city) => (
        <option key={city.code} value={city.code}>
            {city.name}
        </option>
    ))}
</select>

District Select
<select
    {...register("district", { required: "Vui lÃ²ng chá»n quáº­n/huyá»‡n" })}
    value={selectedDistrict}
    onChange={(e) => {
        setSelectedDistrict(e.target.value);
        setSelectedWard("");
    }}
    disabled={!selectedCity}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n quáº­n/huyá»‡n</option>

    {getDistrictsByCity(selectedCity).map((district) => (
        <option key={district.code} value={district.code}>
            {district.name}
        </option>
    ))}
</select>

Ward Select
<select
    {...register("ward", { required: "Vui lÃ²ng chá»n phÆ°á»ng/xÃ£" })}
    value={selectedWard}
    onChange={(e) => setSelectedWard(e.target.value)}
    disabled={!selectedDistrict}
>
    <option value="" disabled hidden>Vui lÃ²ng chá»n phÆ°á»ng/xÃ£</option>

    {getWardsByDistrict(selectedCity, selectedDistrict).map((ward) => (
        <option key={ward.code} value={ward.code}>
            {ward.name}
        </option>
    ))}
</select>

ğŸ¯ Khi submit form, báº¡n tráº£ vá» dáº¡ng Ä‘áº§y Ä‘á»§:
const onFormSubmit = (data) => {
    const city = addressData.find(c => c.code === Number(data.city));
    const district = getDistrictsByCity(data.city).find(d => d.code === Number(data.district));
    const ward = getWardsByDistrict(data.city, data.district).find(w => w.code === Number(data.ward));

    const fullAddress =
        `${data.addressDetail}, ${ward.name}, ${district.name}, ${city.name}`;

    onSubmit({ ...data, fullAddress });
};

âœ… Káº¿t quáº£:

Báº¡n sáº½ cÃ³:

âœ” Danh sÃ¡ch tá»‰nh/thÃ nh tháº­t
âœ” Danh sÃ¡ch quáº­n/huyá»‡n tháº­t
âœ” Danh sÃ¡ch phÆ°á»ng/xÃ£ tháº­t
âœ” KhÃ´ng cáº§n self-code addressData ná»¯a
âœ” Dá»¯ liá»‡u tá»± Ä‘á»™ng cáº­p nháº­t khi API update
 --------------------------------------------------------------
 
 addressSelector +++++
 
 DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch cá»±c chi tiáº¿t, dá»… hiá»ƒu táº¡i sao trong Ä‘oáº¡n code nÃ y:

React.useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, [forceOpen]);


láº¡i cÃ³ [forceOpen] thay vÃ¬ [] nhÆ° nhá»¯ng useEffect khÃ¡c.

âœ… 1. TrÆ°á»›c tiÃªn: hai dáº¡ng useEffect khÃ¡c nhau
ğŸ”¹ useEffect([]) â€” chá»‰ cháº¡y 1 láº§n duy nháº¥t

VÃ­ dá»¥:

React.useEffect(() => {
  fetchData();
}, []);


â†’ Cháº¡y má»™t láº§n duy nháº¥t khi component vá»«a render, giá»‘ng nhÆ° componentDidMount.

ğŸ”¹ useEffect([forceOpen]) â€” cháº¡y má»—i khi giÃ¡ trá»‹ forceOpen thay Ä‘á»•i

Tá»©c lÃ  nÃ³ cháº¡y trong cÃ¡c trÆ°á»ng há»£p:

â–ª Láº§n Ä‘áº§u component render
â–ª Khi props forceOpen thay Ä‘á»•i do parent component truyá»n xuá»‘ng

â†’ vÃ  chá»‰ cháº¡y khi forceOpen thay Ä‘á»•i, khÃ´ng cháº¡y khi cÃ¡c state khÃ¡c update.

âœ… 2. Táº¡i sao Ä‘oáº¡n code nÃ y pháº£i dÃ¹ng [forceOpen]?

Báº¡n cÃ³ props:

const AddressSelector = ({ onLoginClick, forceOpen = false, onClose })


ğŸ‘‰ nghÄ©a lÃ  component cha cÃ³ thá»ƒ Ä‘iá»u khiá»ƒn â€œmá»Ÿ Modal hay khÃ´ngâ€.

VÃ­ dá»¥:

<AddressSelector forceOpen={isOpening} />


Khi giÃ¡ trá»‹ isOpening Ä‘á»•i tá»« false â†’ true, báº¡n muá»‘n Modal tá»± Ä‘á»™ng báº­t lÃªn.

Muá»‘n lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y, useEffect pháº£i láº¯ng nghe sá»± thay Ä‘á»•i cá»§a forceOpen.

âš ï¸ Náº¿u báº¡n Ä‘á»ƒ máº£ng dependency []:

useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, []); 


â†’ Effect chá»‰ cháº¡y má»™t láº§n khi component mount
â†’ forceOpen thay Ä‘á»•i sau nÃ y sáº½ khÃ´ng cháº¡y láº¡i, Modal sáº½ khÃ´ng má»Ÿ.

ğŸ’¥ NhÆ° váº­y lÃ  sai logic.

ğŸ‘‰ 3. Váº­y Ä‘oáº¡n nÃ y hoáº¡t Ä‘á»™ng nhÆ° sau:
React.useEffect(() => {
  if (forceOpen) {
    setShowLocationModal(true);
  }
}, [forceOpen]);

ğŸ”¹ Khi forceOpen === false

â†’ Effect khÃ´ng lÃ m gÃ¬.

ğŸ”¹ Khi forceOpen Ä‘á»•i thÃ nh true

â†’ Effect cháº¡y â†’ má»Ÿ Modal:

setShowLocationModal(true);

ğŸ”¹ Khi forceOpen Ä‘á»•i láº¡i thÃ nh false

â†’ Effect cháº¡y láº¡i, nhÆ°ng Ä‘iá»u kiá»‡n khÃ´ng thá»a â†’ modal giá»¯ nguyÃªn hoáº·c do logic cha quyáº¿t Ä‘á»‹nh.

ğŸ‘ 4. Khi nÃ o cáº§n dÃ¹ng dependency?
Má»¥c Ä‘Ã­ch	Dependency
Chá»‰ cháº¡y 1 láº§n	[]
Cháº¡y khi state/props nÃ o Ä‘Ã³ thay Ä‘á»•i	[propA, stateB, â€¦]
Cháº¡y má»—i láº§n re-render	KHÃ”NG Ä‘á»ƒ dependency

á» Ä‘Ã¢y forceOpen do component cha Ä‘iá»u khiá»ƒn, nÃªn ta pháº£i theo dÃµi nÃ³ báº±ng [forceOpen].

ğŸ¯ 5. Má»™t vÃ­ dá»¥ trá»±c quan

Parent:

function Header() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <button onClick={() => setOpen(true)}>Chá»n Ä‘á»‹a chá»‰</button>
      <AddressSelector forceOpen={open} />
    </>
  );
}


â†’ Má»—i khi setOpen(true)
â†’ forceOpen trong child = true
â†’ Effect cháº¡y â†’ má»Ÿ modal.

Náº¿u khÃ´ng cÃ³ [forceOpen] â†’ modal sáº½ KHÃ”NG bao giá» má»Ÿ theo hÃ nh vi cá»§a parent.

âœ” Káº¾T LUáº¬N

Báº¡n báº¯t buá»™c pháº£i dÃ¹ng [forceOpen] vÃ¬:

âœ“ forceOpen lÃ  props thay Ä‘á»•i theo ngoáº¡i cáº£nh
âœ“ báº¡n cáº§n component tá»± pháº£n á»©ng má»—i khi forceOpen Ä‘á»•i
âœ“ náº¿u Ä‘á»ƒ [], effect chá»‰ cháº¡y 1 láº§n vÃ  logic â€œbáº­t modal tá»« bÃªn ngoÃ iâ€ sáº½ bá»‹ lá»—i
 
 ===================================================================
Má»™t ref Ä‘Æ°á»£c táº¡o khi component Ä‘Ã£ mount. ref Ä‘Æ°á»£c gÃ¡n cho má»™t element, muá»‘n truyá»n ref thÃ´ng qua component thÃ¬ dÃ¹ng forwardRef.
Ref cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truy cáº­p Ä‘áº¿n DOM node hoáº·c React element. NgoÃ i ra cÃ²n dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c biáº¿n cÃ³ thá»ƒ mutate mÃ  khÃ´ng lÃ m re-render component. 
 "Mutate" trong React cÃ³ nghÄ©a lÃ  biáº¿n Ä‘á»•i trá»±c tiáº¿p má»™t Ä‘á»‘i tÆ°á»£ng hoáº·c máº£ng (thay vÃ¬ táº¡o má»™t báº£n sao má»›i). Máº·c dÃ¹ JavaScript cho phÃ©p "mutate", nhÆ°ng trong React, báº¡n nÃªn trÃ¡nh lÃ m Ä‘iá»u nÃ y trá»±c tiáº¿p vá»›i state Ä‘á»ƒ ngÄƒn cháº·n cÃ¡c lá»—i tiá»m áº©n, thay vÃ o Ä‘Ã³, hÃ£y luÃ´n táº¡o ra má»™t báº£n sao má»›i vÃ  cáº­p nháº­t state báº±ng báº£n sao Ä‘Ã³. KhÃ¡i niá»‡m "mutate" cÅ©ng xuáº¥t hiá»‡n trong ngá»¯ cáº£nh khÃ¡c, vÃ­ dá»¥ nhÆ° trong cÃ¡c thÆ° viá»‡n fetching dá»¯ liá»‡u nhÆ° SWR, nÆ¡i hÃ m mutate() Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ xÃ¡c thá»±c láº¡i dá»¯ liá»‡u mÃ  khÃ´ng cáº§n render láº¡i giao diá»‡n. 
 
 {totalPages > 1 && currentPage > 1 && (
              <PrevArrow onClick={handlePrevPage} />
            )}
 
 
{totalPages > 1 && currentPage < totalPages && (
              <NextArrow onClick={handleNextPage} />
            )} 
 
 

			
			
 
giáº£i thÃ­ch khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i , vÃ  táº¡i sao khÃ´ng dÃ¹ng useState 

1. Khi nÃ o giÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i?

useRef táº¡o ra má»™t object cá»‘ Ä‘á»‹nh, cÃ³ dáº¡ng:

const searchRef = useRef(null);

NÃ³ táº¡o ra object:

{ current: null }

GiÃ¡ trá»‹ cá»§a useRef thay Ä‘á»•i khi:
ğŸ‘‰ React gáº¯n element DOM vÃ o ref

Khi component render xong, React sáº½ gÃ¡n:

searchRef.current = <div className="search" ... >


=> Tá»©c lÃ  current sáº½ chá»©a DOM node cá»§a pháº§n tá»­ <div className="search">.

useRef() tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thuá»™c tÃ­nh current cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ mÃ  khÃ´ng lÃ m re-render component. Trong Ä‘oáº¡n code nÃ y, searchRef Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ tham chiáº¿u Ä‘áº¿n pháº§n tá»­ DOM <div className="search">. Khi component Ä‘Æ°á»£c render, thuá»™c tÃ­nh searchRef.current sáº½ trá» tá»›i pháº§n tá»­ <div> nÃ y, vÃ  sau Ä‘Ã³, useRef Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ kiá»ƒm tra xem ngÆ°á»i dÃ¹ng cÃ³ nháº¥p chuá»™t bÃªn ngoÃ i pháº§n tá»­ nÃ y hay khÃ´ng trong hook useEffect. 
current lÃ  gÃ¬?
current lÃ  thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng do useRef() tráº£ vá», lÆ°u giá»¯ má»™t giÃ¡ trá»‹ báº¥t ká»³.
Trong trÆ°á»ng há»£p nÃ y, nÃ³ trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng DOM cá»§a pháº§n tá»­ Ä‘Æ°á»£c gáº¯n ref.
GiÃ¡ trá»‹ cá»§a current Ä‘Æ°á»£c duy trÃ¬ qua cÃ¡c láº§n render vÃ  thay Ä‘á»•i nÃ³ khÃ´ng kÃ­ch hoáº¡t re-render. 
CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a useRef trong Ä‘oáº¡n code
Khá»Ÿi táº¡o (const searchRef = useRef(null);)
useRef() Ä‘Æ°á»£c gá»i vá»›i null lÃ m giÃ¡ trá»‹ ban Ä‘áº§u.
NÃ³ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ dáº¡ng { current: null } vÃ  Ä‘Æ°á»£c gÃ¡n cho biáº¿n searchRef.
Äá»‘i tÆ°á»£ng nÃ y sáº½ tá»“n táº¡i trong suá»‘t vÃ²ng Ä‘á»i cá»§a component.
Gáº¯n vá»›i pháº§n tá»­ DOM (ref={searchRef})
Khi React render pháº§n tá»­ <div className="search">, nÃ³ sáº½ tá»± Ä‘á»™ng Ä‘áº·t tham chiáº¿u Ä‘áº¿n pháº§n tá»­ DOM Ä‘Ã³ vÃ o searchRef.current.
Sau bÆ°á»›c nÃ y, searchRef.current sáº½ khÃ´ng cÃ²n lÃ  null ná»¯a mÃ  trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng div DOM.

Náº¿u báº¡n console.log trong render, giÃ¡ trá»‹ ban Ä‘áº§u lÃ  null â†’ sau khi render xong, React má»›i gÃ¡n vÃ o.

useRef(null) Ä‘Æ°á»£c khá»Ÿi táº¡o vá»›i giÃ¡ trá»‹ null lÃ  Ä‘á»ƒ trá» Ä‘áº¿n má»™t pháº§n tá»­ DOM mÃ  sáº½ Ä‘Æ°á»£c gÃ¡n sau khi component Ä‘Æ°á»£c render. Khi component render láº§n Ä‘áº§u, pháº§n tá»­ DOM chÆ°a tá»“n táº¡i, vÃ¬ váº­y nÃ³ khá»Ÿi táº¡o searchRef.current lÃ  null. Khi component mount, useEffect sáº½ thá»±c thi vÃ  gÃ¡n pháº§n tá»­ DOM thá»±c táº¿ (vÃ­ dá»¥: <div ref={searchRef}>) cho searchRef.current, sau Ä‘Ã³ handleClickOutside sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ nÃ y Ä‘á»ƒ kiá»ƒm tra.
Khá»Ÿi táº¡o: Khi báº¡n sá»­ dá»¥ng useRef(null), báº¡n Ä‘ang táº¡o ra má»™t object cÃ³ thuá»™c tÃ­nh current vá»›i giÃ¡ trá»‹ ban Ä‘áº§u lÃ  null.
TÃ¡i sá»­ dá»¥ng trong useEffect: Trong useEffect, báº¡n muá»‘n láº¯ng nghe sá»± kiá»‡n click bÃªn ngoÃ i má»™t pháº§n tá»­ nÃ o Ä‘Ã³.
Thá»±c hiá»‡n trÆ°á»›c khi render: HÃ m xá»­ lÃ½ sá»± kiá»‡n Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong useEffect. Tuy nhiÃªn, searchRef.current váº«n lÃ  null trong láº§n render Ä‘áº§u tiÃªn, vÃ¬ pháº§n tá»­ DOM mÃ  nÃ³ tham chiáº¿u chÆ°a Ä‘Æ°á»£c táº¡o ra.
Láº¯ng nghe sá»± kiá»‡n: document.addEventListener("mousedown", handleClickOutside) sáº½ Ä‘Æ°á»£c cháº¡y sau khi component Ä‘Æ°á»£c render, lÃºc nÃ y searchRef.current váº«n lÃ  null.
GÃ¡n giÃ¡ trá»‹ sau khi render: Khi báº¡n cÃ³ má»™t pháº§n tá»­ JSX nhÆ° <div ref={searchRef}>, React sáº½ tá»± Ä‘á»™ng gÃ¡n pháº§n tá»­ DOM Ä‘Ã³ cho searchRef.current sau khi render xong.
Sá»­ dá»¥ng: Khi sá»± kiá»‡n mousedown xáº£y ra, handleClickOutside sáº½ Ä‘Æ°á»£c gá»i. Táº¡i thá»i Ä‘iá»ƒm nÃ y, searchRef.current Ä‘Ã£ cÃ³ giÃ¡ trá»‹ lÃ  pháº§n tá»­ DOM, cho phÃ©p báº¡n kiá»ƒm tra xem sá»± kiá»‡n click cÃ³ xáº£y ra bÃªn trong hay khÃ´ng.


ğŸ‘‰ Báº¡n thay Ä‘á»•i thá»§ cÃ´ng

Báº¡n cÃ³ thá»ƒ chá»‰nh:

searchRef.current = 123;


NhÆ°ng React sáº½ khÃ´ng trigger re-render.

â— Quan trá»ng:
useRef khÃ´ng gÃ¢y re-render khi thay Ä‘á»•i â†’ Ä‘Ã¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t lá»›n nháº¥t vá»›i useState.
âœ… 2. Táº¡i sao trong Ä‘oáº¡n code nÃ y pháº£i dÃ¹ng useRef thay vÃ¬ useState?

 Táº¡i sao dÃ¹ng useRef mÃ  khÃ´ng dÃ¹ng useState?
ChÃºng ta dÃ¹ng useRef á»Ÿ Ä‘Ã¢y vÃ¬ má»¥c Ä‘Ã­ch lÃ  "Truy cáº­p trá»±c tiáº¿p vÃ o pháº§n tá»­ DOM" Ä‘á»ƒ kiá»ƒm tra vá»‹ trÃ­ click chuá»™t, chá»© khÃ´ng pháº£i Ä‘á»ƒ lÆ°u dá»¯ liá»‡u hiá»ƒn thá»‹.

Äáº·c Ä‘iá»ƒm	useState	useRef
Khi giÃ¡ trá»‹ thay Ä‘á»•i	GÃ¢y ra render láº¡i (Re-render) component.	KHÃ”NG gÃ¢y ra render láº¡i component.
Má»¥c Ä‘Ã­ch chÃ­nh	LÆ°u dá»¯ liá»‡u áº£nh hÆ°á»Ÿng Ä‘áº¿n giao diá»‡n (vÃ­ dá»¥: text Ä‘ang gÃµ, tráº¡ng thÃ¡i áº©n/hiá»‡n dropdown).	LÆ°u tham chiáº¿u Ä‘áº¿n DOM hoáº·c cÃ¡c giÃ¡ trá»‹ "ngáº§m" khÃ´ng cáº§n hiá»ƒn thá»‹ ngay.
Trong trÆ°á»ng há»£p nÃ y	Náº¿u dÃ¹ng useState Ä‘á»ƒ lÆ°u cÃ¡i tháº» div, má»—i láº§n React gÃ¡n tháº» div vÃ o state, component sáº½ bá»‹ render láº¡i má»™t láº§n ná»¯a -> Thá»«a thÃ£i vÃ  giáº£m hiá»‡u nÄƒng.	DÃ¹ng useRef lÃ  chuáº©n nháº¥t vÃ¬ ta chá»‰ cáº§n "nhá»›" cÃ¡i tháº» div Ä‘Ã³ náº±m á»Ÿ Ä‘Ã¢u Ä‘á»ƒ so sÃ¡nh xem ngÆ°á»i dÃ¹ng cÃ³ click ra ngoÃ i nÃ³ hay khÃ´ng.
TÃ³m láº¡i:

DÃ¹ng useState khi muá»‘n thay Ä‘á»•i giao diá»‡n.
DÃ¹ng useRef khi muá»‘n thao tÃ¡c vá»›i DOM hoáº·c lÆ°u biáº¿n mÃ  khÃ´ng cáº§n váº½ láº¡i giao diá»‡n.

Trong Ä‘oáº¡n code:

const searchRef = useRef(null);

Báº¡n dÃ¹ng ref Ä‘á»ƒ:

â¤ Láº¥y DOM element cá»§a search box:
if (searchRef.current && !searchRef.current.contains(event.target)) {
    setShowDropdown(false);
}


Báº¡n cáº§n kiá»ƒm tra xem ngÆ°á»i dÃ¹ng click ra ngoÃ i search box hay khÃ´ng.

ğŸ§  VÃ¬ sao khÃ´ng dÃ¹ng useState?
âŒ useState khÃ´ng chá»©a DOM element

State chá»‰ chá»©a dá»¯ liá»‡u Ä‘á»ƒ render UI, khÃ´ng chá»©a Ä‘Æ°á»£c:

DOM node

object khÃ´ng serializable

Báº¡n khÃ´ng thá»ƒ viáº¿t:

const [searchRef, setSearchRef] = useState(null);


Rá»“i gÃ¡n:

<div ref={setSearchRef}>


â†’ Vá» lÃ½ thuyáº¿t cÃ³ thá»ƒ lÃ m, nhÆ°ng nÃ³ sáº½ gÃ¢y re-render má»—i láº§n ref thay Ä‘á»•i, Ä‘iá»u nÃ y khÃ´ng cáº§n thiáº¿t vÃ  gÃ¢y lá»—i.

âš  VÃ¬ sao dÃ¹ng useState á»Ÿ Ä‘Ã¢y lÃ  sai?

DOM node khÃ´ng nÃªn Ä‘i qua bá»™ render cá»§a React
React khÃ´ng designed Ä‘á»ƒ state chá»©a cÃ¡c DOM element.

Náº¿u dÃ¹ng state, má»—i láº§n ref cáº­p nháº­t â†’ component re-render â†’ React láº¡i gÃ¡n ref â†’ re-render â†’ loop
GÃ¢y re-render thá»«a hoáº·c loop vÃ´ háº¡n.

useRef giá»¯ giÃ¡ trá»‹ á»•n Ä‘á»‹nh qua má»—i láº§n render, trong khi state thÃ¬ khÃ´ng.

ğŸ§© TÃ³m láº¡i:
So sÃ¡nh	useRef	useState
Thay Ä‘á»•i cÃ³ gÃ¢y re-render?	âŒ KhÃ´ng	âœ… CÃ³
LÆ°u DOM element?	âœ… CÃ³	âŒ KhÃ´ng nÃªn
DÃ¹ng Ä‘á»ƒ Ä‘á»c/ghi giÃ¡ trá»‹ tá»©c thá»i?	âœ… CÃ³	âŒ KhÃ´ng (asynchronous)
DÃ¹ng Ä‘á»ƒ lÃ m UI cáº­p nháº­t?	âŒ KhÃ´ng	âœ… CÃ³
ğŸ‰ Káº¿t luáº­n
Báº¡n báº¯t buá»™c dÃ¹ng useRef cho trÆ°á»ng há»£p:

âœ” muá»‘n láº¥y pháº§n tá»­ DOM
âœ” muá»‘n lÆ°u giÃ¡ trá»‹ khÃ´ng cáº§n render láº¡i
âœ” muá»‘n dÃ¹ng trong event listener (click outside)

Náº¿u dÃ¹ng useState thÃ¬:

KhÃ´ng chá»©a Ä‘Æ°á»£c DOM

Má»—i thay Ä‘á»•i gÃ¢y re-render khÃ´ng cáº§n thiáº¿t

CÃ³ thá»ƒ gÃ¢y bug click-outside
-----------------------------------------------
phÃ¢n biá»‡t 2 key trong code nÃ y vÃ  cÃ¡c key nÃ y Ä‘á»ƒ lÃ m gÃ¬ <div className="deals-grid-wrapper" style={{ position: 'relative' }}>
        <PrevArrow onClick={handlePrev} />
        <div className={`deals-grid slide-${direction}`} key={currentPage}>
          {deals.map((deal) => (
            <Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

              <div className="deal-image-wrapper">
                <img src={deal.image} alt={deal.title} className="deal-image" />

                <span className="discount-tag">{deal.date}</span>

                {deal.imageBadges && (
                  <img src={deal.imageBadges} alt="Badge" className="mini-badge" />
                )}

              </div>



1. Hai key trong component cá»§a báº¡n lÃ :
âœ… Key 1 â€” dÃ¹ng cho grid
<div className={`deals-grid slide-${direction}`} key={currentPage}>

âœ… Key 2 â€” dÃ¹ng cho tá»«ng item
<Link to={`/product/${deal.id}`} key={deal.id} className="deal-card">

Hai key nÃ y phá»¥c vá»¥ 2 má»¥c Ä‘Ã­ch hoÃ n toÃ n khÃ¡c nhau.

ğŸ§© 2. Key cá»§a deals-grid (key = currentPage)
â— Key nÃ y dÃ¹ng Ä‘á»ƒ Ã©p React re-create láº¡i toÃ n bá»™ grid khi trang thay Ä‘á»•i.

á» Ä‘Ã¢y key={currentPage} lÃ m React hiá»ƒu ráº±ng:

"Má»—i khi currentPage Ä‘á»•i â†’ component nÃ y lÃ  má»™t component hoÃ n toÃ n má»›i â†’ pháº£i unmount + mount láº¡i."

Trong React, "mount" lÃ  quÃ¡ trÃ¬nh thÃªm má»™t component vÃ o DOM (thÃ´ng qua hÃ m render), cÃ²n "unmount" lÃ  quÃ¡ trÃ¬nh gá»¡ bá» component Ä‘Ã³ khá»i DOM. Giai Ä‘oáº¡n mount lÃ  khi component láº§n Ä‘áº§u tiÃªn Ä‘Æ°á»£c hiá»ƒn thá»‹, cÃ²n unmount lÃ  khi nÃ³ bá»‹ xÃ³a khá»i mÃ n hÃ¬nh. 

Äiá»u nÃ y cá»±c ká»³ quan trá»ng náº¿u báº¡n Ä‘ang dÃ¹ng hiá»‡u á»©ng slide CSS (slide-left / slide-right).

1. key={currentPage} (á» tháº» div cha)
Má»¥c Ä‘Ã­ch: KÃ­ch hoáº¡t láº¡i Animation (Hiá»‡u á»©ng chuyá»ƒn trang).
Giáº£i thÃ­ch:
Trong React, khi key cá»§a má»™t component thay Ä‘á»•i, React sáº½ coi Ä‘Ã³ lÃ  má»™t component hoÃ n toÃ n má»›i. NÃ³ sáº½ há»§y bá» (unmount) cÃ¡i cÅ© vÃ  váº½ láº¡i (mount) cÃ¡i má»›i tá»« Ä‘áº§u.
á» Ä‘Ã¢y, khi báº¡n báº¥m nÃºt chuyá»ƒn trang (currentPage thay Ä‘á»•i), React sáº½ xÃ³a háº³n cÃ¡i div cÅ© Ä‘i vÃ  táº¡o má»™t cÃ¡i div má»›i.
Viá»‡c nÃ y giÃºp cÃ¡c hiá»‡u á»©ng CSS (nhÆ° slide-next, slide-prev) Ä‘Æ°á»£c cháº¡y láº¡i tá»« Ä‘áº§u. Náº¿u khÃ´ng Ä‘á»•i key, React chá»‰ cáº­p nháº­t ná»™i dung bÃªn trong thÃ´i nÃªn hiá»‡u á»©ng trÆ°á»£t cÃ³ thá»ƒ sáº½ khÃ´ng cháº¡y.

2. key={deal.id} (á» tháº» Link con)
Má»¥c Ä‘Ã­ch: Äá»‹nh danh pháº§n tá»­ trong danh sÃ¡ch (Hiá»‡u nÄƒng & Logic).
Giáº£i thÃ­ch:
ÄÃ¢y lÃ  yÃªu cáº§u báº¯t buá»™c cá»§a React khi báº¡n dÃ¹ng hÃ m .map() Ä‘á»ƒ in ra má»™t danh sÃ¡ch.
NÃ³ giÃºp React biáº¿t chÃ­nh xÃ¡c sáº£n pháº©m nÃ o lÃ  sáº£n pháº©m nÃ o.
VÃ­ dá»¥: Náº¿u danh sÃ¡ch sáº£n pháº©m thay Ä‘á»•i thá»© tá»±, React dá»±a vÃ o key nÃ y Ä‘á»ƒ chá»‰ sáº¯p xáº¿p láº¡i cÃ¡c tháº» Link cÃ³ sáºµn thay vÃ¬ pháº£i xÃ³a Ä‘i váº½ láº¡i toÃ n bá»™, giÃºp trang web cháº¡y mÆ°á»£t hÆ¡n.

Náº¿u khÃ´ng cÃ³ key={currentPage}, váº¥n Ä‘á» xáº£y ra:

React chá»‰ update láº¡i danh sÃ¡ch item

NhÆ°ng khÃ´ng trigger re-render hoÃ n toÃ n

â†’ animation slide cÃ³ thá»ƒ khÃ´ng cháº¡y hoáº·c cháº¡y lá»—i

â†’ React sáº½ chá»‰ cáº­p nháº­t pháº§n tá»­ bÃªn trong, khÃ´ng reset animation

VÃ¬ sao key hoáº¡t Ä‘á»™ng?

Khi key khÃ¡c nhau:

React behavior:

old key: 0 â†’ new key: 1  
=> React unmount deals-grid cÅ©  
=> React mount deals-grid má»›i  
=> CSS animation cháº¡y láº¡i chuáº©n

ğŸ§© 3. Key cho tá»«ng deal item (key = deal.id)

DÃ¹ng khi render list:

{deals.map((deal) => (
  <Link key={deal.id}>

Má»¥c Ä‘Ã­ch:

GiÃºp React nháº­n biáº¿t tá»«ng pháº§n tá»­ trong danh sÃ¡ch Ä‘á»ƒ tá»‘i Æ°u diffing.

Khi dá»¯ liá»‡u thay Ä‘á»•i React sáº½ biáº¿t:

item nÃ o giá»¯ nguyÃªn

item nÃ o thay Ä‘á»•i

item nÃ o cáº§n thÃªm/xoÃ¡

Náº¿u khÃ´ng cÃ³ key â†’ React sáº½:

cáº£nh bÃ¡o

render sai item

gÃ¢y lá»—i animation / lá»—i state bÃªn trong má»—i item

ğŸ“Œ TÃ³m táº¯t sá»± khÃ¡c nhau
Key	Má»¥c Ä‘Ã­ch	Placement	CÃ¡ch hoáº¡t Ä‘á»™ng
key={currentPage}	Reset toÃ n bá»™ grid khi Ä‘á»•i trang â†’ cho hiá»‡u á»©ng slide	TrÃªn <div className="deals-grid">	Má»—i trang lÃ  1 component má»›i
key={deal.id}	GiÃºp React nháº­n biáº¿t item trong máº£ng, tá»‘i Æ°u render	Trong .map()	Giá»¯ item á»•n Ä‘á»‹nh, trÃ¡nh render lá»—i
ğŸ¯ VÃ­ dá»¥ dá»… hiá»ƒu
â¤ Key cho grid

Giá»‘ng nhÆ° thay toÃ n bá»™ trang â†’ cáº§n "láº­t sang trang khÃ¡c"

â¤ Key cho item

Giá»‘ng nhÆ° Ä‘Ã¡nh sá»‘ gháº¿ â†’ React biáº¿t gháº¿ nÃ o thay Ä‘á»•i, gháº¿ nÃ o giá»¯ nguyÃªn.

Äá»‹nh nghÄ©a Key trong React lÃ  gÃ¬?

Key lÃ  má»™t â€œÄ‘á»‹nh danh duy nháº¥tâ€ mÃ  React dÃ¹ng Ä‘á»ƒ nháº­n biáº¿t tá»«ng pháº§n tá»­ trong danh sÃ¡ch hoáº·c tá»«ng phiÃªn báº£n cá»§a má»™t component.

NÃ³i cÃ¡ch khÃ¡c:

Key giÃºp React biáº¿t pháº§n tá»­ nÃ o giá»¯ nguyÃªn, pháº§n tá»­ nÃ o thay Ä‘á»•i, pháº§n tá»­ nÃ o bá»‹ xoÃ¡ hay cáº§n táº¡o má»›i.

ğŸ§  Táº¡i sao React cáº§n key?

React khÃ´ng so sÃ¡nh UI theo tá»«ng pháº§n tá»­ HTML, mÃ  so sÃ¡nh theo tree (cÃ¢y).

Khi danh sÃ¡ch thay Ä‘á»•i, React cáº§n biáº¿t:

Item nÃ o lÃ  item cÅ©

Item nÃ o má»›i xuáº¥t hiá»‡n

Item nÃ o máº¥t Ä‘i

â¡ï¸ Náº¿u khÃ´ng cÃ³ key, React khÃ´ng biáº¿t Ä‘Ã¢u lÃ  Ä‘Ã¢u â†’ dá»… render sai.

ğŸ“Œ VÃ­ dá»¥ cá»±c dá»… hiá»ƒu

Giáº£ sá»­ báº¡n cÃ³ 3 item:

A, B, C


VÃ  báº¡n thÃªm item â€œXâ€ vÃ o Ä‘áº§u:

X, A, B, C

ğŸ”¹ Náº¿u cÃ³ key (unique):

Thá»© tá»± thay Ä‘á»•i nhÆ°ng React biáº¿t:

A váº«n lÃ  A

B váº«n lÃ  B

C váº«n lÃ  C

X lÃ  pháº§n tá»­ má»›i

â¡ï¸ React chá»‰ thÃªm â€œXâ€.

ğŸ”¹ Náº¿u khÃ´ng cÃ³ key:

React khÃ´ng biáº¿t Ä‘Ã¢u lÃ  Ä‘Ã¢u â†’ nÃ³ Ä‘oÃ¡n:

X lÃ  A

A lÃ  B

B lÃ  C

C biáº¿n máº¥t

â¡ï¸ CÃ¡c component con cÃ³ state sáº½ bá»‹ láº«n, UI nháº£y loáº¡n.

ğŸ¯ Khi nÃ o key Ä‘Æ°á»£c React dÃ¹ng?

React dÃ¹ng key Ä‘á»ƒ:

1ï¸âƒ£ So khá»›p (reconcile) danh sÃ¡ch .map()
items.map(item => <div key={item.id}>{item.name}</div>)

2ï¸âƒ£ Ã‰p unmount + remount component (reset hoÃ n toÃ n)
<div key={currentPage}> ... </div>

3ï¸âƒ£ Quáº£n lÃ½ animation vÃ  transition
4ï¸âƒ£ Giá»¯ state á»•n Ä‘á»‹nh trong tá»«ng item
ğŸ“Œ Key pháº£i thoáº£ Ä‘iá»u kiá»‡n gÃ¬?
Thuá»™c tÃ­nh	YÃªu cáº§u
unique	Trong cÃ¹ng 1 danh sÃ¡ch pháº£i khÃ¡c nhau
stable	KhÃ´ng Ä‘Æ°á»£c thay Ä‘á»•i giá»¯a cÃ¡c láº§n render
predictable	KhÃ´ng dÃ¹ng sá»‘ index náº¿u danh sÃ¡ch thay Ä‘á»•i thá»© tá»±
ğŸš« Lá»—i phá»• biáº¿n: DÃ¹ng index lÃ m key
key={index}


â†’ KhÃ´ng nÃªn dÃ¹ng náº¿u danh sÃ¡ch cÃ³ thÃªm/xoÃ¡/sáº¯p xáº¿p láº¡i.

ğŸ§© Äá»‹nh nghÄ©a Ä‘áº§y Ä‘á»§, chuáº©n React:

Key lÃ  thuá»™c tÃ­nh Ä‘áº·c biá»‡t giÃºp React xÃ¡c Ä‘á»‹nh xem má»™t element trong danh sÃ¡ch cÃ³ thay Ä‘á»•i giá»¯a cÃ¡c láº§n render hay khÃ´ng, tá»« Ä‘Ã³ tá»‘i Æ°u quÃ¡ trÃ¬nh diffing vÃ  rendering.



ghi nhá»› ----------------------------------------------------------------------

Trong Redux Toolkit, state lÃ  dá»¯ liá»‡u táº­p trung, Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t kho chung gá»i lÃ  Store, quáº£n lÃ½ tráº¡ng thÃ¡i tá»•ng thá»ƒ cá»§a á»©ng dá»¥ng. Redux Toolkit giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ state báº±ng cÃ¡ch cung cáº¥p cÃ¡c hÃ m tiá»‡n Ã­ch nhÆ° createSlice Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o ra cÃ¡c action vÃ  reducer, configureStore Ä‘á»ƒ thiáº¿t láº­p store, vÃ  createAsyncThunk Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™. 
CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a state trong Redux Toolkit
Store: Chá»©a táº¥t cáº£ state cá»§a á»©ng dá»¥ng trong má»™t Ä‘á»‘i tÆ°á»£ng duy nháº¥t.
Reducer: Má»™t hÃ m nháº­n vÃ o state hiá»‡n táº¡i vÃ  má»™t action, sau Ä‘Ã³ tráº£ vá» má»™t state má»›i. Redux Toolkit Ä‘Æ¡n giáº£n hÃ³a viá»‡c táº¡o reducer báº±ng cÃ¡ch sá»­ dá»¥ng createSlice, nÃ³ sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c reducer vÃ  action creator dá»±a trÃªn má»™t "slice" (má»™t pháº§n) cá»§a state.
Action: Má»™t Ä‘á»‘i tÆ°á»£ng mÃ´ táº£ nhá»¯ng gÃ¬ Ä‘Ã£ xáº£y ra, vÃ­ dá»¥: { type: 'todos/addTodo', payload: { text: 'Learn Redux' } }. createSlice tá»± Ä‘á»™ng táº¡o ra cÃ¡c action creator cho báº¡n.
LÆ°u trá»¯ dá»¯ liá»‡u: Dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u trá»¯ trong store báº±ng cÃ¡c reducer, vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p bá»Ÿi cÃ¡c component thÃ´ng qua cÃ¡c hook cá»§a React Redux hoáº·c API khÃ¡c.
Redux Toolkit: LÃ  cÃ¡ch tiáº¿p cáº­n chÃ­nh thá»©c Ä‘Æ°á»£c khuyáº¿n khÃ­ch Ä‘á»ƒ quáº£n lÃ½ state. NÃ³ bao bá»c lÃµi Redux vÃ  cung cáº¥p cÃ¡c chá»©c nÄƒng giÃºp viá»‡c viáº¿t code Redux trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n, trÃ¡nh cÃ¡c lá»—i phá»• biáº¿n.
Xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™: createAsyncThunk giÃºp xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ má»™t cÃ¡ch Ä‘Æ¡n giáº£n báº±ng cÃ¡ch tá»± Ä‘á»™ng dispatch cÃ¡c action táº¡i cÃ¡c giai Ä‘oáº¡n khÃ¡c nhau (khá»Ÿi táº¡o, thÃ nh cÃ´ng, tháº¥t báº¡i). 


ğŸ–± 4. Click ra ngoÃ i thÃ¬ áº©n dropdown
useEffect(() => {
  const handleClickOutside = (event) => {
    if (searchRef.current && !searchRef.current.contains(event.target)) {
      setShowDropdown(false);
    }
  };
  document.addEventListener("mousedown", handleClickOutside);
  return () => document.removeEventListener("mousedown", handleClickOutside);
}, []);


Giáº£i thÃ­ch:

Khi click chuá»™t xuá»‘ng báº¥t ká»³ Ä‘Ã¢u (mousedown),

Náº¿u click khÃ´ng náº±m trong vÃ¹ng searchRef (tá»©c lÃ  ngoÃ i Ã´ tÃ¬m kiáº¿m),

ThÃ¬ setShowDropdown(false) â†’ Ä‘Ã³ng dropdown.

Cuá»‘i cÃ¹ng, hÃ m return dá»n dáº¹p listener khi component bá»‹ unmount.



ğŸ” 6. HÃ m chÃ­nh Ä‘á»ƒ xá»­ lÃ½ tÃ¬m kiáº¿m
const handleSearch = () => {
  if (searchValue.trim()) {
    const newHistory = [searchValue, ...searchHistory.filter(item => item !== searchValue)].slice(0, 5);
    setSearchHistory(newHistory);
    localStorage.setItem("searchHistory", JSON.stringify(newHistory));
    setShowDropdown(false);
    console.log("Searching for:", searchValue);
  }
};


Chá»©c nÄƒng:

Kiá»ƒm tra náº¿u ngÆ°á»i dÃ¹ng Ä‘Ã£ nháº­p (khÃ´ng Ä‘á»ƒ trá»‘ng).

ThÃªm tá»« khÃ³a má»›i vÃ o Ä‘áº§u danh sÃ¡ch.

TrÃ¡nh trÃ¹ng láº·p (filter(item => item !== searchValue)).

Giá»›i háº¡n chá»‰ giá»¯ 5 tá»« khÃ³a gáº§n nháº¥t (slice(0,5)).

LÆ°u láº¡i searchHistory vÃ o localStorage.

áº¨n dropdown.

CÃ³ thá»ƒ gá»i API hoáº·c navigate() Ä‘á»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m tháº­t.



Khi ngÆ°á»i dÃ¹ng nháº¥n Enter trong Ã´ input â†’ cháº¡y handleSearch().




setCurrentPage((prev) => (prev > 0 ? prev - 1 : totalPages - 1));

setCurrentPage((prev) => (prev > 0 ? prev - 1 : totalPages - 1));
Náº¿u prev > 0: tá»©c lÃ  khÃ´ng pháº£i trang Ä‘áº§u tiÃªn, thÃ¬ lÃ¹i láº¡i 1 trang (prev - 1).

Náº¿u prev === 0: tá»©c lÃ  Ä‘ang á»Ÿ trang Ä‘áº§u, thÃ¬ vÃ²ng láº¡i trang cuá»‘i cÃ¹ng (totalPages - 1).

setCurrentPage((prev) => (prev < totalPages - 1 ? prev + 1 : 0));

Náº¿u prev < totalPages - 1: tá»©c lÃ  chÆ°a Ä‘áº¿n trang cuá»‘i, thÃ¬ tiáº¿n thÃªm 1 (prev + 1).

Náº¿u prev === totalPages - 1: tá»©c lÃ  Ä‘ang á»Ÿ trang cuá»‘i, thÃ¬ vÃ²ng láº¡i trang Ä‘áº§u tiÃªn (0).

rating = 4.5
fullStars = Math.floor(4.5) = 4

Math.ceil(4.5) = 5
emptyStars = 5 - 5 = 0





--------git--------

CÃ¡ch kháº¯c phá»¥c: Táº¡o Ã­t nháº¥t má»™t commit
Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:
- ThÃªm file vÃ o staging area:
git add .
- Táº¡o commit Ä‘áº§u tiÃªn:
git commit -m "Initial commit on main branch"
- Äáº©y lÃªn remote:
git push -u xuantran0503 main

git remote add origin https://github.com/xuantran0503/giao_dien_tiki.git



Sau khi lÃ m xong, Git sáº½ nháº­n diá»‡n nhÃ¡nh main vÃ  cho phÃ©p báº¡n Ä‘áº©y lÃªn GitHub.


Náº¿u báº¡n muá»‘n ghi Ä‘Ã¨ hoÃ n toÃ n ná»™i dung trÃªn GitHub báº±ng code local (cáº©n tháº­n vÃ¬ sáº½ máº¥t dá»¯ liá»‡u trÃªn remote), thÃ¬ dÃ¹ng:
git push -u xuantran0503 main --force


âš ï¸ Chá»‰ dÃ¹ng --force náº¿u báº¡n cháº¯c cháº¯n muá»‘n thay tháº¿ toÃ n bá»™ ná»™i dung trÃªn GitHub.


ğŸ”¸ TrÆ°á»ng há»£p báº¡n chá»‰ muá»‘n chuyá»ƒn sang nhÃ¡nh main (náº¿u nÃ³ Ä‘Ã£ cÃ³ sáºµn):

Náº¿u báº¡n chÆ°a cÃ³ nhÃ¡nh main cá»¥c bá»™, hÃ£y táº¡o tá»« remote:

git fetch origin
git checkout main

git branch -M main

